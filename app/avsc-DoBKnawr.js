import{a5 as We,a6 as Mr,a7 as Ze,a8 as Zr,a9 as Qe,a3 as Re,aa as Hr,ab as Rr,ac as Ur,ad as Vr,ae as Ir,B as $r,a1 as Gr}from"./vendor-DzHmcp6v.js";function Wr(l,q){for(var ue=0;ue<q.length;ue++){const E=q[ue];if(typeof E!="string"&&!Array.isArray(E)){for(const J in E)if(J!=="default"&&!(J in l)){const g=Object.getOwnPropertyDescriptor(E,J);g&&Object.defineProperty(l,J,g.get?g:{enumerable:!0,get:()=>E[J]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}var rt={exports:{}},nt={exports:{}},it,Ht;function Ye(){if(Ht)return it;Ht=1;var l=We(),q=Mr(),ue=Ze(),E=l.Buffer,J=new R(4096),g=/^[A-Za-z_][A-Za-z0-9_]*$/,b=ue.format;function B(p){return typeof E.alloc=="function"?E.alloc(p):new E(p)}function A(p,m){return typeof E.from=="function"?E.from(p,m):new E(p,m)}function z(p){return p.charAt(0).toUpperCase()+p.slice(1)}function S(p,m){return p===m?0:p<m?-1:1}function W(p,m,j){var M=p[m];return M===void 0?j:M}function y(p,m){m=m||"md5";var j=q.createHash(m);return j.end(p),j.read()}function c(p,m){var j=-1,M,he;if(!p)return-1;for(M=0,he=p.length;M<he;M++)if(p[M]===m){if(j>=0)return-2;j=M}return j}function k(p,m){var j={},M,he;for(M=0;M<p.length;M++)he=p[M],j[m(he)]=he;return j}function K(p){return Object.keys(p).map(function(m){return p[m]})}function fe(p,m){var j=Object.create(null),M,he,F;for(M=0,he=p.length;M<he;M++){if(F=p[M],m&&(F=m(F)),j[F])return!0;j[F]=!0}return!1}function ae(p,m,j){var M=Object.getOwnPropertyNames(p),he,F,C;for(he=0,F=M.length;he<F;he++)if(C=M[he],!m.hasOwnProperty(C)||j){var ve=Object.getOwnPropertyDescriptor(p,C);Object.defineProperty(m,C,ve)}return m}function N(p){return g.test(p)}function H(p,m){return~p.indexOf(".")?p=p.replace(/^\./,""):m&&(p=m+"."+p),p.split(".").forEach(function(j){if(!N(j))throw new Error(b("invalid name: %j",p))}),p}function X(p){var m=p.split(".");return m[m.length-1]}function oe(p){var m=/^(.*)\.[^.]+$/.exec(p);return m?m[1]:void 0}function ie(p,m){m=m|0;var j=p.charAt(m++);if(/[\d-]/.test(j)){for(;/[eE\d.+-]/.test(p.charAt(m));)m++;return m}else{if(/true|null/.test(p.slice(m-1,m+3)))return m+3;if(/false/.test(p.slice(m-1,m+4)))return m+4}var M=0,he=!1;do switch(j){case"{":case"[":he||M++;break;case"}":case"]":if(!he&&!--M)return m;break;case'"':if(he=!he,!M&&!he)return m;break;case"\\":m++}while(j=p.charAt(m++));return-1}function $(){throw new Error("abstract")}function L(p,m){var j=p.prototype,M,he,F,C;for(M=0,he=m.length;M<he;M++)F=m[M],C="get"+z(F),j[C]=ue.deprecate(ve(F),"use `."+F+"` instead of `."+C+"()`");function ve(ye){return function(){var me=this[ye];return typeof me=="function"?me.apply(this,arguments):me}}}function R(p){this._len=p|0,this._pos=0,this._slab=B(this._len)}R.prototype.alloc=function(p){if(p<0)throw new Error("negative length");var m=this._len;return p>m?B(p):(this._pos+p>m&&(this._slab=B(m),this._pos=0),this._slab.slice(this._pos,this._pos+=p))};function Y(p){var m=1103515245,j=12345,M=Math.pow(2,31),he=Math.floor(p||Math.random()*(M-1));this._max=M,this._nextInt=function(){return he=(m*he+j)%M}}Y.prototype.nextBoolean=function(){return!!(this._nextInt()%2)},Y.prototype.nextInt=function(p,m){return m===void 0&&(m=p,p=0),m=m===void 0?this._max:m,p+Math.floor(this.nextFloat()*(m-p))},Y.prototype.nextFloat=function(p,m){return m===void 0&&(m=p,p=0),m=m===void 0?1:m,p+(m-p)*this._nextInt()/this._max},Y.prototype.nextString=function(p,m){p|=0,m=m||"aA";var j="";m.indexOf("a")>-1&&(j+="abcdefghijklmnopqrstuvwxyz"),m.indexOf("A")>-1&&(j+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),m.indexOf("#")>-1&&(j+="0123456789"),m.indexOf("!")>-1&&(j+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var M=[],he=0;he<p;he++)M.push(this.choice(j));return M.join("")},Y.prototype.nextBuffer=function(p){var m=[],j;for(j=0;j<p;j++)m.push(this.nextInt(256));return A(m)},Y.prototype.choice=function(p){var m=p.length;if(!m)throw new Error("choosing from empty array");return p[this.nextInt(m)]};function te(){this._index=0,this._items=[]}te.prototype.push=function(p){var m=this._items,j=m.length|0,M;for(m.push(p);j>0&&m[j].index<m[M=j-1>>1].index;)p=m[j],m[j]=m[M],m[M]=p,j=M},te.prototype.pop=function(){var p=this._items,m=p.length-1|0,j=p[0];if(!j||j.index>this._index)return null;if(this._index++,!m)return p.pop(),j;p[0]=p.pop();for(var M=m>>1,he=0,F,C,ve,ye,me,Z,P;he<M&&(ye=p[he],F=(he<<1)+1,C=he+1<<1,Z=p[F],P=p[C],!P||Z.index<=P.index?(me=Z,ve=F):(me=P,ve=C),!(me.index>=ye.index));)p[ve]=ye,p[he]=me,he=ve;return j};function v(p,m){if(this.buf=p,this.pos=m|0,this.pos<0)throw new Error("negative offset")}v.prototype.isValid=function(){return this.pos<=this.buf.length},v.prototype._invalidate=function(){this.pos=this.buf.length+1},v.prototype.readBoolean=function(){return!!this.buf[this.pos++]},v.prototype.skipBoolean=function(){this.pos++},v.prototype.writeBoolean=function(p){this.buf[this.pos++]=!!p},v.prototype.readInt=v.prototype.readLong=function(){var p=0,m=0,j=this.buf,M,he,F,C;do M=j[this.pos++],he=M&128,p|=(M&127)<<m,m+=7;while(he&&m<28);if(he){F=p,C=268435456;do M=j[this.pos++],F+=(M&127)*C,C*=128;while(M&128);return(F%2?-(F+1):F)/2}return p>>1^-(p&1)},v.prototype.skipInt=v.prototype.skipLong=function(){for(var p=this.buf;p[this.pos++]&128;);},v.prototype.writeInt=v.prototype.writeLong=function(p){var m=this.buf,j,M;if(p>=-1073741824&&p<1073741824){M=p>=0?p<<1:~p<<1|1;do m[this.pos]=M&127,M>>=7;while(M&&(m[this.pos++]|=128))}else{j=p>=0?p*2:-p*2-1;do m[this.pos]=j&127,j/=128;while(j>=1&&(m[this.pos++]|=128))}this.pos++},v.prototype.readFloat=function(){var p=this.buf,m=this.pos;return this.pos+=4,this.pos>p.length?0:this.buf.readFloatLE(m)},v.prototype.skipFloat=function(){this.pos+=4},v.prototype.writeFloat=function(p){var m=this.buf,j=this.pos;if(this.pos+=4,!(this.pos>m.length))return this.buf.writeFloatLE(p,j)},v.prototype.readDouble=function(){var p=this.buf,m=this.pos;return this.pos+=8,this.pos>p.length?0:this.buf.readDoubleLE(m)},v.prototype.skipDouble=function(){this.pos+=8},v.prototype.writeDouble=function(p){var m=this.buf,j=this.pos;if(this.pos+=8,!(this.pos>m.length))return this.buf.writeDoubleLE(p,j)},v.prototype.readFixed=function(p){var m=this.pos;if(this.pos+=p,!(this.pos>this.buf.length)){var j=J.alloc(p);return this.buf.copy(j,0,m,m+p),j}},v.prototype.skipFixed=function(p){this.pos+=p},v.prototype.writeFixed=function(p,m){m=m||p.length;var j=this.pos;this.pos+=m,!(this.pos>this.buf.length)&&p.copy(this.buf,j,0,m)},v.prototype.readBytes=function(){var p=this.readLong();if(p<0){this._invalidate();return}return this.readFixed(p)},v.prototype.skipBytes=function(){var p=this.readLong();if(p<0){this._invalidate();return}this.pos+=p},v.prototype.writeBytes=function(p){var m=p.length;this.writeLong(m),this.writeFixed(p,m)},typeof E.prototype.utf8Slice=="function"?v.prototype.readString=function(){var p=this.readLong();if(p<0)return this._invalidate(),"";var m=this.pos,j=this.buf;if(this.pos+=p,!(this.pos>j.length))return this.buf.utf8Slice(m,m+p)}:v.prototype.readString=function(){var p=this.readLong();if(p<0)return this._invalidate(),"";var m=this.pos,j=this.buf;if(this.pos+=p,!(this.pos>j.length))return this.buf.slice(m,m+p).toString()},v.prototype.skipString=function(){var p=this.readLong();if(p<0){this._invalidate();return}this.pos+=p},v.prototype.writeString=function(p){var m=E.byteLength(p),j=this.buf;this.writeLong(m);var M=this.pos;if(this.pos+=m,!(this.pos>j.length))if(m>64&&typeof E.prototype.utf8Write=="function")j.utf8Write(p,M,m);else{var he,F,C,ve;for(he=0,F=m;he<F;he++)C=p.charCodeAt(he),C<128?j[M++]=C:C<2048?(j[M++]=C>>6|192,j[M++]=C&63|128):(C&64512)===55296&&((ve=p.charCodeAt(he+1))&64512)===56320?(C=65536+((C&1023)<<10)+(ve&1023),he++,j[M++]=C>>18|240,j[M++]=C>>12&63|128,j[M++]=C>>6&63|128,j[M++]=C&63|128):(j[M++]=C>>12|224,j[M++]=C>>6&63|128,j[M++]=C&63|128)}},typeof E.prototype.latin1Write=="function"?v.prototype.writeBinary=function(p,m){var j=this.pos;this.pos+=m,!(this.pos>this.buf.length)&&this.buf.latin1Write(p,j,m)}:typeof E.prototype.binaryWrite=="function"?v.prototype.writeBinary=function(p,m){var j=this.pos;this.pos+=m,!(this.pos>this.buf.length)&&this.buf.binaryWrite(p,j,m)}:v.prototype.writeBinary=function(p,m){var j=this.pos;this.pos+=m,!(this.pos>this.buf.length)&&this.buf.write(p,j,m,"binary")},v.prototype.matchBoolean=function(p){return this.buf[this.pos++]-p.buf[p.pos++]},v.prototype.matchInt=v.prototype.matchLong=function(p){var m=this.readLong(),j=p.readLong();return m===j?0:m<j?-1:1},v.prototype.matchFloat=function(p){var m=this.readFloat(),j=p.readFloat();return m===j?0:m<j?-1:1},v.prototype.matchDouble=function(p){var m=this.readDouble(),j=p.readDouble();return m===j?0:m<j?-1:1},v.prototype.matchFixed=function(p,m){return this.readFixed(m).compare(p.readFixed(m))},v.prototype.matchBytes=v.prototype.matchString=function(p){var m=this.readLong(),j=this.pos;this.pos+=m;var M=p.readLong(),he=p.pos;p.pos+=M;var F=this.buf.slice(j,this.pos),C=p.buf.slice(he,p.pos);return F.compare(C)},v.prototype.unpackLongBytes=function(){var p=B(8),m=0,j=0,M=6,he=this.buf,F,C;for(F=he[this.pos++],C=F&1,p.fill(0),m|=(F&127)>>1;F&128;)F=he[this.pos++],m|=(F&127)<<M,M+=7,M>=8&&(M-=8,p[j++]=m,m>>=8);return p[j]=m,C&&O(p,8),p},v.prototype.packLongBytes=function(p){var m=(p[7]&128)>>7,j=this.buf,M=1,he=0,F=3,C;m?(O(p,8),C=1):C=0;for(var ve=[p.readUIntLE(0,3),p.readUIntLE(3,3),p.readUIntLE(6,2)];F&&!ve[--F];);for(;he<F;)for(C|=ve[he++]<<M,M+=24;M>7;)j[this.pos++]=C&127|128,C>>=7,M-=7;C|=ve[F]<<M;do j[this.pos]=C&127,C>>=7;while(C&&(j[this.pos++]|=128));this.pos++,m&&O(p,8)};function O(p,m){for(;m--;)p[m]=~p[m]}return it={abstractFunction:$,addDeprecatedGetters:L,bufferFrom:A,capitalize:z,copyOwnProperties:ae,getHash:y,compare:S,getOption:W,impliedNamespace:oe,isValidName:N,jsonEnd:ie,newBuffer:B,objectValues:K,qualify:H,toMap:k,singleIndexOf:c,hasDuplicates:fe,unqualify:X,BufferPool:R,Lcg:Y,OrderedQueue:te,Tap:v},it}var at,Ut;function zt(){if(Ut)return at;Ut=1;var l=Ye(),q=We(),ue=Ze(),E=q.Buffer,J=q.SlowBuffer,g=l.Tap,b=ue.debuglog("avsc:types"),B=ue.format,A={array:O,boolean:fe,bytes:ie,double:X,enum:Y,error:p,fixed:te,float:H,int:ae,long:N,map:v,null:K,record:p,string:oe},z=new l.Lcg,S=new g(new J(1024)),W=null,y=[];function c(t,i){var e;if(W?(e=W,y.push([W,this]),W=null):e=this,this._hash=new F,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,a=t.namespace===void 0?i&&i.namespace:t.namespace;if(n!==void 0){if(n=ge(n,a),me(n))throw new Error(B("cannot rename primitive type: %j",n));var u=i&&i.registry;if(u){if(u[n]!==void 0)throw new Error(B("duplicate type name: %s",n));u[n]=e}}else if(i&&i.noAnonymousTypes)throw new Error(B("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(h){return ge(h,a)}):[]}}c.forSchema=function(t,i){i=i||{},i.registry=i.registry||{};var e=function(I){switch(I===!0?I="always":I===!1?I="never":I===void 0?I="auto":typeof I=="string"&&(I=I.toLowerCase()),I){case"always":return R;case"never":return L;case"auto":return;default:throw new Error(B("invalid wrap unions option: %j",I))}}(i.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(c.isType(t))return t;var n;if(i.typeHook&&(n=i.typeHook(t,i))){if(!c.isType(n))throw new Error(B("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=ge(t,i.namespace),n=i.registry[t],n)return n;if(me(t))return i.registry[t]=c.forSchema({type:t},i);throw new Error(B("undefined type name: %s",t))}if(t.logicalType&&i.logicalTypes&&!W){var a=i.logicalTypes[t.logicalType];if(a){var u=i.namespace,h={};Object.keys(i.registry).forEach(function(I){h[I]=i.registry[I]});try{return b("instantiating logical type for %s",t.logicalType),new a(t,i)}catch(I){if(b("failed to instantiate logical type for %s",t.logicalType),i.assertLogicalTypes)throw I;W=null,i.namespace=u,i.registry=h}}}if(Array.isArray(t)){var o=W;W=null;var _=t.map(function(I){return c.forSchema(I,i)});e||(e=ke(_)?R:L),W=o,n=new e(_,i)}else n=function(I){var G=A[I];if(G===void 0)throw new Error(B("unknown type: %j",I));return new G(t,i)}(t.type);return n},c.forValue=function(t,i){if(i=i||{},i.emptyArrayType=i.emptyArrayType||c.forSchema({type:"array",items:"null"}),i.valueHook){var e=i.valueHook(t,i);if(e!==void 0){if(!c.isType(e))throw new Error(B("invalid value hook return value: %j",e));return e}}switch(typeof t){case"string":return c.forSchema("string",i);case"boolean":return c.forSchema("boolean",i);case"number":return(t|0)===t?c.forSchema("int",i):Math.abs(t)<9007199254740991?c.forSchema("float",i):c.forSchema("double",i);case"object":if(t===null)return c.forSchema("null",i);if(Array.isArray(t))return t.length?c.forSchema({type:"array",items:c.forTypes(t.map(function(a){return c.forValue(a,i)}),i)},i):i.emptyArrayType;if(E.isBuffer(t))return c.forSchema("bytes",i);var n=Object.keys(t);return n.some(function(a){return!l.isValidName(a)})?c.forSchema({type:"map",values:c.forTypes(n.map(function(a){return c.forValue(t[a],i)}),i)},i):c.forSchema({type:"record",fields:n.map(function(a){return{name:a,type:c.forValue(t[a],i)}})},i);default:throw new Error(B("cannot infer type from: %j",t))}},c.forTypes=function(t,i){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];i=i||{};var e=[],n=0,a=!0;if(t.forEach(function(ee){switch(ee.typeName){case"union:unwrapped":a=!1,e=e.concat(ee.types);break;case"union:wrapped":n++,e=e.concat(ee.types);break;case"null":e.push(ee);break;default:a=!1,e.push(ee)}}),n){if(!a)throw new Error("cannot combine wrapped union");var u={};e.forEach(function(ee){var de=ee.branchName,_e=u[de];if(!_e)u[de]=ee;else if(!ee.equals(_e))throw new Error("inconsistent branch type")});var h=i.wrapUnions,o;i.wrapUnions=!0;try{o=c.forSchema(Object.keys(u).map(function(ee){return u[ee]}),i)}catch(ee){throw i.wrapUnions=h,ee}return i.wrapUnions=h,o}var _={};e.forEach(function(ee){var de=be(ee),_e=_[de];_e||(_[de]=_e=[]),_e.push(ee)});var I=Object.keys(_),G=I.map(function(ee){var de=_[ee];if(de.length===1)return de[0];switch(ee){case"null":case"boolean":return de[0];case"number":return xe(de);case"string":return Ie(de,i);case"buffer":return Le(de,i);case"array":return de=de.filter(function(_e){return _e!==i.emptyArrayType}),de.length?c.forSchema({type:"array",items:c.forTypes(de.map(function(_e){return _e.itemsType}),i)},i):i.emptyArrayType;default:return Pe(de,i)}});return G.length===1?G[0]:c.forSchema(G,i)},c.isType=function(){var t=arguments.length;if(!t)return!1;var i=arguments[0];if(!i||typeof i._update!="function"||typeof i.fingerprint!="function")return!1;if(t===1)return!0;var e=i.typeName,n;for(n=1;n<t;n++)if(e.indexOf(arguments[n])===0)return!0;return!1},c.__reset=function(t){b("resetting type buffer to %d",t),S.buf=new J(t)},Object.defineProperty(c.prototype,"branchName",{enumerable:!0,get:function(){var t=c.isType(this,"logical")?this.underlyingType:this;return t.name?t.name:c.isType(t,"abstract")?t._concreteTypeName:c.isType(t,"union")?void 0:t.typeName}}),c.prototype.clone=function(t,i){return i?(i={coerce:!!i.coerceBuffers|0,fieldHook:i.fieldHook,qualifyNames:!!i.qualifyNames,skip:!!i.skipMissingFields,wrap:!!i.wrapUnions|0},this._copy(t,i)):this.fromBuffer(this.toBuffer(t))},c.prototype.compare=l.abstractFunction,c.prototype.compareBuffers=function(t,i){return this._match(new g(t),new g(i))},c.prototype.createResolver=function(t,i){if(!c.isType(t))throw new Error(B("not a type: %j",t));if(!c.isType(this,"union","logical")&&c.isType(t,"logical"))return this.createResolver(t.underlyingType,i);i=i||{},i.registry=i.registry||{};var e,n;if(c.isType(this,"record","error")&&c.isType(t,"record","error")&&(n=this.name+":"+t.name,e=i.registry[n],e))return e;if(e=new he(this),n&&(i.registry[n]=e),c.isType(t,"union")){var a=t.types.map(function(u){return this.createResolver(u,i)},this);e._read=function(u){var h=u.readLong(),o=a[h];if(o===void 0)throw new Error(B("invalid union index: %s",h));return a[h]._read(u)}}else this._update(e,t,i);if(!e._read)throw new Error(B("cannot read %s as %s",t,this));return Object.freeze(e)},c.prototype.decode=function(t,i,e){var n=new g(t,i),a=C(this,n,e);return n.isValid()?{value:a,offset:n.pos}:{value:void 0,offset:-1}},c.prototype.encode=function(t,i,e){var n=new g(i,e);return this._write(n,t),n.isValid()?n.pos:i.length-n.pos},c.prototype.equals=function(t,i){var e=c.isType(t)&&this.fingerprint().equals(t.fingerprint());return!e||!(i&&i.strict)?e:JSON.stringify(this.schema({exportAttrs:!0}))===JSON.stringify(t.schema({exportAttrs:!0}))},c.prototype.fingerprint=function(t){if(t)return l.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var i=JSON.stringify(this.schema());this._hash.str=l.getHash(i).toString("binary")}return l.bufferFrom(this._hash.str,"binary")},c.prototype.fromBuffer=function(t,i,e){var n=new g(t),a=C(this,n,i,e);if(!n.isValid())throw new Error("truncated buffer");if(!e&&n.pos<t.length)throw new Error("trailing data");return a},c.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})},c.prototype.inspect=function(){var t=this.typeName,i=Z(t);if(me(t))return B("<%s>",i);var e=this.schema({exportAttrs:!0,noDeref:!0});return typeof e=="object"&&!c.isType(this,"logical")&&(e.type=void 0),B("<%s %j>",i,e)},c.prototype.isValid=function(t,i){var e=(i&&i.noUndeclaredFields)|0,n=i&&i.errorHook,a,u;return n&&(u=[],a=function(h,o){n.call(this,u.slice(),h,o,t)}),this._check(t,e,a,u)},c.prototype.random=l.abstractFunction,c.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})},c.prototype.toBuffer=function(t){S.pos=0,this._write(S,t);var i=l.newBuffer(S.pos);return S.isValid()?S.buf.copy(i,0,0,S.pos):this._write(new g(i),t),i},c.prototype.toJSON=function(){return this.schema({exportAttrs:!0})},c.prototype.toString=function(t){return JSON.stringify(t===void 0?this.schema({noDeref:!0}):this._copy(t,{coerce:3}))},c.prototype.wrap=function(t){var i=this._branchConstructor;return i===null?null:new i(t)},c.prototype._attrs=function(t){t.derefed=t.derefed||{};var i=this.name;if(i!==void 0){if(t.noDeref||t.derefed[i])return i;t.derefed[i]=!0}var e={};this.name!==void 0&&(e.name=i),e.type=this.typeName;var n=this._deref(e,t);return n!==void 0&&(e=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(e.aliases=this.aliases),this.doc!==void 0&&(e.doc=this.doc)),e},c.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;var i=~t.indexOf(".")?"this['"+t+"']":"this."+t,e="return function Branch$(val) { "+i+" = val; };",n=new Function(e)();return n.type=this,n.prototype.unwrap=new Function("return "+i+";"),n.prototype.unwrapped=n.prototype.unwrap,n},c.prototype._peek=function(t){var i=t.pos,e=this._read(t);return t.pos=i,e},c.prototype._check=l.abstractFunction,c.prototype._copy=l.abstractFunction,c.prototype._deref=l.abstractFunction,c.prototype._match=l.abstractFunction,c.prototype._read=l.abstractFunction,c.prototype._skip=l.abstractFunction,c.prototype._update=l.abstractFunction,c.prototype._write=l.abstractFunction,c.prototype.getAliases=function(){return this.aliases},c.prototype.getFingerprint=c.prototype.fingerprint,c.prototype.getName=function(t){return this.name||!t?this.name:this.branchName},c.prototype.getSchema=c.prototype.schema,c.prototype.getTypeName=function(){return this.typeName};function k(t){c.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}ue.inherits(k,c),k.prototype._update=function(t,i){i.typeName===this.typeName&&(t._read=this._read)},k.prototype._copy=function(t){return this._check(t,void 0,Q),t},k.prototype._deref=function(){return this.typeName},k.prototype.compare=l.compare;function K(){k.call(this)}ue.inherits(K,k),K.prototype._check=function(t,i,e){var n=t===null;return!n&&e&&e(t,this),n},K.prototype._read=function(){return null},K.prototype._skip=function(){},K.prototype._write=function(t,i){i!==null&&Q(i,this)},K.prototype._match=function(){return 0},K.prototype.compare=K.prototype._match,K.prototype.typeName="null",K.prototype.random=K.prototype._read;function fe(){k.call(this)}ue.inherits(fe,k),fe.prototype._check=function(t,i,e){var n=typeof t=="boolean";return!n&&e&&e(t,this),n},fe.prototype._read=function(t){return t.readBoolean()},fe.prototype._skip=function(t){t.skipBoolean()},fe.prototype._write=function(t,i){typeof i!="boolean"&&Q(i,this),t.writeBoolean(i)},fe.prototype._match=function(t,i){return t.matchBoolean(i)},fe.prototype.typeName="boolean",fe.prototype.random=function(){return z.nextBoolean()};function ae(){k.call(this)}ue.inherits(ae,k),ae.prototype._check=function(t,i,e){var n=t===(t|0);return!n&&e&&e(t,this),n},ae.prototype._read=function(t){return t.readInt()},ae.prototype._skip=function(t){t.skipInt()},ae.prototype._write=function(t,i){i!==(i|0)&&Q(i,this),t.writeInt(i)},ae.prototype._match=function(t,i){return t.matchInt(i)},ae.prototype.typeName="int",ae.prototype.random=function(){return z.nextInt(1e3)|0};function N(){k.call(this)}ue.inherits(N,k),N.prototype._check=function(t,i,e){var n=typeof t=="number"&&t%1===0&&D(t);return!n&&e&&e(t,this),n},N.prototype._read=function(t){var i=t.readLong();if(!D(i))throw new Error("potential precision loss");return i},N.prototype._skip=function(t){t.skipLong()},N.prototype._write=function(t,i){(typeof i!="number"||i%1||!D(i))&&Q(i,this),t.writeLong(i)},N.prototype._match=function(t,i){return t.matchLong(i)},N.prototype._update=function(t,i){switch(i.typeName){case"int":t._read=i._read;break;case"abstract:long":case"long":t._read=this._read}},N.prototype.typeName="long",N.prototype.random=function(){return z.nextInt()},N.__with=function(t,i){t=t||{};var e={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new j(i);return Object.keys(e).forEach(function(a){if(t[a]===void 0)throw new Error(B("missing method implementation: %s",a));n[e[a]]=t[a]}),Object.freeze(n)};function H(){k.call(this)}ue.inherits(H,k),H.prototype._check=function(t,i,e){var n=typeof t=="number";return!n&&e&&e(t,this),n},H.prototype._read=function(t){return t.readFloat()},H.prototype._skip=function(t){t.skipFloat()},H.prototype._write=function(t,i){typeof i!="number"&&Q(i,this),t.writeFloat(i)},H.prototype._match=function(t,i){return t.matchFloat(i)},H.prototype._update=function(t,i){switch(i.typeName){case"float":case"int":t._read=i._read;break;case"abstract:long":case"long":t._read=function(e){return e.readLong()}}},H.prototype.typeName="float",H.prototype.random=function(){return z.nextFloat(1e3)};function X(){k.call(this)}ue.inherits(X,k),X.prototype._check=function(t,i,e){var n=typeof t=="number";return!n&&e&&e(t,this),n},X.prototype._read=function(t){return t.readDouble()},X.prototype._skip=function(t){t.skipDouble()},X.prototype._write=function(t,i){typeof i!="number"&&Q(i,this),t.writeDouble(i)},X.prototype._match=function(t,i){return t.matchDouble(i)},X.prototype._update=function(t,i){switch(i.typeName){case"double":case"float":case"int":t._read=i._read;break;case"abstract:long":case"long":t._read=function(e){return e.readLong()}}},X.prototype.typeName="double",X.prototype.random=function(){return z.nextFloat()};function oe(){k.call(this)}ue.inherits(oe,k),oe.prototype._check=function(t,i,e){var n=typeof t=="string";return!n&&e&&e(t,this),n},oe.prototype._read=function(t){return t.readString()},oe.prototype._skip=function(t){t.skipString()},oe.prototype._write=function(t,i){typeof i!="string"&&Q(i,this),t.writeString(i)},oe.prototype._match=function(t,i){return t.matchString(i)},oe.prototype._update=function(t,i){switch(i.typeName){case"bytes":case"string":t._read=this._read}},oe.prototype.typeName="string",oe.prototype.random=function(){return z.nextString(z.nextInt(32))};function ie(){k.call(this)}ue.inherits(ie,k),ie.prototype._check=function(t,i,e){var n=E.isBuffer(t);return!n&&e&&e(t,this),n},ie.prototype._read=function(t){return t.readBytes()},ie.prototype._skip=function(t){t.skipBytes()},ie.prototype._write=function(t,i){E.isBuffer(i)||Q(i,this),t.writeBytes(i)},ie.prototype._match=function(t,i){return t.matchBytes(i)},ie.prototype._update=oe.prototype._update,ie.prototype._copy=function(t,i){var e;switch((i&&i.coerce)|0){case 3:return this._check(t,void 0,Q),t.toString("binary");case 2:if(typeof t!="string")throw new Error(B("cannot coerce to buffer: %j",t));return e=l.bufferFrom(t,"binary"),this._check(e,void 0,Q),e;case 1:if(!pe(t))throw new Error(B("cannot coerce to buffer: %j",t));return e=l.bufferFrom(t.data),this._check(e,void 0,Q),e;default:return this._check(t,void 0,Q),l.bufferFrom(t)}},ie.prototype.compare=E.compare,ie.prototype.typeName="bytes",ie.prototype.random=function(){return z.nextBuffer(z.nextInt(32))};function $(t,i){if(c.call(this),!Array.isArray(t))throw new Error(B("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(e){return c.forSchema(e,i)})),this._branchIndices={},this.types.forEach(function(e,n){if(c.isType(e,"union"))throw new Error("unions cannot be directly nested");var a=e.branchName;if(this._branchIndices[a]!==void 0)throw new Error(B("duplicate union branch name: %j",a));this._branchIndices[a]=n},this)}ue.inherits($,c),$.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")},$.prototype._skip=function(t){this.types[t.readLong()]._skip(t)},$.prototype._match=function(t,i){var e=t.readLong(),n=i.readLong();return e===n?this.types[e]._match(t,i):e<n?-1:1},$.prototype._deref=function(t,i){return this.types.map(function(e){return e._attrs(i)})},$.prototype.getTypes=function(){return this.types};function L(t,i){$.call(this,t,i),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(e,n){if(c.isType(e,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:e});else{var a=be(e);if(this._bucketIndices[a]!==void 0)throw new Error(B("ambiguous unwrapped union: %j",this));this._bucketIndices[a]=n}},this),Object.freeze(this)}ue.inherits(L,$),L.prototype._getIndex=function(t){var i=this._bucketIndices[Oe(t)];return this._dynamicBranches&&(i=this._getBranchIndex(t,i)),i},L.prototype._getBranchIndex=function(t,i){var e=this._dynamicBranches,n,a,u;for(n=0,a=e.length;n<a;n++)if(u=e[n],u.type._check(t))if(i===void 0)i=u.index;else throw new Error("ambiguous conversion");return i},L.prototype._check=function(t,i,e,n){var a=this._getIndex(t),u=a!==void 0;return u?this.types[a]._check(t,i,e,n):(e&&e(t,this),u)},L.prototype._read=function(t){var i=t.readLong(),e=this.types[i];if(e)return e._read(t);throw new Error(B("invalid union index: %s",i))},L.prototype._write=function(t,i){var e=this._getIndex(i);e===void 0&&Q(i,this),t.writeLong(e),i!==null&&this.types[e]._write(t,i)},L.prototype._update=function(t,i,e){var n,a,u;for(n=0,a=this.types.length;n<a;n++){try{u=this.types[n].createResolver(i,e)}catch{continue}t._read=function(h){return u._read(h)};return}},L.prototype._copy=function(t,i){var e=i&&i.coerce|0,n=i&&i.wrap|0,a;if(n===2)a=0;else{switch(e){case 1:pe(t)&&this._bucketIndices.buffer!==void 0?a=this._bucketIndices.buffer:a=this._getIndex(t);break;case 2:if(t===null)a=this._bucketIndices.null;else if(typeof t=="object"){var u=Object.keys(t);u.length===1&&(a=this._branchIndices[u[0]],t=t[u[0]])}break;default:a=this._getIndex(t)}a===void 0&&Q(t,this)}var h=this.types[a];if(t===null||n===3)return h._copy(t,i);switch(e){case 3:var o={};return o[h.branchName]=h._copy(t,i),o;default:return h._copy(t,i)}},L.prototype.compare=function(t,i){var e=this._getIndex(t),n=this._getIndex(i);if(e===void 0)Q(t,this);else if(n===void 0)Q(i,this);else return e===n?this.types[e].compare(t,i):l.compare(e,n)},L.prototype.typeName="union:unwrapped",L.prototype.random=function(){var t=z.nextInt(this.types.length);return this.types[t].random()};function R(t,i){$.call(this,t,i),Object.freeze(this)}ue.inherits(R,$),R.prototype._check=function(t,i,e,n){var a=!1;if(t===null)a=this._branchIndices.null!==void 0;else if(typeof t=="object"){var u=Object.keys(t);if(u.length===1){var h=u[0],o=this._branchIndices[h];if(o!==void 0)return e?(n.push(h),a=this.types[o]._check(t[h],i,e,n),n.pop(),a):this.types[o]._check(t[h],i)}}return!a&&e&&e(t,this),a},R.prototype._read=function(t){var i=this.types[t.readLong()];if(!i)throw new Error(B("invalid union index"));var e=i._branchConstructor;return e===null?null:new e(i._read(t))},R.prototype._write=function(t,i){var e,n,a;i===null?(e=this._branchIndices.null,e===void 0&&Q(i,this),t.writeLong(e)):(n=Object.keys(i),n.length===1&&(a=n[0],e=this._branchIndices[a]),e===void 0&&Q(i,this),t.writeLong(e),this.types[e]._write(t,i[a]))},R.prototype._update=function(t,i,e){var n,a,u,h;for(n=0,a=this.types.length;n<a;n++){try{u=this.types[n].createResolver(i,e)}catch{continue}h=this.types[n]._branchConstructor,h?t._read=function(o){return new h(u._read(o))}:t._read=function(){return null};return}},R.prototype._copy=function(t,i){var e=i&&i.wrap|0;if(e===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,i))}if(t===null&&this._branchIndices.null!==void 0)return null;var a,u,h;if(typeof t=="object"){var o=Object.keys(t);if(o.length===1){var _=o[0];if(a=this._branchIndices[_],a===void 0&&i.qualifyNames){var I,G;for(I=0,u=this.types.length;I<u;I++)if(G=this.types[I],G.name&&_===l.unqualify(G.name)){a=I;break}}a!==void 0&&(h=this.types[a]._copy(t[_],i))}}if(e===1&&h===void 0)for(a=0,u=this.types.length;a<u&&h===void 0;)try{h=this.types[a]._copy(t,i)}catch{a++}if(h!==void 0)return e===3?h:new this.types[a]._branchConstructor(h);Q(t,this)},R.prototype.compare=function(t,i){var e=t===null?"null":Object.keys(t)[0],n=i===null?"null":Object.keys(i)[0],a=this._branchIndices[e];return e===n?e==="null"?0:this.types[a].compare(t[e],i[e]):l.compare(a,this._branchIndices[n])},R.prototype.typeName="union:wrapped",R.prototype.random=function(){var t=z.nextInt(this.types.length),i=this.types[t],e=i._branchConstructor;return e?new e(i.random()):null};function Y(t,i){if(c.call(this,t,i),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(B("invalid enum symbols: %j",t.symbols));if(this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(e,n){if(!l.isValidName(e))throw new Error(B("invalid %s symbol: %j",this,e));if(this._indices[e]!==void 0)throw new Error(B("duplicate %s symbol: %j",this,e));this._indices[e]=n},this),this.default=t.default,this.default!==void 0&&this._indices[this.default]===void 0)throw new Error(B("invalid %s default: %j",this,this.default));this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ue.inherits(Y,c),Y.prototype._check=function(t,i,e){var n=this._indices[t]!==void 0;return!n&&e&&e(t,this),n},Y.prototype._read=function(t){var i=t.readLong(),e=this.symbols[i];if(e===void 0)throw new Error(B("invalid %s enum index: %s",this.name,i));return e},Y.prototype._skip=function(t){t.skipLong()},Y.prototype._write=function(t,i){var e=this._indices[i];e===void 0&&Q(i,this),t.writeLong(e)},Y.prototype._match=function(t,i){return t.matchLong(i)},Y.prototype.compare=function(t,i){return l.compare(this._indices[t],this._indices[i])},Y.prototype._update=function(t,i,e){var n=this.symbols;i.typeName==="enum"&&ye(this,i,!e.ignoreNamespaces)&&(i.symbols.every(function(a){return~n.indexOf(a)})||this.default!==void 0)&&(t.symbols=i.symbols.map(function(a){return this._indices[a]===void 0?this.default:a},this),t._read=i._read)},Y.prototype._copy=function(t){return this._check(t,void 0,Q),t},Y.prototype._deref=function(t){t.symbols=this.symbols},Y.prototype.getSymbols=function(){return this.symbols},Y.prototype.typeName="enum",Y.prototype.random=function(){return z.choice(this.symbols)};function te(t,i){if(c.call(this,t,i),t.size!==(t.size|0)||t.size<0)throw new Error(B("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ue.inherits(te,c),te.prototype._check=function(t,i,e){var n=E.isBuffer(t)&&t.length===this.size;return!n&&e&&e(t,this),n},te.prototype._read=function(t){return t.readFixed(this.size)},te.prototype._skip=function(t){t.skipFixed(this.size)},te.prototype._write=function(t,i){(!E.isBuffer(i)||i.length!==this.size)&&Q(i,this),t.writeFixed(i,this.size)},te.prototype._match=function(t,i){return t.matchFixed(i,this.size)},te.prototype.compare=E.compare,te.prototype._update=function(t,i,e){i.typeName==="fixed"&&this.size===i.size&&ye(this,i,!e.ignoreNamespaces)&&(t.size=this.size,t._read=this._read)},te.prototype._copy=ie.prototype._copy,te.prototype._deref=function(t){t.size=this.size},te.prototype.getSize=function(){return this.size},te.prototype.typeName="fixed",te.prototype.random=function(){return z.nextBuffer(this.size)};function v(t,i){if(c.call(this),!t.values)throw new Error(B("missing map values: %j",t));this.valuesType=c.forSchema(t.values,i),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ue.inherits(v,c),v.prototype._check=function(t,i,e,n){if(!t||typeof t!="object"||Array.isArray(t))return e&&e(t,this),!1;var a=Object.keys(t),u=!0,h,o,_,I;if(e){for(_=n.length,n.push(""),h=0,o=a.length;h<o;h++)I=n[_]=a[h],this.valuesType._check(t[I],i,e,n)||(u=!1);n.pop()}else for(h=0,o=a.length;h<o;h++)if(!this.valuesType._check(t[a[h]],i))return!1;return u},v.prototype._read=function(t){for(var i=this.valuesType,e={},n;n=P(t);)for(;n--;){var a=t.readString();e[a]=i._read(t)}return e},v.prototype._skip=function(t){for(var i=this.valuesType,e,n;n=t.readLong();)if(n<0)e=t.readLong(),t.pos+=e;else for(;n--;)t.skipString(),i._skip(t)},v.prototype._write=function(t,i){(!i||typeof i!="object"||Array.isArray(i))&&Q(i,this);var e=this.valuesType,n=Object.keys(i),a=n.length,u,h;if(a)for(t.writeLong(a),u=0;u<a;u++)h=n[u],t.writeString(h),e._write(t,i[h]);t.writeLong(0)},v.prototype._match=function(){throw new Error("maps cannot be compared")},v.prototype._update=function(t,i,e){i.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(i.valuesType,e),t._read=this._read)},v.prototype._copy=function(t,i){if(t&&typeof t=="object"&&!Array.isArray(t)){var e=this.valuesType,n=Object.keys(t),a,u,h,o={};for(a=0,u=n.length;a<u;a++)h=n[a],o[h]=e._copy(t[h],i);return o}Q(t,this)},v.prototype.compare=v.prototype._match,v.prototype.typeName="map",v.prototype.getValuesType=function(){return this.valuesType},v.prototype.random=function(){var t={},i,e;for(i=0,e=z.nextInt(10);i<e;i++)t[z.nextString(z.nextInt(20))]=this.valuesType.random();return t},v.prototype._deref=function(t,i){t.values=this.valuesType._attrs(i)};function O(t,i){if(c.call(this),!t.items)throw new Error(B("missing array items: %j",t));this.itemsType=c.forSchema(t.items,i),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ue.inherits(O,c),O.prototype._check=function(t,i,e,n){if(!Array.isArray(t))return e&&e(t,this),!1;var a=this.itemsType,u=!0,h,o,_;if(e){for(_=n.length,n.push(""),h=0,o=t.length;h<o;h++)n[_]=""+h,a._check(t[h],i,e,n)||(u=!1);n.pop()}else for(h=0,o=t.length;h<o;h++)if(!a._check(t[h],i))return!1;return u},O.prototype._read=function(t){for(var i=this.itemsType,e=0,n,a;a=t.readLong();)for(a<0&&(a=-a,t.skipLong()),n=n||new Array(a);a--;)n[e++]=i._read(t);return n||[]},O.prototype._skip=function(t){for(var i=this.itemsType,e,n;n=t.readLong();)if(n<0)e=t.readLong(),t.pos+=e;else for(;n--;)i._skip(t)},O.prototype._write=function(t,i){Array.isArray(i)||Q(i,this);var e=this.itemsType,n=i.length,a;if(n)for(t.writeLong(n),a=0;a<n;a++)e._write(t,i[a]);t.writeLong(0)},O.prototype._match=function(t,i){for(var e=t.readLong(),n=i.readLong(),a;e&&n;){if(a=this.itemsType._match(t,i),a)return a;--e||(e=P(t)),--n||(n=P(i))}return l.compare(e,n)},O.prototype._update=function(t,i,e){i.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(i.itemsType,e),t._read=this._read)},O.prototype._copy=function(t,i){Array.isArray(t)||Q(t,this);var e=new Array(t.length),n,a;for(n=0,a=t.length;n<a;n++)e[n]=this.itemsType._copy(t[n],i);return e},O.prototype._deref=function(t,i){t.items=this.itemsType._attrs(i)},O.prototype.compare=function(t,i){var e=t.length,n=i.length,a,u,h;for(a=0,u=Math.min(e,n);a<u;a++)if(h=this.itemsType.compare(t[a],i[a]))return h;return l.compare(e,n)},O.prototype.getItemsType=function(){return this.itemsType},O.prototype.typeName="array",O.prototype.random=function(){var t=[],i,e;for(i=0,e=z.nextInt(10);i<e;i++)t.push(this.itemsType.random());return t};function p(t,i){i=i||{};var e=i.namespace;if(t.namespace!==void 0)i.namespace=t.namespace;else if(t.name){var n=l.impliedNamespace(t.name);n!==void 0&&(i.namespace=n)}if(c.call(this,t,i),!Array.isArray(t.fields))throw new Error(B("non-array record fields: %j",t.fields));if(l.hasDuplicates(t.fields,function(a){return a.name}))throw new Error(B("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(a){var u=new M(a,i);return this._fieldsByName[u.name]=u,u},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(i.errorStackTraces,i.omitRecordMethods),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),i.namespace=e,Object.freeze(this)}ue.inherits(p,c),p.prototype._getConstructorName=function(){return this.name?l.capitalize(l.unqualify(this.name)):this._isError?"Error$":"Record$"},p.prototype._createConstructor=function(t,i){var e=[],n=[],a=[],u="",h,o,_,I,G,ee,de;for(h=0,o=this.fields.length;h<o;h++)_=this.fields[h],G=_.defaultValue,ee=G()!==void 0,I=_.name,t&&this._isError&&I==="stack"&&c.isType(_.type,"string")&&!ee&&(de=_),n.push("v"+h),u+="  ",ee?(u+="if (v"+h+" === undefined) { ",u+="this."+I+" = d"+a.length+"(); ",u+="} else { this."+I+" = v"+h+`; }
`,e.push("d"+a.length),a.push(G)):u+="this."+I+" = v"+h+`;
`;de&&(u+="  if (this.stack === undefined) { ",typeof Error.captureStackTrace=="function"?u+="Error.captureStackTrace(this, this.constructor);":u+="this.stack = Error().stack;",u+=` }
`);var _e="return function "+this._getConstructorName()+"(";_e+=n.join()+`) {
`+u+"};";var s=new Function(e.join(),_e).apply(void 0,a);if(i)return s;var x=this;return s.getType=function(){return x},s.type=x,this._isError&&(ue.inherits(s,Error),s.prototype.name=this._getConstructorName()),s.prototype.clone=function(U){return x.clone(this,U)},s.prototype.compare=function(U){return x.compare(this,U)},s.prototype.isValid=function(U){return x.isValid(this,U)},s.prototype.toBuffer=function(){return x.toBuffer(this)},s.prototype.toString=function(){return x.toString(this)},s.prototype.wrap=function(){return x.wrap(this)},s.prototype.wrapped=s.prototype.wrap,s},p.prototype._createChecker=function(){var t=[],i=[],e=this._getConstructorName(),n="return function check"+e+`(v, f, h, p) {
`;if(n+=`  if (
`,n+=`    v === null ||
`,n+=`    typeof v != 'object' ||
`,n+=`    (f && !this._checkFields(v))
`,n+=`  ) {
`,n+=`    if (h) { h(v, this); }
`,n+=`    return false;
`,n+=`  }
`,!this.fields.length)n+=`  return true;
`;else{for(a=0,u=this.fields.length;a<u;a++)h=this.fields[a],t.push("t"+a),i.push(h.type),h.defaultValue()!==void 0&&(n+="  var v"+a+" = v."+h.name+`;
`);n+=`  if (h) {
`,n+=`    var b = 1;
`,n+=`    var j = p.length;
`,n+=`    p.push('');
`;var a,u,h;for(a=0,u=this.fields.length;a<u;a++)h=this.fields[a],n+="    p[j] = '"+h.name+`';
`,n+="    b &= ",h.defaultValue()===void 0?n+="t"+a+"._check(v."+h.name+`, f, h, p);
`:(n+="v"+a+" === undefined || ",n+="t"+a+"._check(v"+a+`, f, h, p);
`);n+=`    p.pop();
`,n+=`    return !!b;
`,n+=`  } else {
    return (
      `,n+=this.fields.map(function(o,_){return o.defaultValue()===void 0?"t"+_+"._check(v."+o.name+", f)":"(v"+_+" === undefined || t"+_+"._check(v"+_+", f))"}).join(` &&
      `),n+=`
    );
  }
`}return n+="};",new Function(t.join(),n).apply(void 0,i)},p.prototype._createReader=function(){var t=[],i=[this.recordConstructor],e,n;for(e=0,n=this.fields.length;e<n;e++)t.push("t"+e),i.push(this.fields[e].type);var a=this._getConstructorName(),u="return function read"+a+`(t) {
`;return u+="  return new "+a+`(
    `,u+=t.map(function(h){return h+"._read(t)"}).join(`,
    `),u+=`
  );
};`,t.unshift(a),new Function(t.join(),u).apply(void 0,i)},p.prototype._createSkipper=function(){var t=[],i="return function skip"+this._getConstructorName()+`(t) {
`,e=[],n,a;for(n=0,a=this.fields.length;n<a;n++)t.push("t"+n),e.push(this.fields[n].type),i+="  t"+n+`._skip(t);
`;return i+="}",new Function(t.join(),i).apply(void 0,e)},p.prototype._createWriter=function(){var t=[],i=this._getConstructorName(),e="return function write"+i+`(t, v) {
`,n=[],a,u,h,o;for(a=0,u=this.fields.length;a<u;a++)h=this.fields[a],t.push("t"+a),n.push(h.type),e+="  ",h.defaultValue()===void 0?e+="t"+a+"._write(t, v."+h.name+`);
`:(o=h.type.toBuffer(h.defaultValue()).toString("binary"),t.push("d"+a),n.push(o),e+="var v"+a+" = v."+h.name+`;
`,e+="if (v"+a+` === undefined) {
`,e+="    t.writeBinary(d"+a+", "+o.length+`);
`,e+=`  } else {
    t`+a+"._write(t, v"+a+`);
  }
`);return e+="}",new Function(t.join(),e).apply(void 0,n)},p.prototype._update=function(t,i,e){if(!ye(this,i,!e.ignoreNamespaces))throw new Error(B("no alias found for %s",i.name));var n=this.fields,a=i.fields,u=l.toMap(a,function(f){return f.name}),h=[],o={},_,I,G,ee,de,_e,s;for(_=0;_<n.length;_++){for(G=n[_],de=ve(G),_e=[],I=0;I<de.length;I++)ee=de[I],u[ee]&&_e.push(ee);if(_e.length>1)throw new Error(B("ambiguous aliasing for %s.%s (%s)",i.name,G.name,_e));if(_e.length)ee=_e[0],s={resolver:G.type.createResolver(u[ee].type,e),name:"_"+G.name},o[ee]?o[ee].push(s):o[ee]=[s],h.push(s.name);else{if(G.defaultValue()===void 0)throw new Error(B("no matching field for default-less %s.%s",i.name,G.name));h.push("undefined")}}var x=-1;for(_=a.length;_&&o[a[--_].name]===void 0;)x=_;var U=this._getConstructorName(),le=[U],w=[this.recordConstructor],V="  return function read"+U+`(t, b) {
`;for(_=0;_<a.length;_++)if(_===x&&(V+=`  if (!b) {
`),G=i.fields[_],ee=G.name,o[ee]===void 0)V+=~x&&_>=x?"    ":"  ",le.push("r"+_),w.push(G.type),V+="r"+_+`._skip(t);
`;else for(I=o[ee].length;I--;)V+=~x&&_>=x?"    ":"  ",le.push("r"+_+"f"+I),s=o[ee][I],w.push(s.resolver),V+="var "+s.name+" = ",V+="r"+_+"f"+I+"._"+(I?"peek":"read")+`(t);
`;~x&&(V+=`  }
`),V+="  return new "+U+"("+h.join()+`);
};`,t._read=new Function(le.join(),V).apply(void 0,w)},p.prototype._match=function(t,i){var e=this.fields,n,a,u,h,o;for(n=0,a=e.length;n<a;n++)if(u=e[n],h=u._order,o=u.type,h){if(h*=o._match(t,i),h)return h}else o._skip(t),o._skip(i);return 0},p.prototype._checkFields=function(t){var i=Object.keys(t),e,n;for(e=0,n=i.length;e<n;e++)if(!this._fieldsByName[i[e]])return!1;return!0},p.prototype._copy=function(t,i){var e=i&&i.fieldHook,n=[void 0],a,u,h,o;for(a=0,u=this.fields.length;a<u;a++)h=this.fields[a],o=t[h.name],o===void 0&&h.hasOwnProperty("defaultValue")&&(o=h.defaultValue()),(i&&!i.skip||o!==void 0)&&(o=h.type._copy(o,i)),e&&(o=e(h,o,this)),n.push(o);var _=this.recordConstructor;return new(_.bind.apply(_,n))},p.prototype._deref=function(t,i){t.fields=this.fields.map(function(e){var n=e.type,a={name:e.name,type:n._attrs(i)};if(i.exportAttrs){var u=e.defaultValue();u!==void 0&&(a.default=n._copy(u,{coerce:3,wrap:3}));var h=e.order;h!=="ascending"&&(a.order=h);var o=e.aliases;o.length&&(a.aliases=o);var _=e.doc;_!==void 0&&(a.doc=_)}return a})},p.prototype.compare=function(t,i){var e=this.fields,n,a,u,h,o,_;for(n=0,a=e.length;n<a;n++)if(u=e[n],h=u.name,o=u._order,_=u.type,o&&(o*=_.compare(t[h],i[h]),o))return o;return 0},p.prototype.random=function(){var t=this.fields.map(function(e){return e.type.random()});t.unshift(void 0);var i=this.recordConstructor;return new(i.bind.apply(i,t))},p.prototype.field=function(t){return this._fieldsByName[t]},p.prototype.getField=p.prototype.field,p.prototype.getFields=function(){return this.fields},p.prototype.getRecordConstructor=function(){return this.recordConstructor},Object.defineProperty(p.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function m(t,i){this._logicalTypeName=t.logicalType,c.call(this),W=this;try{this._underlyingType=c.forSchema(t,i)}finally{W=null;var e=y.length;e&&y[e-1][0]===this&&y.pop()}c.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}ue.inherits(m,c),Object.defineProperty(m.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}}),Object.defineProperty(m.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,i,e;for(t=0,i=y.length;t<i;t++)if(e=y[t],e[0]===this)return e[1]}}),m.prototype.getUnderlyingType=function(){return this.underlyingType},m.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))},m.prototype._write=function(t,i){this.underlyingType._write(t,this._toValue(i))},m.prototype._check=function(t,i,e,n){try{var a=this._toValue(t)}catch{}return a===void 0?(e&&e(t,this),!1):this.underlyingType._check(a,i,e,n)},m.prototype._copy=function(t,i){var e=this.underlyingType;switch(i&&i.coerce){case 3:return e._copy(this._toValue(t),i);case 2:return this._fromValue(e._copy(t,i));default:return this._fromValue(e._copy(this._toValue(t),i))}},m.prototype._update=function(t,i,e){var n=this._resolve(i,e);n&&(t._read=function(a){return n(i._read(a))})},m.prototype.compare=function(t,i){var e=this._toValue(t),n=this._toValue(i);return this.underlyingType.compare(e,n)},m.prototype.random=function(){return this._fromValue(this.underlyingType.random())},m.prototype._deref=function(t,i){var e=this.underlyingType,n=e.name!==void 0&&i.derefed[e.name];return t=e._attrs(i),!n&&i.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t},m.prototype._skip=function(t){this.underlyingType._skip(t)},m.prototype._export=function(){},m.prototype._fromValue=l.abstractFunction,m.prototype._toValue=l.abstractFunction,m.prototype._resolve=l.abstractFunction;function j(t){this._concreteTypeName="long",k.call(this,!0),this._noUnpack=!!t}ue.inherits(j,N),j.prototype.typeName="abstract:long",j.prototype._check=function(t,i,e){var n=this._isValid(t);return!n&&e&&e(t,this),n},j.prototype._read=function(t){var i,e;if(this._noUnpack?(e=t.pos,t.skipLong(),i=t.buf.slice(e,t.pos)):i=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(i)},j.prototype._write=function(t,i){this._isValid(i)||Q(i,this);var e=this._toBuffer(i);this._noUnpack?t.writeFixed(e):t.packLongBytes(e)},j.prototype._copy=function(t,i){switch(i&&i.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}},j.prototype._deref=function(){return"long"},j.prototype._update=function(t,i){var e=this;switch(i.typeName){case"int":t._read=function(n){return e._fromJSON(i._read(n))};break;case"abstract:long":case"long":t._read=function(n){return e._read(n)}}},j.prototype.random=function(){return this._fromJSON(N.prototype.random())},j.prototype._fromBuffer=l.abstractFunction,j.prototype._toBuffer=l.abstractFunction,j.prototype._fromJSON=l.abstractFunction,j.prototype._toJSON=l.abstractFunction,j.prototype._isValid=l.abstractFunction,j.prototype.compare=l.abstractFunction;function M(t,i){var e=t.name;if(typeof e!="string"||!l.isValidName(e))throw new Error(B("invalid field name: %s",e));this.name=e,this.type=c.forSchema(t.type,i),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(o){switch(o){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(B("invalid order: %j",o))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var a=this.type,u;try{u=a._copy(n,{coerce:2,wrap:2})}catch(o){var h=B("incompatible field default %j (%s)",n,o.message);throw c.isType(a,"union")&&(h+=B(", union defaults must match the first branch's type (%j)",a.types[0])),new Error(h)}me(a.typeName)&&a.typeName!=="bytes"?this.defaultValue=function(){return u}:this.defaultValue=function(){return a._copy(u)}}Object.freeze(this)}M.prototype.defaultValue=function(){},Object.defineProperty(M.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}}),M.prototype.getAliases=function(){return this.aliases},M.prototype.getDefault=M.prototype.defaultValue,M.prototype.getName=function(){return this.name},M.prototype.getOrder=function(){return this.order},M.prototype.getType=function(){return this.type};function he(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}he.prototype._peek=c.prototype._peek,he.prototype.inspect=function(){return"<Resolver>"};function F(){this.str=void 0}function C(t,i,e,n){if(e){if(e._readerType!==t)throw new Error("invalid resolver");return e._read(i,n)}else return t._read(i)}function ve(t){var i={};t.name&&(i[t.name]=!0);var e=t.aliases,n,a;for(n=0,a=e.length;n<a;n++)i[e[n]]=!0;return Object.keys(i)}function ye(t,i,e){if(!i.name)return!0;var n=e?i.name:l.unqualify(i.name),a=ve(t),u,h,o;for(u=0,h=a.length;u<h;u++)if(o=a[u],e||(o=l.unqualify(o)),o===n)return!0;return!1}function me(t){var i=A[t];return i&&i.prototype instanceof k}function Z(t){if(t==="error")t="record";else{var i=/^([^:]+):(.*)$/.exec(t);i&&(i[1]==="union"?t=i[2]+"Union":t=i[1])}return l.capitalize(t)+"Type"}function P(t){var i=t.readLong();return i<0&&(i=-i,t.skipLong()),i}function D(t){return t>=-9007199254740990&&t<=9007199254740990}function pe(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function Q(t,i){throw new Error(B("invalid %j: %j",i.schema(),t))}function ge(t,i){var e=l.unqualify(t);return me(e)?e:l.qualify(t,i)}function be(t){var i=t.typeName;switch(i){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return i}}function Oe(t){if(t===null)return"null";var i=typeof t;if(i==="object"){if(Array.isArray(t))return"array";if(E.isBuffer(t))return"buffer"}return i}function ke(t){var i={},e,n,a,u;for(e=0,n=t.length;e<n;e++)if(u=t[e],!c.isType(u,"logical")){if(a=be(u),i[a])return!0;i[a]=!0}return!1}function xe(t){var i=["int","long","float","double"],e=-1,n=null,a,u,h,o;for(a=0,u=t.length;a<u;a++)h=t[a],o=i.indexOf(h.typeName),o>e&&(e=o,n=h);return n}function Ie(t,i){var e={},n,a,u,h;for(n=0,a=t.length;n<a;n++){if(u=t[n],u.typeName==="string")return u;h=u.symbols;var o,_;for(o=0,_=h.length;o<_;o++)e[h[o]]=!0}return c.forSchema({type:"enum",symbols:Object.keys(e)},i)}function Le(t,i){var e=-1,n,a,u;for(n=0,a=t.length;n<a;n++){if(u=t[n],u.typeName==="bytes")return u;e===-1?e=u.size:u.size!==e&&(e=-2)}return e<0?c.forSchema("bytes",i):t[0]}function Pe(t,i){var e=[],n={},a={},u=!0,h,o,_,I;for(h=0,o=t.length;h<o;h++)if(_=t[h],_.typeName==="map")u=!1,e.push(_.valuesType);else{I=_.fields;var G,ee,de,_e,s,x;for(G=0,ee=I.length;G<ee;G++)de=I[G],s=de.name,x=de.type,e.push(x),u&&(n[s]||(n[s]=[]),n[s].push(x),_e=de.defaultValue(),_e!==void 0&&(a[s]=_e))}if(u){var U=Object.keys(n);for(h=0,o=U.length;h<o;h++)s=U[h],n[s].length<t.length&&a[s]===void 0&&(i&&i.strictDefaults?u=!1:(n[s].unshift(c.forSchema("null",i)),a[s]=null))}var le;return u?le={type:"record",fields:U.map(function(w){var V=c.forTypes(n[w],i),f=a[w];if(f!==void 0&&~V.typeName.indexOf("union")){var ce=V.types.slice(),Ee,r;for(Ee=0,r=ce.length;Ee<r&&!ce[Ee].isValid(f);Ee++);if(Ee>0){var ne=ce[0];ce[0]=ce[Ee],ce[Ee]=ne,V=c.forSchema(ce,i)}}return{name:w,type:V,default:a[w]}})}:le={type:"map",values:c.forTypes(e,i)},c.forSchema(le,i)}return at={Type:c,getTypeBucket:be,getValueBucket:Oe,isPrimitive:me,builtins:function(){var t={LogicalType:m,UnwrappedUnionType:L,WrappedUnionType:R},i=Object.keys(A),e,n,a;for(e=0,n=i.length;e<n;e++)a=i[e],t[Z(a)]=A[a];return t}()},at}var ot,Vt;function Yr(){if(Vt)return ot;Vt=1;var l=zt();function q(ue,E){var J;if(typeof ue=="string")try{J=JSON.parse(ue)}catch{J=ue}else J=ue;return l.Type.forSchema(J,E)}return ot={Type:l.Type,parse:q,types:l.builtins,combine:l.Type.forTypes,infer:l.Type.forValue},ot}var st,$t;function Jr(){if($t)return st;$t=1;var l=zt(),q=Ye(),ue=We(),E=Zr(),J=Qe(),g=Ze(),b=ue.Buffer,B=q.Tap,A=l.Type,z=g.debuglog("avsc:services"),S=g.format,W={namespace:"org.apache.avro.ipc"},y=A.forSchema("boolean",W),c=A.forSchema({type:"map",values:"bytes"},W),k=A.forSchema("string",W),K=A.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",c],default:null}]},W),fe=A.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",c],default:null}]},W),ae=16,N=new H("",A.forSchema({name:"PingRequest",type:"record",fields:[]},W),A.forSchema(["string"],W),A.forSchema("null",W));function H(e,n,a,u,h,o){if(this.name=e,!A.isType(n,"record"))throw new Error("invalid request type");if(this.requestType=n,!A.isType(a,"union")||!A.isType(a.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=a,h&&(!A.isType(u,"null")||a.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=u,this.oneWay=!!h,this.doc=o!==void 0?""+o:void 0,Object.freeze(this)}H.forSchema=function(e,n,a){if(a=a||{},!q.isValidName(e))throw new Error(S("invalid message name: %s",e));if(!Array.isArray(n.request))throw new Error(S("invalid message request: %s",e));var u=S("%s.%sRequest",W.namespace,q.capitalize(e)),h=A.forSchema({name:u,type:"record",namespace:a.namespace||"",fields:n.request},a);if(delete a.registry[u],!n.response)throw new Error(S("invalid message response: %s",e));var o=A.forSchema(n.response,a);if(n.errors!==void 0&&!Array.isArray(n.errors))throw new Error(S("invalid message errors: %s",e));var _=A.forSchema(["string"].concat(n.errors||[]),a),I=!!n["one-way"];return new H(e,h,_,o,I,n.doc)},H.prototype.schema=A.prototype.getSchema,H.prototype._attrs=function(e){var n=this.requestType._attrs(e),a={request:n.fields,response:this.responseType._attrs(e)},u=this.doc;u!==void 0&&(a.doc=u);var h=this.errorType._attrs(e);return h.length>1&&(a.errors=h.slice(1)),this.oneWay&&(a["one-way"]=!0),a},q.addDeprecatedGetters(H,["name","errorType","requestType","responseType"]),H.prototype.isOneWay=g.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function X(e,n,a,u,h){if(typeof e!="string")return X.forProtocol(e,n);this.name=e,this._messagesByName=n||{},this.messages=Object.freeze(q.objectValues(this._messagesByName)),this._typesByName=a||{},this.types=Object.freeze(q.objectValues(this._typesByName)),this.protocol=u,this._hashStr=q.getHash(JSON.stringify(u)).toString("binary"),this.doc=u.doc?""+u.doc:void 0,this._server=h||this.createServer({silent:!0}),Object.freeze(this)}X.Client=ie,X.Server=$,X.compatible=function(e,n){try{D(e,n)}catch{return!1}return!0},X.forProtocol=function(e,n){n=n||{};var a=e.protocol;if(!a)throw new Error("missing protocol name");if(e.namespace!==void 0)n.namespace=e.namespace;else{var u=/^(.*)\.[^.]+$/.exec(a);u&&(n.namespace=u[1])}a=q.qualify(a,n.namespace),e.types&&e.types.forEach(function(o){A.forSchema(o,n)});var h;return e.messages&&(h={},Object.keys(e.messages).forEach(function(o){h[o]=H.forSchema(o,e.messages[o],n)})),new X(a,h,n.registry,e)},X.isService=function(e){return!!e&&e.hasOwnProperty("_hashStr")},X.prototype.createClient=function(e){var n=new ie(this,e);return Re.nextTick(function(){if(e&&e.server){var a={objectMode:!0},u=[new J.PassThrough(a),new J.PassThrough(a)];e.server.createChannel({readable:u[0],writable:u[1]},a),n.createChannel({readable:u[1],writable:u[0]},a)}else e&&e.transport&&n.createChannel(e.transport)}),n},X.prototype.createServer=function(e){return new $(this,e)},Object.defineProperty(X.prototype,"hash",{enumerable:!0,get:function(){return q.bufferFrom(this._hashStr,"binary")}}),X.prototype.message=function(e){return this._messagesByName[e]},X.prototype.type=function(e){return this._typesByName[e]},X.prototype.inspect=function(){return S("<Service %j>",this.name)},q.addDeprecatedGetters(X,["message","messages","name","type","types"]),X.prototype.createEmitter=g.deprecate(function(e,n){n=n||{};var a=this.createClient({cache:n.cache,buffering:!1,strictTypes:n.strictErrors,timeout:n.timeout}),u=a.createChannel(e,n);return be(a,u),u},"use `.createClient()` instead of `.createEmitter()`"),X.prototype.createListener=g.deprecate(function(e,n){if(n&&n.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(e,n)},"use `.createServer().createChannel()` instead of `.createListener()`"),X.prototype.emit=g.deprecate(function(e,n,a,u){if(!a||!this.equals(a.client._svc$))throw new Error("invalid emitter");var h=a.client;return ie.prototype.emitMessage.call(h,e,n,u&&u.bind(this)),a.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`"),X.prototype.equals=g.deprecate(function(e){return X.isService(e)&&this.getFingerprint().equals(e.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead"),X.prototype.getFingerprint=g.deprecate(function(e){return q.getHash(JSON.stringify(this.protocol),e)},"use `.hash` instead of `.getFingerprint()`"),X.prototype.getSchema=g.deprecate(A.prototype.getSchema,"use `.protocol` instead of `.getSchema()`"),X.prototype.on=g.deprecate(function(e,n){var a=this;return this._server.onMessage(e,function(u,h){return n.call(a,u,this.channel,h)}),this},"use `.createServer().onMessage()` instead of `.on()`"),X.prototype.subprotocol=g.deprecate(function(){var e=this._server,n={strictTypes:e._strict,cache:e._cache},a=new $(e.service,n);return a._handlers=Object.create(e._handlers),new X(this.name,this._messagesByName,this._typesByName,this.protocol,a)},"`.subprotocol()` will be removed in 5.1"),X.prototype._attrs=function(e){var n={protocol:this.name},a=[];this.types.forEach(function(h){if(h.getName()!==void 0){var o=h._attrs(e);typeof o!="string"&&a.push(o)}}),a.length&&(n.types=a);var u=Object.keys(this._messagesByName);return u.length&&(n.messages={},u.forEach(function(h){n.messages[h]=this._messagesByName[h]._attrs(e)},this)),e&&e.exportAttrs&&this.doc!==void 0&&(n.doc=this.doc),n};function oe(e,n,a){a===void 0&&typeof n=="function"&&(a=n,n=void 0);var u=new X({protocol:"Empty"},W),h;u.createClient({timeout:n&&n.timeout}).createChannel(e,{scope:n&&n.scope,endWritable:typeof e=="function"}).once("handshake",function(o,_){h=_.serverProtocol,this.destroy(!0)}).once("eot",function(o,_){_&&!/interrupted/.test(_)?a(_):a(null,JSON.parse(h))})}function ie(e,n){n=n||{},E.EventEmitter.call(this),this._svc$=e,this._channels$=[],this._fns$=[],this._buffering$=!!n.buffering,this._cache$=n.cache||{},this._policy$=n.channelPolicy,this._strict$=!!n.strictTypes,this._timeout$=q.getOption(n,"timeout",1e4),n.remoteProtocols&&pe(this._cache$,n.remoteProtocols,e,!0),this._svc$.messages.forEach(function(a){this[a.name]=this._createMessageHandler$(a)},this)}g.inherits(ie,E.EventEmitter),ie.prototype.activeChannels=function(){return this._channels$.slice()},ie.prototype.createChannel=function(e,n){var a=n&&n.objectMode,u;if(typeof e=="function"){var h;a?h=e:h=function(de){var _e=new C,s=e(function(x,U){if(x){de(x);return}var le=new F().once("error",function(w){u.destroy(w)});de(null,U.pipe(le))});if(s)return _e.pipe(s),_e},u=new R(this,h,n)}else{var o,_;if(Pe(e)?o=_=e:(o=e.readable,_=e.writable),!a){var I=new ve;o=o.pipe(I);var G=new ye;G.pipe(_),_=G}u=new Y(this,o,_,n),a||(u.once("eot",function(){o.unpipe(I),G.unpipe(_)}),I.once("error",function(de){u.destroy(de)}))}var ee=this._channels$;return ee.push(u),u.once("_drain",function(){ee.splice(ee.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",u),u},ie.prototype.destroyChannels=function(e){this._channels$.forEach(function(n){n.destroy(e&&e.noWait)})},ie.prototype.emitMessage=function(e,n,a,u){var h=t(this._svc$,e),o=new p(h,{},n);this._emitMessage$(o,a,u)},ie.prototype.remoteProtocols=function(){return Q(this._cache$,!0)},Object.defineProperty(ie.prototype,"service",{enumerable:!0,get:function(){return this._svc$}}),ie.prototype.use=function(){var e,n,a;for(e=0,n=arguments.length;e<n;e++)a=arguments[e],this._fns$.push(a.length<3?a(this):a);return this},ie.prototype._emitMessage$=function(e,n,a){!a&&typeof n=="function"&&(a=n,n=void 0);var u=this,h=this._channels$,o=h.length;if(!o){if(this._buffering$)z("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(e,n,a)});else{var _=new Error("no active channels");Re.nextTick(function(){a?a.call(new j(e._msg),_):u.emit("error",_)})}return}n=n||{},n.timeout===void 0&&(n.timeout=this._timeout$);var I;if(o===1)I=h[0];else if(this._policy$){if(I=this._policy$(this._channels$.slice()),!I){z("policy returned no channel, skipping call");return}}else I=h[Math.floor(Math.random()*o)];I._emit(e,n,function(G,ee){var de=this,_e=de.message.errorType;if(G){u._strict$&&(G=_e.clone(G.message,{wrapUnions:!0})),s(G);return}if(!ee){s();return}G=ee.error,u._strict$||(G===void 0?G=null:A.isType(_e,"union:unwrapped")?typeof G=="string"&&(G=new Error(G)):G&&G.string&&typeof G.string=="string"&&(G=new Error(G.string))),s(G,ee.response);function s(x,U){a?a.call(de,x,U):x&&u.emit("error",x)}})},ie.prototype._createMessageHandler$=function(e){var n=e.requestType.getFields(),a=n.map(function(h){return h.getName()}),u="return function "+e.name+"(";return a.length&&(u+=a.join(", ")+", "),u+=`opts, cb) {
`,u+="  var req = {",u+=a.map(function(h){return h+": "+h}).join(", "),u+=`};
`,u+="  return this.emitMessage('"+e.name+`', req, opts, cb);
`,u+="};",new Function(u)()};function $(e,n){n=n||{},E.EventEmitter.call(this),this.service=e,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=n.cache||{},this._defaultHandler=n.defaultHandler,this._sysErrFormatter=n.systemErrorFormatter,this._silent=!!n.silent,this._strict=!!n.strictTypes,n.remoteProtocols&&pe(this._cache,n.remoteProtocols,e,!1),e.messages.forEach(function(a){var u=a.name;n.noCapitalize||(u=q.capitalize(u)),this["on"+u]=this._createMessageHandler(a)},this)}g.inherits($,E.EventEmitter),$.prototype.activeChannels=function(){return q.objectValues(this._channels)},$.prototype.createChannel=function(e,n){var a=n&&n.objectMode,u;if(typeof e=="function"){var h;a?h=e:h=function(_e){var s=new F().once("error",function(x){u.destroy(x)});return e(function(x,U){if(x){_e(x);return}var le=new C;le.pipe(U),_e(null,le)}).pipe(s)},u=new v(this,h,n)}else{var o,_;if(Pe(e)?o=_=e:(o=e.readable,_=e.writable),!a){var I=new ve;o=o.pipe(I);var G=new ye;G.pipe(_),_=G}u=new O(this,o,_,n),a||(u.once("eot",function(){o.unpipe(I),G.unpipe(_)}),I.once("error",function(_e){u.destroy(_e)}))}this.listeners("error").length||this.on("error",this._onError);var ee=this._nextChannelId++,de=this._channels;return de[ee]=u.once("eot",function(){delete de[ee]}),this.emit("channel",u),u},$.prototype.onMessage=function(e,n){return t(this.service,e),this._handlers[e]=n,this},$.prototype.remoteProtocols=function(){return Q(this._cache,!1)},$.prototype.use=function(){var e,n,a;for(e=0,n=arguments.length;e<n;e++)a=arguments[e],this._fns.push(a.length<3?a(this):a);return this},$.prototype._createMessageHandler=function(e){var n=e.name,a=e.requestType.fields,u=a.length,h=a.length?", "+a.map(function(_){return"req."+_.name}).join(", "):"",o=`return function (handler) {
`;return o+="  if (handler.length > "+u+`) {
`,o+="    return this.onMessage('"+n+`', function (req, cb) {
`,o+="      return handler.call(this"+h+`, cb);
`,o+=`    });
`,o+=`  } else {
`,o+="    return this.onMessage('"+n+`', function (req) {
`,o+="      return handler.call(this"+h+`);
`,o+=`    });
`,o+=`  }
`,o+=`};
`,new Function(o)()},$.prototype._onError=function(e){!this._silent&&e.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),e.rpcCode?(console.error(e.rpcCode),console.error(e.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(e)))};function L(e,n){n=n||{},E.EventEmitter.call(this),this.client=e,this.timeout=q.getOption(n,"timeout",e._timeout$),this._endWritable=!!q.getOption(n,"endWritable",!0),this._prefix=Ie(n.scope);var a=e._cache$,u=e._svc$,h=n.serverHash;h||(h=u.hash);var o=a[h];o||(h=u.hash,o=a[h]=new he(u,u,h)),this._adapter=o,this._registry=new M(this,ae),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(_,I){z("client channel EOT"),this.destroyed=!0,this.emit("eot",_,I)})}g.inherits(L,E.EventEmitter),L.prototype.destroy=function(e){z("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var n=this._registry,a=this.pending;e&&n.clear(),e||!a?ge(e)?(z("fatal client channel error: %s",e),this.emit("_eot",a,e)):this.emit("_eot",a):z("client channel entering drain mode (%s pending)",a)},L.prototype.ping=function(e,n){!n&&typeof e=="function"&&(n=e,e=void 0);var a=this,u=new p(N);this._emit(u,{timeout:e},function(h){n?n.call(a,h):h&&a.destroy(h)})},L.prototype._createHandshakeRequest=function(e,n){var a=this.client._svc$;return{clientHash:a.hash,clientProtocol:n?null:JSON.stringify(a.protocol),serverHash:e._hash}},L.prototype._emit=function(e,n,a){var u=e._msg,h=u.oneWay?void 0:new m(u,{}),o=new j(u,this),_=this;this.pending++,Re.nextTick(function(){if(!u.name)I(e,h,G);else{_.emit("outgoingCall",o,n);var de=_.client._fns$;z("starting client middleware chain (%s middleware)",de.length),i({fns:de,ctx:o,wreq:e,wres:h,onTransition:I,onCompletion:G,onError:ee})}});function I(de,_e,s){var x,U;if(_.destroyed)x=new Error("channel destroyed");else try{U=de.toBuffer()}catch{x=xe(S("invalid %j request",u.name),de,[{name:"headers",type:c},{name:"request",type:u.requestType}])}if(x){s(x);return}var le=n&&n.timeout!==void 0?n.timeout:_.timeout,w=_._registry.add(le,function(V,f,ce){if(!V&&!u.oneWay)try{ce._decodeResponse(f,_e,u)}catch(Ee){V=Ee}s(V)});w|=_._prefix,z("sending message %s",w),_._send(w,U,!!u&&u.oneWay)}function G(de){_.pending--,a.call(o,de,h),_.draining&&!_.destroyed&&!_.pending&&_.destroy()}function ee(de){_.client.emit("error",de,_)}},L.prototype._getAdapter=function(e){var n=e.serverHash,a=this.client._cache$,u=a[n];if(u)return u;var h=JSON.parse(e.serverProtocol),o=X.forProtocol(h);return u=new he(this.client._svc$,o,n,!0),a[n]=u},L.prototype._matchesPrefix=function(e){return Le(e,this._prefix)},L.prototype._send=q.abstractFunction,q.addDeprecatedGetters(L,["pending","timeout"]),L.prototype.getCache=g.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`"),L.prototype.getProtocol=g.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`"),L.prototype.isDestroyed=g.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function R(e,n,a){L.call(this,e,a),this._writableFactory=n,(!a||!a.noPing)&&(z("emitting ping request"),this.ping())}g.inherits(R,L),R.prototype._send=function(e,n){var a=this._registry.get(e),u=this._adapter,h=this;return Re.nextTick(o),!0;function o(_){if(!h.destroyed){var I=h._createHandshakeRequest(u,!_),G=h._writableFactory.call(h,function(ee,de){if(ee){a(ee);return}de.on("data",function(_e){z("received response %s",_e.id);var s=b.concat(_e.payload);try{var x=Z(fe,s),U=x.head;U.serverHash&&(u=h._getAdapter(U))}catch(w){a(w);return}var le=U.match;z("handshake match: %s",le),h.emit("handshake",I,U),le==="NONE"?Re.nextTick(function(){o(!0)}):(h._adapter=u,a(null,x.tail,u))})});if(!G){a(new Error("invalid writable stream"));return}G.write({id:e,payload:[K.toBuffer(I),n]}),h._endWritable&&G.end()}}};function Y(e,n,a,u){L.call(this,e,u),this._readable=n,this._writable=a,this._connected=!!(u&&u.noPing),this._readable.on("end",de),this._writable.on("finish",_e);var h=this,o=null;this.once("eot",function(){o&&(clearTimeout(o),o=null),h._connected||h.emit("_ready"),this._writable.removeListener("finish",_e),this._endWritable&&(z("ending transport"),this._writable.end()),this._readable.removeListener("data",G).removeListener("data",ee).removeListener("end",de)});var _;this._connected?this._readable.on("data",ee):(this._readable.on("data",G),Re.nextTick(I),h.timeout&&(o=setTimeout(function(){h.destroy(new Error("timeout"))},h.timeout)));function I(s){if(!h.destroyed){_=h._createHandshakeRequest(h._adapter,!s);var x=[K.toBuffer(_),q.bufferFrom([0,0])];h._writable.write({id:h._prefix,payload:x})}}function G(s){if(!h._matchesPrefix(s.id)){z("discarding unscoped response %s (still connecting)",s.id);return}var x=b.concat(s.payload);try{var U=Z(fe,x).head;U.serverHash&&(h._adapter=h._getAdapter(U))}catch(w){h.destroy(w);return}var le=U.match;z("handshake match: %s",le),h.emit("handshake",_,U),le==="NONE"?Re.nextTick(function(){I(!0)}):(z("successfully connected"),o&&(clearTimeout(o),o=null),h._readable.removeListener("data",G).on("data",ee),h._connected=!0,h.emit("_ready"),_=null)}function ee(s){var x=s.id;if(!h._matchesPrefix(x)){z("discarding unscoped message %s",x);return}var U=h._registry.get(x);U&&Re.nextTick(function(){z("received message %s",x),U(null,b.concat(s.payload),h._adapter)})}function de(){h.destroy(!0)}function _e(){h.destroy()}}g.inherits(Y,L),Y.prototype._emit=function(){if(this._connected||this.draining)L.prototype._emit.apply(this,arguments);else{z("queuing request");var e=[],n,a;for(n=0,a=arguments.length;n<a;n++)e.push(arguments[n]);this.once("_ready",function(){this._emit.apply(this,e)})}},Y.prototype._send=function(e,n,a){if(a){var u=this;Re.nextTick(function(){u._registry.get(e)(null,q.bufferFrom([0,0,0]),u._adapter)})}return this._writable.write({id:e,payload:[n]})};function te(e,n){n=n||{},E.EventEmitter.call(this),this.server=e,this._endWritable=!!q.getOption(n,"endWritable",!0),this._prefix=Ie(n.scope);var a=e._cache,u=e.service,h=u.hash;a[h]||(a[h]=new he(u,u,h)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(o,_){z("server channel EOT"),this.emit("eot",o,_)})}g.inherits(te,E.EventEmitter),te.prototype.destroy=function(e){this.draining||(this.draining=!0,this.emit("_drain")),(e||!this.pending)&&(this.destroyed=!0,ge(e)?(z("fatal server channel error: %s",e),this.emit("_eot",this.pending,e)):this.emit("_eot",this.pending))},te.prototype._createHandshakeResponse=function(e,n){var a=this.server.service,u=a.hash,h=n&&n.serverHash.equals(u);return{match:e?"NONE":h?"BOTH":"CLIENT",serverProtocol:h?null:JSON.stringify(a.protocol),serverHash:h?null:u}},te.prototype._getAdapter=function(e){var n=e.clientHash,a=this.server._cache[n];if(a)return a;if(!e.clientProtocol)throw ke("UNKNOWN_PROTOCOL");var u=JSON.parse(e.clientProtocol),h=X.forProtocol(u);return a=new he(h,this.server.service,n,!0),this.server._cache[n]=a},te.prototype._matchesPrefix=function(e){return Le(e,this._prefix)},te.prototype._receive=function(e,n,a){var u=this,h;try{h=n._decodeRequest(e)}catch(s){a(u._encodeSystemError(ke("INVALID_REQUEST",s)));return}var o=h._msg,_=new m(o,{});if(!o.name){_.response=null,a(_.toBuffer(),!1);return}var I=new j(o,this);u.emit("incomingCall",I);var G=this.server._fns;z("starting server middleware chain (%s middleware)",G.length),u.pending++,i({fns:G,ctx:I,wreq:h,wres:_,onTransition:ee,onCompletion:de,onError:_e});function ee(s,x,U){var le=u.server._handlers[o.name];if(le){var f=!o.oneWay;try{f?le.call(I,s.request,function(ce,Ee){f=!1,x.error=ce,x.response=Ee,U()}):(le.call(I,s.request),U())}catch(ce){f?(f=!1,U(ce)):_e(ce)}}else{var w=u.server._defaultHandler;if(w)w.call(I,s,x,U);else{var V=new Error(S("no handler for %s",o.name));U(ke("NOT_IMPLEMENTED",V))}}}function de(s){u.pending--;var x=u.server,U;if(!s){var le=_.error,w=x._strict;w||(ge(le)?_.error=o.errorType.clone(le.message,{wrapUnions:!0}):le===null&&(le=_.error=void 0),le===void 0&&_.response===void 0&&o.responseType.isValid(null)&&(_.response=null));try{U=_.toBuffer()}catch{_.error!==void 0?s=xe(S("invalid %j error",o.name),_,[{name:"headers",type:c},{name:"error",type:o.errorType}]):s=xe(S("invalid %j response",o.name),_,[{name:"headers",type:c},{name:"response",type:o.responseType}])}}U?le!==void 0&&x.emit("error",ke("APPLICATION_ERROR",le)):U=u._encodeSystemError(s,_.headers),a(U,o.oneWay),u.draining&&!u.pending&&u.destroy()}function _e(s){u.server.emit("error",s,u)}},q.addDeprecatedGetters(te,["pending"]),te.prototype.getCache=g.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`"),te.prototype.getProtocol=g.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`"),te.prototype.isDestroyed=g.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`"),te.prototype._encodeSystemError=function(e,n){var a=this.server;a.emit("error",e,this);var u;a._sysErrFormatter?u=a._sysErrFormatter.call(this,e):e.rpcCode&&(u=e.message);var h;if(n)try{h=c.toBuffer(n)}catch(o){a.emit("error",o,this)}return b.concat([h||q.bufferFrom([0]),q.bufferFrom([1,0]),k.toBuffer(u||"internal server error")])};function v(e,n,a){te.call(this,e,a),this._writable=void 0;var u=this,h;Re.nextTick(function(){h=n.call(u,function(G,ee){Re.nextTick(function(){if(G){I(G);return}u._writable=ee.on("finish",I),u.emit("_writable")})}).on("data",o).on("end",_)});function o(G){var ee=G.id,de=b.concat(G.payload),_e;try{var s=Z(K,de),x=s.head,U=u._getAdapter(x)}catch(V){_e=ke("INVALID_HANDSHAKE_REQUEST",V)}var le=u._createHandshakeResponse(_e,x);u.emit("handshake",x,le),_e?w(u._encodeSystemError(_e)):u._receive(s.tail,U,w);function w(V){if(!u.destroyed){if(!u._writable){u.once("_writable",function(){w(V)});return}u._writable.write({id:ee,payload:[fe.toBuffer(le),V]})}u._writable&&u._endWritable&&u._writable.end()}}function _(){u.destroy()}function I(G){h.removeListener("data",o).removeListener("end",_),u.destroy(G||!0)}}g.inherits(v,te);function O(e,n,a,u){te.call(this,e,u),this._adapter=void 0,this._writable=a.on("finish",G),this._readable=n.on("data",o).on("end",I),this.once("_drain",function(){this._readable.removeListener("data",o).removeListener("data",_).removeListener("end",I)}).once("eot",function(){this._writable.removeListener("finish",G),this._endWritable&&this._writable.end()});var h=this;function o(ee){var de=ee.id;if(!h._matchesPrefix(de))return;var _e=b.concat(ee.payload),s;try{var x=Z(K,_e),U=x.head;h._adapter=h._getAdapter(U)}catch(V){s=ke("INVALID_HANDSHAKE_REQUEST",V)}var le=h._createHandshakeResponse(s,U);h.emit("handshake",U,le),s?w(h._encodeSystemError(s)):(h._readable.removeListener("data",o).on("data",_),h._receive(x.tail,h._adapter,w));function w(V){h.destroyed||h._writable.write({id:de,payload:[fe.toBuffer(le),V]})}}function _(ee){var de=ee.id;if(h._matchesPrefix(de)){var _e=b.concat(ee.payload);h._receive(_e,h._adapter,function(s,x){h.destroyed||x||h._writable.write({id:de,payload:[s]})})}}function I(){h.destroy()}function G(){h.destroy(!0)}}g.inherits(O,te);function p(e,n,a){this._msg=e,this.headers=n||{},this.request=a||{}}p.prototype.toBuffer=function(){var e=this._msg;return b.concat([c.toBuffer(this.headers),k.toBuffer(e.name),e.requestType.toBuffer(this.request)])};function m(e,n,a,u){this._msg=e,this.headers=n,this.error=a,this.response=u}m.prototype.toBuffer=function(){var e=c.toBuffer(this.headers),n=this.error!==void 0;return b.concat([e,y.toBuffer(n),n?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function j(e,n){this.channel=n,this.locals={},this.message=e,Object.freeze(this)}function M(e,n){this._ctx=e,this._mask=-1>>>(n|0),this._id=0,this._n=0,this._cbs={}}M.prototype.get=function(e){return this._cbs[e&this._mask]},M.prototype.add=function(e,n){this._id=this._id+1&this._mask;var a=this,u=this._id,h;return e>0&&(h=setTimeout(function(){o(new Error("timeout"))},e)),this._cbs[u]=o,this._n++,u;function o(){a._cbs[u]&&(delete a._cbs[u],a._n--,h&&clearTimeout(h),n.apply(a._ctx,arguments))}},M.prototype.clear=function(){Object.keys(this._cbs).forEach(function(e){this._cbs[e](new Error("interrupted"))},this)};function he(e,n,a,u){this._clientSvc=e,this._serverSvc=n,this._hash=a,this._isRemote=!!u,this._readers=D(e,n)}he.prototype._decodeRequest=function(e){var n=new B(e),a=c._read(n),u=k._read(n),h,o;if(u?(h=this._serverSvc.message(u),o=this._readers[u+"?"]._read(n)):h=N,!n.isValid())throw new Error(S("truncated %s request",u||"ping$"));return new p(h,a,o)},he.prototype._decodeResponse=function(e,n,a){var u=new B(e);q.copyOwnProperties(c._read(u),n.headers,!0);var h=y._read(u),o=a.name;if(o){var _=this._readers[o+(h?"*":"!")];if(a=this._clientSvc.message(o),h?n.error=_._read(u):n.response=_._read(u),!u.isValid())throw new Error(S("truncated %s response",o))}else a=N};function F(){J.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=q.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}g.inherits(F,J.Transform),F.prototype._transform=function(e,n,a){e=b.concat([this._buf,e]);for(var u;e.length>=4&&e.length>=(u=e.readInt32BE(0))+4;){if(u)this._bufs.push(e.slice(4,u+4));else{var h=this._bufs;this._bufs=[],this.push({id:null,payload:h})}e=e.slice(u+4)}this._buf=e,a()},F.prototype._flush=function(e){if(this._buf.length||this._bufs.length){var n=this._bufs.slice();n.unshift(this._buf);var a=ke("TRAILING_DATA");a.trailingData=b.concat(n).toString(),this.emit("error",a)}e()};function C(){J.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}g.inherits(C,J.Transform),C.prototype._transform=function(e,n,a){var u=e.payload,h,o,_;for(h=0,o=u.length;h<o;h++)_=u[h],this.push(me(_.length)),this.push(_);this.push(me(0)),a()};function ve(){J.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=q.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}g.inherits(ve,J.Transform),ve.prototype._transform=function(e,n,a){for(e=b.concat([this._buf,e]);;){if(this._id===void 0){if(e.length<8){this._buf=e,a();return}this._id=e.readInt32BE(0),this._frameCount=e.readInt32BE(4),e=e.slice(8)}for(var u;this._frameCount&&e.length>=4&&e.length>=(u=e.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(e.slice(4,u+4)),e=e.slice(u+4);if(this._frameCount){this._buf=e,a();return}else{var h={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(h)}}},ve.prototype._flush=F.prototype._flush;function ye(){J.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}g.inherits(ye,J.Transform),ye.prototype._transform=function(e,n,a){var u=e.payload,h=u.length,o;o=q.newBuffer(8),o.writeInt32BE(e.id,0),o.writeInt32BE(h,4),this.push(o);var _;for(_=0;_<h;_++)o=u[_],this.push(me(o.length)),this.push(o);a()};function me(e){var n=q.newBuffer(4);return n.writeInt32BE(e),n}function Z(e,n){var a=new B(n),u=e._read(a);if(!a.isValid())throw new Error(S("truncated %j",e.schema()));return{head:u,tail:a.buf.slice(a.pos)}}function P(e,n){return e.equals(n)?e:e.createResolver(n)}function D(e,n){var a={};return e.messages.forEach(function(u){var h=u.name,o=n.message(h);try{if(!o)throw new Error(S("missing server message: %s",h));if(o.oneWay!==u.oneWay)throw new Error(S("inconsistent one-way message: %s",h));a[h+"?"]=P(o.requestType,u.requestType),a[h+"*"]=P(u.errorType,o.errorType),a[h+"!"]=P(u.responseType,o.responseType)}catch(_){throw ke("INCOMPATIBLE_PROTOCOL",_)}}),a}function pe(e,n,a,u){Object.keys(n).forEach(function(h){var o=n[h],_,I;u?(_=a,I=X.forProtocol(o)):(_=X.forProtocol(o),I=a),e[h]=new he(_,I,h,!0)})}function Q(e,n){var a={};return Object.keys(e).forEach(function(u){var h=e[u];if(h._isRemote){var o=n?h._serverSvc:h._clientSvc;a[u]=o.protocol}}),a}function ge(e){return!!e&&Object.prototype.toString.call(e)==="[object Error]"}function be(e,n){return e.on("error",function(a){n.emit("error",a,e)})}function Oe(e,n){var a=new Error(e);return a.cause=n,a}function ke(e,n){var a=Oe(e.toLowerCase().replace(/_/g," "),n);return a.rpcCode=n&&n.rpcCode?n.rpcCode:e,a}function xe(e,n,a){var u=[],h,o,_;for(h=0,o=a.length;h<o;h++)_=a[h],_.type.isValid(n[_.name],{errorHook:ee});var I=u.map(function(de){return S("%s = %j but expected %s",de.path,de.value,de.type)}).join(", "),G=new Error(S("%s (%s)",e,I));return G.details=u,G;function ee(de,_e,s){var x=[],U,le,w;for(U=0,le=de.length;U<le;U++)w=de[U],isNaN(w)?x.push("."+w):x.push("["+w+"]");u.push({path:_.name+x.join(""),value:_e,type:s})}}function Ie(e){return e?q.getHash(e).readInt16BE(0)<<32-ae:0}function Le(e,n){return(e^n)>>32-ae===0}function Pe(e){return!!(e&&e.pipe)}function t(e,n){var a=e.message(n);if(!a)throw new Error(S("unknown message: %s",n));return a}function i(e){var n=[e.wreq,e.wres],a=[],u;h(0);function h(_){var I=!1;_<e.fns.length?e.fns[_].apply(e.ctx,n.concat(function(G,ee){if(I){e.onError(Oe("duplicate forward middleware call",G));return}if(I=!0,G||e.wres&&(e.wres.error!==void 0||e.wres.response!==void 0)){u=G,o();return}ee&&a.push(ee),h(++_)})):e.onTransition.apply(e.ctx,n.concat(function(G){if(I){e.onError(Oe("duplicate handler call",G));return}I=!0,u=G,Re.nextTick(o)}))}function o(){var _=a.pop();if(_){var I=!1;_.call(e.ctx,u,function(G){if(I){e.onError(Oe("duplicate backward middleware call",G));return}u=G,I=!0,o()})}else e.onCompletion.call(e.ctx,u)}}return st={Adapter:he,HANDSHAKE_REQUEST_TYPE:K,HANDSHAKE_RESPONSE_TYPE:fe,Message:H,Registry:M,Service:X,discoverProtocol:oe,streams:{FrameDecoder:F,FrameEncoder:C,NettyDecoder:ve,NettyEncoder:ye}},st}var ft,Gt;function Kr(){if(Gt)return ft;Gt=1;function l(){return new Error("unsupported in the browser")}function q(){return function(E,J,g){g(l())}}function ue(){return function(){throw l()}}return ft={createImportHook:q,createSyncImportHook:ue,existsSync:function(){return!1},readFileSync:function(){throw l()}},ft}var ut,Wt;function Xr(){if(Wt)return ut;Wt=1;function l(J){if(typeof J!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(J))}function q(J,g){for(var b="",B=0,A=-1,z=0,S,W=0;W<=J.length;++W){if(W<J.length)S=J.charCodeAt(W);else{if(S===47)break;S=47}if(S===47){if(!(A===W-1||z===1))if(A!==W-1&&z===2){if(b.length<2||B!==2||b.charCodeAt(b.length-1)!==46||b.charCodeAt(b.length-2)!==46){if(b.length>2){var y=b.lastIndexOf("/");if(y!==b.length-1){y===-1?(b="",B=0):(b=b.slice(0,y),B=b.length-1-b.lastIndexOf("/")),A=W,z=0;continue}}else if(b.length===2||b.length===1){b="",B=0,A=W,z=0;continue}}g&&(b.length>0?b+="/..":b="..",B=2)}else b.length>0?b+="/"+J.slice(A+1,W):b=J.slice(A+1,W),B=W-A-1;A=W,z=0}else S===46&&z!==-1?++z:z=-1}return b}function ue(J,g){var b=g.dir||g.root,B=g.base||(g.name||"")+(g.ext||"");return b?b===g.root?b+B:b+J+B:B}var E={resolve:function(){for(var g="",b=!1,B,A=arguments.length-1;A>=-1&&!b;A--){var z;A>=0?z=arguments[A]:(B===void 0&&(B=Re.cwd()),z=B),l(z),z.length!==0&&(g=z+"/"+g,b=z.charCodeAt(0)===47)}return g=q(g,!b),b?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(g){if(l(g),g.length===0)return".";var b=g.charCodeAt(0)===47,B=g.charCodeAt(g.length-1)===47;return g=q(g,!b),g.length===0&&!b&&(g="."),g.length>0&&B&&(g+="/"),b?"/"+g:g},isAbsolute:function(g){return l(g),g.length>0&&g.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var g,b=0;b<arguments.length;++b){var B=arguments[b];l(B),B.length>0&&(g===void 0?g=B:g+="/"+B)}return g===void 0?".":E.normalize(g)},relative:function(g,b){if(l(g),l(b),g===b||(g=E.resolve(g),b=E.resolve(b),g===b))return"";for(var B=1;B<g.length&&g.charCodeAt(B)===47;++B);for(var A=g.length,z=A-B,S=1;S<b.length&&b.charCodeAt(S)===47;++S);for(var W=b.length,y=W-S,c=z<y?z:y,k=-1,K=0;K<=c;++K){if(K===c){if(y>c){if(b.charCodeAt(S+K)===47)return b.slice(S+K+1);if(K===0)return b.slice(S+K)}else z>c&&(g.charCodeAt(B+K)===47?k=K:K===0&&(k=0));break}var fe=g.charCodeAt(B+K),ae=b.charCodeAt(S+K);if(fe!==ae)break;fe===47&&(k=K)}var N="";for(K=B+k+1;K<=A;++K)(K===A||g.charCodeAt(K)===47)&&(N.length===0?N+="..":N+="/..");return N.length>0?N+b.slice(S+k):(S+=k,b.charCodeAt(S)===47&&++S,b.slice(S))},_makeLong:function(g){return g},dirname:function(g){if(l(g),g.length===0)return".";for(var b=g.charCodeAt(0),B=b===47,A=-1,z=!0,S=g.length-1;S>=1;--S)if(b=g.charCodeAt(S),b===47){if(!z){A=S;break}}else z=!1;return A===-1?B?"/":".":B&&A===1?"//":g.slice(0,A)},basename:function(g,b){if(b!==void 0&&typeof b!="string")throw new TypeError('"ext" argument must be a string');l(g);var B=0,A=-1,z=!0,S;if(b!==void 0&&b.length>0&&b.length<=g.length){if(b.length===g.length&&b===g)return"";var W=b.length-1,y=-1;for(S=g.length-1;S>=0;--S){var c=g.charCodeAt(S);if(c===47){if(!z){B=S+1;break}}else y===-1&&(z=!1,y=S+1),W>=0&&(c===b.charCodeAt(W)?--W===-1&&(A=S):(W=-1,A=y))}return B===A?A=y:A===-1&&(A=g.length),g.slice(B,A)}else{for(S=g.length-1;S>=0;--S)if(g.charCodeAt(S)===47){if(!z){B=S+1;break}}else A===-1&&(z=!1,A=S+1);return A===-1?"":g.slice(B,A)}},extname:function(g){l(g);for(var b=-1,B=0,A=-1,z=!0,S=0,W=g.length-1;W>=0;--W){var y=g.charCodeAt(W);if(y===47){if(!z){B=W+1;break}continue}A===-1&&(z=!1,A=W+1),y===46?b===-1?b=W:S!==1&&(S=1):b!==-1&&(S=-1)}return b===-1||A===-1||S===0||S===1&&b===A-1&&b===B+1?"":g.slice(b,A)},format:function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return ue("/",g)},parse:function(g){l(g);var b={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return b;var B=g.charCodeAt(0),A=B===47,z;A?(b.root="/",z=1):z=0;for(var S=-1,W=0,y=-1,c=!0,k=g.length-1,K=0;k>=z;--k){if(B=g.charCodeAt(k),B===47){if(!c){W=k+1;break}continue}y===-1&&(c=!1,y=k+1),B===46?S===-1?S=k:K!==1&&(K=1):S!==-1&&(K=-1)}return S===-1||y===-1||K===0||K===1&&S===y-1&&S===W+1?y!==-1&&(W===0&&A?b.base=b.name=g.slice(1,y):b.base=b.name=g.slice(W,y)):(W===0&&A?(b.name=g.slice(1,S),b.base=g.slice(1,y)):(b.name=g.slice(W,S),b.base=g.slice(W,y)),b.ext=g.slice(S,y)),W>0?b.dir=g.slice(0,W-1):A&&(b.dir="/"),b},sep:"/",delimiter:":",win32:null,posix:null};return E.posix=E,ut=E,ut}var ct,Yt;function Qr(){if(Yt)return ct;Yt=1;var l=Kr(),q=Ye(),ue=Xr(),E=Ze(),J=E.format,g={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function b(y,c,k){!k&&typeof c=="function"&&(k=c,c=void 0),c=c||{},c.importHook||(c.importHook=l.createImportHook()),K(y,function(N,H){if(N){k(N);return}if(!H){k(new Error("empty root import"));return}var X=H.types;if(X){var oe=W(H)||"";X.forEach(function(ie){ie.namespace===oe&&delete ie.namespace})}k(null,H)});function K(N,H){c.importHook(N,"idl",function(X,oe){if(X){H(X);return}if(oe===void 0){H();return}try{var ie=new A(oe,c),$=ie._readProtocol(oe,c)}catch(L){L.path=N,H(L);return}fe($.protocol,$.imports,ue.dirname(N),H)})}function fe(N,H,X,oe){var ie=[];$();function $(){var L=H.shift();if(!L){ie.reverse();try{ie.forEach(function(Y){ae(N,Y)})}catch(Y){oe(Y);return}oe(null,N);return}var R=ue.join(X,L.name);L.kind==="idl"?K(R,function(Y,te){if(Y){oe(Y);return}te&&ie.push(te),$()}):c.importHook(R,L.kind,function(Y,te){if(Y){oe(Y);return}switch(L.kind){case"protocol":case"schema":if(te===void 0){$();return}try{var v=JSON.parse(te)}catch(p){p.path=R,oe(p);return}var O=L.kind==="schema"?{types:[v]}:v;ie.push(O),$();return;default:oe(new Error(J("invalid import kind: %s",L.kind)))}})}}function ae(N,H){var X=H.types||[];X.reverse(),X.forEach(function(oe){N.types||(N.types=[]),oe.namespace===void 0&&(oe.namespace=W(H)||""),N.types.unshift(oe)}),Object.keys(H.messages||{}).forEach(function(oe){if(N.messages||(N.messages={}),N.messages[oe])throw new Error(J("duplicate message: %s",oe));N.messages[oe]=H.messages[oe]})}}function B(y){var c;if(typeof y=="string"&&~y.indexOf(ue.sep)&&l.existsSync(y)){var k=l.readFileSync(y,{encoding:"utf8"});try{return JSON.parse(k)}catch{var K={importHook:l.createSyncImportHook()};b(y,K,function(ae,N){c=ae?k:N})}}else c=y;if(typeof c!="string"||c==="null")return c;try{return JSON.parse(c)}catch{try{return A.readProtocol(c)}catch{try{return A.readSchema(c)}catch{return c}}}}function A(y,c){c=c||{},this._tk=new z(y),this._ackVoidMessages=!!c.ackVoidMessages,this._implicitTags=!c.delimitedCollections,this._typeRefs=c.typeRefs||g}A.readProtocol=function(y,c){var k=new A(y,c),K=k._readProtocol();if(K.imports.length)throw new Error("unresolvable import");return K.protocol},A.readSchema=function(y,c){var k=new A(y,c),K=k._readJavadoc(),fe=k._readType(K===void 0?{}:{doc:K},!0);return k._tk.next({id:"(eof)"}),fe},A.prototype._readProtocol=function(){var y=this._tk,c=[],k=[],K={},fe;this._readImports(c);var ae={},N=this._readJavadoc();for(N!==void 0&&(ae.doc=N),this._readAnnotations(ae),y.next({val:"protocol"}),y.next({val:"{",silent:!0})||(ae.protocol=y.next({id:"name"}).val,y.next({val:"{"}));!y.next({val:"}",silent:!0});)if(!this._readImports(c)){var H=this._readJavadoc(),X=this._readType({},!0),oe=this._readImports(c,!0),ie=void 0;if(fe=y.pos,!oe&&(ie=this._readMessage(X))){H!==void 0&&ie.schema.doc===void 0&&(ie.schema.doc=H);var $=!1;if((ie.schema.response==="void"||ie.schema.response.type==="void")&&($=!this._ackVoidMessages&&!ie.schema.errors,ie.schema.response==="void"?ie.schema.response="null":ie.schema.response.type="null"),$&&(ie.schema["one-way"]=!0),K[ie.name])throw new Error(J("duplicate message: %s",ie.name));K[ie.name]=ie.schema}else H&&(typeof X=="string"?X={doc:H,type:X}:X.doc===void 0&&(X.doc=H)),k.push(X),y.pos=fe,y.next({val:";",silent:!0});H=void 0}return y.next({id:"(eof)"}),k.length&&(ae.types=k),Object.keys(K).length&&(ae.messages=K),{protocol:ae,imports:c}},A.prototype._readAnnotations=function(y){for(var c=this._tk;c.next({val:"@",silent:!0});){for(var k=[];!c.next({val:"(",silent:!0});)k.push(c.next().val);y[k.join("")]=c.next({id:"json"}).val,c.next({val:")"})}},A.prototype._readMessage=function(y){var c=this._tk,k={request:[],response:y};this._readAnnotations(k);var K=c.next().val;if(c.next().val==="("){if(!c.next({val:")",silent:!0}))do k.request.push(this._readField());while(!c.next({val:")",silent:!0})&&c.next({val:","}));var fe=c.next();switch(fe.val){case"throws":k.errors=[];do k.errors.push(this._readType());while(!c.next({val:";",silent:!0})&&c.next({val:","}));break;case"oneway":k["one-way"]=!0,c.next({val:";"});break;case";":break;default:throw c.error("invalid message suffix",fe)}return{name:K,schema:k}}},A.prototype._readJavadoc=function(){var y=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(y)return y.val},A.prototype._readField=function(){var y=this._tk,c=this._readJavadoc(),k={type:this._readType()};return c!==void 0&&k.doc===void 0&&(k.doc=c),this._readAnnotations(k),k.name=y.next({id:"name"}).val,y.next({val:"=",silent:!0})&&(k.default=y.next({id:"json"}).val),k},A.prototype._readType=function(y,c){switch(y=y||{},this._readAnnotations(y),y.type=this._tk.next({id:"name"}).val,y.type){case"record":case"error":return this._readRecord(y);case"fixed":return this._readFixed(y);case"enum":return this._readEnum(y,c);case"map":return this._readMap(y);case"array":return this._readArray(y);case"union":if(Object.keys(y).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var k=this._typeRefs[y.type];return k&&(delete y.type,q.copyOwnProperties(k,y)),Object.keys(y).length>1?y:y.type}},A.prototype._readFixed=function(y){var c=this._tk;return c.next({val:"(",silent:!0})||(y.name=c.next({id:"name"}).val,c.next({val:"("})),y.size=parseInt(c.next({id:"number"}).val),c.next({val:")"}),y},A.prototype._readMap=function(y){var c=this._tk,k=this._implicitTags,K=c.next({val:"<",silent:k})===void 0;return y.values=this._readType(),c.next({val:">",silent:K}),y},A.prototype._readArray=function(y){var c=this._tk,k=this._implicitTags,K=c.next({val:"<",silent:k})===void 0;return y.items=this._readType(),c.next({val:">",silent:K}),y},A.prototype._readEnum=function(y,c){var k=this._tk;k.next({val:"{",silent:!0})||(y.name=k.next({id:"name"}).val,k.next({val:"{"})),y.symbols=[];do y.symbols.push(k.next().val);while(!k.next({val:"}",silent:!0})&&k.next({val:","}));return c&&k.next({val:"=",silent:!0})&&(y.default=k.next().val,k.next({val:";"})),y},A.prototype._readUnion=function(){var y=this._tk,c=[];y.next({val:"{"});do c.push(this._readType());while(!y.next({val:"}",silent:!0})&&y.next({val:","}));return c},A.prototype._readRecord=function(y){var c=this._tk;for(c.next({val:"{",silent:!0})||(y.name=c.next({id:"name"}).val,c.next({val:"{"})),y.fields=[];!c.next({val:"}",silent:!0});)y.fields.push(this._readField()),c.next({val:";"});return y},A.prototype._readImports=function(y,c){for(var k=this._tk,K=0,fe=k.pos;k.next({val:"import",silent:!0});){if(!K&&c&&k.next({val:"(",silent:!0})){k.pos=fe;return}var ae=k.next({id:"name"}).val,N=JSON.parse(k.next({id:"string"}).val);k.next({val:";"}),y.push({kind:ae,name:N}),K++}return K};function z(y){this._str=y,this.pos=0}z.prototype.next=function(y){var c={pos:this.pos,id:void 0,val:void 0},k=this._skip(y&&y.emitJavadoc);if(typeof k=="string")c.id="javadoc",c.val=k;else{var K=this.pos,fe=this._str,ae=fe.charAt(K);if(!ae)c.id="(eof)";else if(y&&y.id==="json"?(c.id="json",this.pos=this._endOfJson()):ae==='"'?(c.id="string",this.pos=this._endOfString()):/[0-9]/.test(ae)?(c.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(ae)?(c.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(c.id="operator",this.pos=K+1),c.val=fe.slice(K,this.pos),c.id==="json")try{c.val=JSON.parse(c.val)}catch{throw this.error("invalid JSON",c)}else c.id==="name"&&(c.val=c.val.replace(/`/g,""))}var N;if(y&&y.id&&y.id!==c.id?N=this.error(J("expected ID %s",y.id),c):y&&y.val&&y.val!==c.val&&(N=this.error(J("expected value %s",y.val),c)),N)if(y&&y.silent){this.pos=c.pos;return}else throw N;else return c},z.prototype.error=function(y,c){var k=typeof c!="number",K=k?c.pos:c,fe=this._str,ae=1,N=0,H;for(H=0;H<K;H++)fe.charAt(H)===`
`&&(ae++,N=H);var X=k?J("invalid token %j: %s",c,y):y,oe=new Error(X);return oe.token=k?c:void 0,oe.lineNum=ae,oe.colNum=K-N,oe},z.prototype._skip=function(y){for(var c=this._str,k=!1,K,fe;(fe=c.charAt(this.pos))&&/\s/.test(fe);)this.pos++;if(K=this.pos,fe==="/")switch(c.charAt(this.pos+1)){case"/":for(this.pos+=2;(fe=c.charAt(this.pos))&&fe!==`
`;)this.pos++;return this._skip(y);case"*":for(this.pos+=2,c.charAt(this.pos)==="*"&&(k=!0);fe=c.charAt(this.pos++);)if(fe==="*"&&c.charAt(this.pos)==="/")return this.pos++,k&&y?S(c.slice(K+3,this.pos-2)):this._skip(y);throw this.error("unterminated comment",K)}},z.prototype._endOf=function(y){for(var c=this.pos,k=this._str;y.test(k.charAt(c));)c++;return c},z.prototype._endOfString=function(){for(var y=this.pos+1,c=this._str,k;k=c.charAt(y);){if(k==='"')return y+1;k==="\\"?y+=2:y++}throw this.error("unterminated string",y-1)},z.prototype._endOfJson=function(){var y=q.jsonEnd(this._str,this.pos);if(y<0)throw this.error("invalid JSON",y);return y};function S(y){for(var c=y.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(k,K){return K?k.replace(/^\s*\*\s?/,""):k});c.length&&!c[0];)c.shift();for(;c.length&&!c[c.length-1];)c.pop();return c.join(`
`)}function W(y){if(y.namespace)return y.namespace;var c=/^(.*)\.[^.]+$/.exec(y.protocol);return c?c[1]:void 0}return ct={Tokenizer:z,assembleProtocol:b,read:B,readProtocol:A.readProtocol,readSchema:A.readSchema},ct}var Jt;function en(){return Jt||(Jt=1,function(l){var q=Yr(),ue=Jr(),E=Qr(),J=Ye();function g(b,B){var A=E.read(b);return A.protocol?ue.Service.forProtocol(A,B):q.Type.forSchema(A,B)}l.exports={Service:ue.Service,assembleProtocol:E.assembleProtocol,discoverProtocol:ue.discoverProtocol,parse:g,readProtocol:E.readProtocol,readSchema:E.readSchema},J.copyOwnProperties(q,l.exports)}(nt)),nt.exports}var lt={},ht={},dt={exports:{}},pt={},Kt;function Lr(){if(Kt)return pt;Kt=1;function l(N){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},l(N)}function q(N,H,X){return Object.defineProperty(N,"prototype",{writable:!1}),N}function ue(N,H){if(!(N instanceof H))throw new TypeError("Cannot call a class as a function")}function E(N,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(H&&H.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),H&&J(N,H)}function J(N,H){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,ie){return oe.__proto__=ie,oe},J(N,H)}function g(N){var H=A();return function(){var oe=z(N),ie;if(H){var $=z(this).constructor;ie=Reflect.construct(oe,arguments,$)}else ie=oe.apply(this,arguments);return b(this,ie)}}function b(N,H){if(H&&(l(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(N)}function B(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(N){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},z(N)}var S={},W,y;function c(N,H,X){X||(X=Error);function oe($,L,R){return typeof H=="string"?H:H($,L,R)}var ie=function($){E(R,$);var L=g(R);function R(Y,te,v){var O;return ue(this,R),O=L.call(this,oe(Y,te,v)),O.code=N,O}return q(R)}(X);S[N]=ie}function k(N,H){if(Array.isArray(N)){var X=N.length;return N=N.map(function(oe){return String(oe)}),X>2?"one of ".concat(H," ").concat(N.slice(0,X-1).join(", "),", or ")+N[X-1]:X===2?"one of ".concat(H," ").concat(N[0]," or ").concat(N[1]):"of ".concat(H," ").concat(N[0])}else return"of ".concat(H," ").concat(String(N))}function K(N,H,X){return N.substr(0,H.length)===H}function fe(N,H,X){return(X===void 0||X>N.length)&&(X=N.length),N.substring(X-H.length,X)===H}function ae(N,H,X){return typeof X!="number"&&(X=0),X+H.length>N.length?!1:N.indexOf(H,X)!==-1}return c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",function(N,H,X){W===void 0&&(W=Xe()),W(typeof N=="string","'name' must be a string");var oe;typeof H=="string"&&K(H,"not ")?(oe="must not be",H=H.replace(/^not /,"")):oe="must be";var ie;if(fe(N," argument"))ie="The ".concat(N," ").concat(oe," ").concat(k(H,"type"));else{var $=ae(N,".")?"property":"argument";ie='The "'.concat(N,'" ').concat($," ").concat(oe," ").concat(k(H,"type"))}return ie+=". Received type ".concat(l(X)),ie},TypeError),c("ERR_INVALID_ARG_VALUE",function(N,H){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";y===void 0&&(y=Ze());var oe=y.inspect(H);return oe.length>128&&(oe="".concat(oe.slice(0,128),"...")),"The argument '".concat(N,"' ").concat(X,". Received ").concat(oe)},TypeError),c("ERR_INVALID_RETURN_VALUE",function(N,H,X){var oe;return X&&X.constructor&&X.constructor.name?oe="instance of ".concat(X.constructor.name):oe="type ".concat(l(X)),"Expected ".concat(N,' to be returned from the "').concat(H,'"')+" function but got ".concat(oe,".")},TypeError),c("ERR_MISSING_ARGS",function(){for(var N=arguments.length,H=new Array(N),X=0;X<N;X++)H[X]=arguments[X];W===void 0&&(W=Xe()),W(H.length>0,"At least one arg needs to be specified");var oe="The ",ie=H.length;switch(H=H.map(function($){return'"'.concat($,'"')}),ie){case 1:oe+="".concat(H[0]," argument");break;case 2:oe+="".concat(H[0]," and ").concat(H[1]," arguments");break;default:oe+=H.slice(0,ie-1).join(", "),oe+=", and ".concat(H[ie-1]," arguments");break}return"".concat(oe," must be specified")},TypeError),pt.codes=S,pt}var _t,Xt;function tn(){if(Xt)return _t;Xt=1;function l(F,C){var ve=Object.keys(F);if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(F);C&&(ye=ye.filter(function(me){return Object.getOwnPropertyDescriptor(F,me).enumerable})),ve.push.apply(ve,ye)}return ve}function q(F){for(var C=1;C<arguments.length;C++){var ve=arguments[C]!=null?arguments[C]:{};C%2?l(Object(ve),!0).forEach(function(ye){ue(F,ye,ve[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(ve)):l(Object(ve)).forEach(function(ye){Object.defineProperty(F,ye,Object.getOwnPropertyDescriptor(ve,ye))})}return F}function ue(F,C,ve){return C=b(C),C in F?Object.defineProperty(F,C,{value:ve,enumerable:!0,configurable:!0,writable:!0}):F[C]=ve,F}function E(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")}function J(F,C){for(var ve=0;ve<C.length;ve++){var ye=C[ve];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(F,b(ye.key),ye)}}function g(F,C,ve){return C&&J(F.prototype,C),Object.defineProperty(F,"prototype",{writable:!1}),F}function b(F){var C=B(F,"string");return N(C)==="symbol"?C:String(C)}function B(F,C){if(N(F)!=="object"||F===null)return F;var ve=F[Symbol.toPrimitive];if(ve!==void 0){var ye=ve.call(F,C);if(N(ye)!=="object")return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}function A(F,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(C&&C.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),C&&fe(F,C)}function z(F){var C=k();return function(){var ye=ae(F),me;if(C){var Z=ae(this).constructor;me=Reflect.construct(ye,arguments,Z)}else me=ye.apply(this,arguments);return S(this,me)}}function S(F,C){if(C&&(N(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(F)}function W(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function y(F){var C=typeof Map=="function"?new Map:void 0;return y=function(ye){if(ye===null||!K(ye))return ye;if(typeof ye!="function")throw new TypeError("Super expression must either be null or a function");if(typeof C<"u"){if(C.has(ye))return C.get(ye);C.set(ye,me)}function me(){return c(ye,arguments,ae(this).constructor)}return me.prototype=Object.create(ye.prototype,{constructor:{value:me,enumerable:!1,writable:!0,configurable:!0}}),fe(me,ye)},y(F)}function c(F,C,ve){return k()?c=Reflect.construct.bind():c=function(me,Z,P){var D=[null];D.push.apply(D,Z);var pe=Function.bind.apply(me,D),Q=new pe;return P&&fe(Q,P.prototype),Q},c.apply(null,arguments)}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K(F){return Function.toString.call(F).indexOf("[native code]")!==-1}function fe(F,C){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ye,me){return ye.__proto__=me,ye},fe(F,C)}function ae(F){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ve){return ve.__proto__||Object.getPrototypeOf(ve)},ae(F)}function N(F){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},N(F)}var H=Ze(),X=H.inspect,oe=Lr(),ie=oe.codes.ERR_INVALID_ARG_TYPE;function $(F,C,ve){return(ve===void 0||ve>F.length)&&(ve=F.length),F.substring(ve-C.length,ve)===C}function L(F,C){if(C=Math.floor(C),F.length==0||C==0)return"";var ve=F.length*C;for(C=Math.floor(Math.log(C)/Math.log(2));C;)F+=F,C--;return F+=F.substring(0,ve-F.length),F}var R="",Y="",te="",v="",O={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},p=10;function m(F){var C=Object.keys(F),ve=Object.create(Object.getPrototypeOf(F));return C.forEach(function(ye){ve[ye]=F[ye]}),Object.defineProperty(ve,"message",{value:F.message}),ve}function j(F){return X(F,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function M(F,C,ve){var ye="",me="",Z=0,P="",D=!1,pe=j(F),Q=pe.split(`
`),ge=j(C).split(`
`),be=0,Oe="";if(ve==="strictEqual"&&N(F)==="object"&&N(C)==="object"&&F!==null&&C!==null&&(ve="strictEqualObject"),Q.length===1&&ge.length===1&&Q[0]!==ge[0]){var ke=Q[0].length+ge[0].length;if(ke<=p){if((N(F)!=="object"||F===null)&&(N(C)!=="object"||C===null)&&(F!==0||C!==0))return"".concat(O[ve],`

`)+"".concat(Q[0]," !== ").concat(ge[0],`
`)}else if(ve!=="strictEqualObject"){var xe=Re.stderr&&Re.stderr.isTTY?Re.stderr.columns:80;if(ke<xe){for(;Q[0][be]===ge[0][be];)be++;be>2&&(Oe=`
  `.concat(L(" ",be),"^"),be=0)}}}for(var Ie=Q[Q.length-1],Le=ge[ge.length-1];Ie===Le&&(be++<2?P=`
  `.concat(Ie).concat(P):ye=Ie,Q.pop(),ge.pop(),!(Q.length===0||ge.length===0));)Ie=Q[Q.length-1],Le=ge[ge.length-1];var Pe=Math.max(Q.length,ge.length);if(Pe===0){var t=pe.split(`
`);if(t.length>30)for(t[26]="".concat(R,"...").concat(v);t.length>27;)t.pop();return"".concat(O.notIdentical,`

`).concat(t.join(`
`),`
`)}be>3&&(P=`
`.concat(R,"...").concat(v).concat(P),D=!0),ye!==""&&(P=`
  `.concat(ye).concat(P),ye="");var i=0,e=O[ve]+`
`.concat(Y,"+ actual").concat(v," ").concat(te,"- expected").concat(v),n=" ".concat(R,"...").concat(v," Lines skipped");for(be=0;be<Pe;be++){var a=be-Z;if(Q.length<be+1)a>1&&be>2&&(a>4?(me+=`
`.concat(R,"...").concat(v),D=!0):a>3&&(me+=`
  `.concat(ge[be-2]),i++),me+=`
  `.concat(ge[be-1]),i++),Z=be,ye+=`
`.concat(te,"-").concat(v," ").concat(ge[be]),i++;else if(ge.length<be+1)a>1&&be>2&&(a>4?(me+=`
`.concat(R,"...").concat(v),D=!0):a>3&&(me+=`
  `.concat(Q[be-2]),i++),me+=`
  `.concat(Q[be-1]),i++),Z=be,me+=`
`.concat(Y,"+").concat(v," ").concat(Q[be]),i++;else{var u=ge[be],h=Q[be],o=h!==u&&(!$(h,",")||h.slice(0,-1)!==u);o&&$(u,",")&&u.slice(0,-1)===h&&(o=!1,h+=","),o?(a>1&&be>2&&(a>4?(me+=`
`.concat(R,"...").concat(v),D=!0):a>3&&(me+=`
  `.concat(Q[be-2]),i++),me+=`
  `.concat(Q[be-1]),i++),Z=be,me+=`
`.concat(Y,"+").concat(v," ").concat(h),ye+=`
`.concat(te,"-").concat(v," ").concat(u),i+=2):(me+=ye,ye="",(a===1||be===0)&&(me+=`
  `.concat(h),i++))}if(i>20&&be<Pe-2)return"".concat(e).concat(n,`
`).concat(me,`
`).concat(R,"...").concat(v).concat(ye,`
`)+"".concat(R,"...").concat(v)}return"".concat(e).concat(D?n:"",`
`).concat(me).concat(ye).concat(P).concat(Oe)}var he=function(F,C){A(ye,F);var ve=z(ye);function ye(me){var Z;if(E(this,ye),N(me)!=="object"||me===null)throw new ie("options","Object",me);var P=me.message,D=me.operator,pe=me.stackStartFn,Q=me.actual,ge=me.expected,be=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)Z=ve.call(this,String(P));else if(Re.stderr&&Re.stderr.isTTY&&(Re.stderr&&Re.stderr.getColorDepth&&Re.stderr.getColorDepth()!==1?(R="\x1B[34m",Y="\x1B[32m",v="\x1B[39m",te="\x1B[31m"):(R="",Y="",v="",te="")),N(Q)==="object"&&Q!==null&&N(ge)==="object"&&ge!==null&&"stack"in Q&&Q instanceof Error&&"stack"in ge&&ge instanceof Error&&(Q=m(Q),ge=m(ge)),D==="deepStrictEqual"||D==="strictEqual")Z=ve.call(this,M(Q,ge,D));else if(D==="notDeepStrictEqual"||D==="notStrictEqual"){var Oe=O[D],ke=j(Q).split(`
`);if(D==="notStrictEqual"&&N(Q)==="object"&&Q!==null&&(Oe=O.notStrictEqualObject),ke.length>30)for(ke[26]="".concat(R,"...").concat(v);ke.length>27;)ke.pop();ke.length===1?Z=ve.call(this,"".concat(Oe," ").concat(ke[0])):Z=ve.call(this,"".concat(Oe,`

`).concat(ke.join(`
`),`
`))}else{var xe=j(Q),Ie="",Le=O[D];D==="notDeepEqual"||D==="notEqual"?(xe="".concat(O[D],`

`).concat(xe),xe.length>1024&&(xe="".concat(xe.slice(0,1021),"..."))):(Ie="".concat(j(ge)),xe.length>512&&(xe="".concat(xe.slice(0,509),"...")),Ie.length>512&&(Ie="".concat(Ie.slice(0,509),"...")),D==="deepEqual"||D==="equal"?xe="".concat(Le,`

`).concat(xe,`

should equal

`):Ie=" ".concat(D," ").concat(Ie)),Z=ve.call(this,"".concat(xe).concat(Ie))}return Error.stackTraceLimit=be,Z.generatedMessage=!P,Object.defineProperty(W(Z),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),Z.code="ERR_ASSERTION",Z.actual=Q,Z.expected=ge,Z.operator=D,Error.captureStackTrace&&Error.captureStackTrace(W(Z),pe),Z.stack,Z.name="AssertionError",S(Z)}return g(ye,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:C,value:function(Z,P){return X(this,q(q({},P),{},{customInspect:!1,depth:0}))}}]),ye}(y(Error),X.custom);return _t=he,_t}var vt,Qt;function Pr(){if(Qt)return vt;Qt=1;var l=Object.prototype.toString;return vt=function(ue){var E=l.call(ue),J=E==="[object Arguments]";return J||(J=E!=="[object Array]"&&ue!==null&&typeof ue=="object"&&typeof ue.length=="number"&&ue.length>=0&&l.call(ue.callee)==="[object Function]"),J},vt}var yt,er;function rn(){if(er)return yt;er=1;var l;if(!Object.keys){var q=Object.prototype.hasOwnProperty,ue=Object.prototype.toString,E=Pr(),J=Object.prototype.propertyIsEnumerable,g=!J.call({toString:null},"toString"),b=J.call(function(){},"prototype"),B=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],A=function(y){var c=y.constructor;return c&&c.prototype===y},z={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},S=function(){if(typeof window>"u")return!1;for(var y in window)try{if(!z["$"+y]&&q.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{A(window[y])}catch{return!0}}catch{return!0}return!1}(),W=function(y){if(typeof window>"u"||!S)return A(y);try{return A(y)}catch{return!1}};l=function(c){var k=c!==null&&typeof c=="object",K=ue.call(c)==="[object Function]",fe=E(c),ae=k&&ue.call(c)==="[object String]",N=[];if(!k&&!K&&!fe)throw new TypeError("Object.keys called on a non-object");var H=b&&K;if(ae&&c.length>0&&!q.call(c,0))for(var X=0;X<c.length;++X)N.push(String(X));if(fe&&c.length>0)for(var oe=0;oe<c.length;++oe)N.push(String(oe));else for(var ie in c)!(H&&ie==="prototype")&&q.call(c,ie)&&N.push(String(ie));if(g)for(var $=W(c),L=0;L<B.length;++L)!($&&B[L]==="constructor")&&q.call(c,B[L])&&N.push(B[L]);return N}}return yt=l,yt}var gt,tr;function Br(){if(tr)return gt;tr=1;var l=Array.prototype.slice,q=Pr(),ue=Object.keys,E=ue?function(b){return ue(b)}:rn(),J=Object.keys;return E.shim=function(){if(Object.keys){var b=function(){var B=Object.keys(arguments);return B&&B.length===arguments.length}(1,2);b||(Object.keys=function(A){return q(A)?J(l.call(A)):J(A)})}else Object.keys=E;return Object.keys||E},gt=E,gt}var mt,rr;function nn(){if(rr)return mt;rr=1;var l=Br(),q=Hr()(),ue=Rr(),E=Object,J=ue("Array.prototype.push"),g=ue("Object.prototype.propertyIsEnumerable"),b=q?Object.getOwnPropertySymbols:null;return mt=function(A,z){if(A==null)throw new TypeError("target must be an object");var S=E(A);if(arguments.length===1)return S;for(var W=1;W<arguments.length;++W){var y=E(arguments[W]),c=l(y),k=q&&(Object.getOwnPropertySymbols||b);if(k)for(var K=k(y),fe=0;fe<K.length;++fe){var ae=K[fe];g(y,ae)&&J(c,ae)}for(var N=0;N<c.length;++N){var H=c[N];if(g(y,H)){var X=y[H];S[H]=X}}}return S},mt}var bt,nr;function an(){if(nr)return bt;nr=1;var l=nn(),q=function(){if(!Object.assign)return!1;for(var E="abcdefghijklmnopqrst",J=E.split(""),g={},b=0;b<J.length;++b)g[J[b]]=J[b];var B=Object.assign({},g),A="";for(var z in B)A+=z;return E!==A},ue=function(){if(!Object.assign||!Object.preventExtensions)return!1;var E=Object.preventExtensions({1:2});try{Object.assign(E,"xy")}catch{return E[1]==="y"}return!1};return bt=function(){return!Object.assign||q()||ue()?l:Object.assign},bt}var wt,ir;function Dr(){if(ir)return wt;ir=1;var l=function(q){return q!==q};return wt=function(ue,E){return ue===0&&E===0?1/ue===1/E:!!(ue===E||l(ue)&&l(E))},wt}var Et,ar;function Mt(){if(ar)return Et;ar=1;var l=Dr();return Et=function(){return typeof Object.is=="function"?Object.is:l},Et}var St,or;function et(){if(or)return St;or=1;var l=Br(),q=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ue=Object.prototype.toString,E=Array.prototype.concat,J=Ur(),g=function(z){return typeof z=="function"&&ue.call(z)==="[object Function]"},b=Vr()(),B=function(z,S,W,y){if(S in z){if(y===!0){if(z[S]===W)return}else if(!g(y)||!y())return}b?J(z,S,W,!0):J(z,S,W)},A=function(z,S){var W=arguments.length>2?arguments[2]:{},y=l(S);q&&(y=E.call(y,Object.getOwnPropertySymbols(S)));for(var c=0;c<y.length;c+=1)B(z,y[c],S[y[c]],W[y[c]])};return A.supportsDescriptors=!!b,St=A,St}var kt,sr;function on(){if(sr)return kt;sr=1;var l=Mt(),q=et();return kt=function(){var E=l();return q(Object,{is:E},{is:function(){return Object.is!==E}}),E},kt}var Tt,fr;function sn(){if(fr)return Tt;fr=1;var l=et(),q=Ir(),ue=Dr(),E=Mt(),J=on(),g=q(E(),Object);return l(g,{getPolyfill:E,implementation:ue,shim:J}),Tt=g,Tt}var Ot,ur;function Fr(){return ur||(ur=1,Ot=function(q){return q!==q}),Ot}var xt,cr;function jr(){if(cr)return xt;cr=1;var l=Fr();return xt=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:l},xt}var At,lr;function fn(){if(lr)return At;lr=1;var l=et(),q=jr();return At=function(){var E=q();return l(Number,{isNaN:E},{isNaN:function(){return Number.isNaN!==E}}),E},At}var Nt,hr;function un(){if(hr)return Nt;hr=1;var l=Ir(),q=et(),ue=Fr(),E=jr(),J=fn(),g=l(E(),Number);return q(g,{getPolyfill:E,implementation:ue,shim:J}),Nt=g,Nt}var Rt,dr;function cn(){if(dr)return Rt;dr=1;function l(o,_){return g(o)||J(o,_)||ue(o,_)||q()}function q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(o,_){if(o){if(typeof o=="string")return E(o,_);var I=Object.prototype.toString.call(o).slice(8,-1);if(I==="Object"&&o.constructor&&(I=o.constructor.name),I==="Map"||I==="Set")return Array.from(o);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return E(o,_)}}function E(o,_){(_==null||_>o.length)&&(_=o.length);for(var I=0,G=new Array(_);I<_;I++)G[I]=o[I];return G}function J(o,_){var I=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(I!=null){var G,ee,de,_e,s=[],x=!0,U=!1;try{if(de=(I=I.call(o)).next,_!==0)for(;!(x=(G=de.call(I)).done)&&(s.push(G.value),s.length!==_);x=!0);}catch(le){U=!0,ee=le}finally{try{if(!x&&I.return!=null&&(_e=I.return(),Object(_e)!==_e))return}finally{if(U)throw ee}}return s}}function g(o){if(Array.isArray(o))return o}function b(o){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},b(o)}var B=/a/g.flags!==void 0,A=function(_){var I=[];return _.forEach(function(G){return I.push(G)}),I},z=function(_){var I=[];return _.forEach(function(G,ee){return I.push([ee,G])}),I},S=Object.is?Object.is:sn(),W=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},y=Number.isNaN?Number.isNaN:un();function c(o){return o.call.bind(o)}var k=c(Object.prototype.hasOwnProperty),K=c(Object.prototype.propertyIsEnumerable),fe=c(Object.prototype.toString),ae=Ze().types,N=ae.isAnyArrayBuffer,H=ae.isArrayBufferView,X=ae.isDate,oe=ae.isMap,ie=ae.isRegExp,$=ae.isSet,L=ae.isNativeError,R=ae.isBoxedPrimitive,Y=ae.isNumberObject,te=ae.isStringObject,v=ae.isBooleanObject,O=ae.isBigIntObject,p=ae.isSymbolObject,m=ae.isFloat32Array,j=ae.isFloat64Array;function M(o){if(o.length===0||o.length>10)return!0;for(var _=0;_<o.length;_++){var I=o.charCodeAt(_);if(I<48||I>57)return!0}return o.length===10&&o>=Math.pow(2,32)}function he(o){return Object.keys(o).filter(M).concat(W(o).filter(Object.prototype.propertyIsEnumerable.bind(o)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function F(o,_){if(o===_)return 0;for(var I=o.length,G=_.length,ee=0,de=Math.min(I,G);ee<de;++ee)if(o[ee]!==_[ee]){I=o[ee],G=_[ee];break}return I<G?-1:G<I?1:0}var C=!0,ve=!1,ye=0,me=1,Z=2,P=3;function D(o,_){return B?o.source===_.source&&o.flags===_.flags:RegExp.prototype.toString.call(o)===RegExp.prototype.toString.call(_)}function pe(o,_){if(o.byteLength!==_.byteLength)return!1;for(var I=0;I<o.byteLength;I++)if(o[I]!==_[I])return!1;return!0}function Q(o,_){return o.byteLength!==_.byteLength?!1:F(new Uint8Array(o.buffer,o.byteOffset,o.byteLength),new Uint8Array(_.buffer,_.byteOffset,_.byteLength))===0}function ge(o,_){return o.byteLength===_.byteLength&&F(new Uint8Array(o),new Uint8Array(_))===0}function be(o,_){return Y(o)?Y(_)&&S(Number.prototype.valueOf.call(o),Number.prototype.valueOf.call(_)):te(o)?te(_)&&String.prototype.valueOf.call(o)===String.prototype.valueOf.call(_):v(o)?v(_)&&Boolean.prototype.valueOf.call(o)===Boolean.prototype.valueOf.call(_):O(o)?O(_)&&BigInt.prototype.valueOf.call(o)===BigInt.prototype.valueOf.call(_):p(_)&&Symbol.prototype.valueOf.call(o)===Symbol.prototype.valueOf.call(_)}function Oe(o,_,I,G){if(o===_)return o!==0?!0:I?S(o,_):!0;if(I){if(b(o)!=="object")return typeof o=="number"&&y(o)&&y(_);if(b(_)!=="object"||o===null||_===null||Object.getPrototypeOf(o)!==Object.getPrototypeOf(_))return!1}else{if(o===null||b(o)!=="object")return _===null||b(_)!=="object"?o==_:!1;if(_===null||b(_)!=="object")return!1}var ee=fe(o),de=fe(_);if(ee!==de)return!1;if(Array.isArray(o)){if(o.length!==_.length)return!1;var _e=he(o),s=he(_);return _e.length!==s.length?!1:xe(o,_,I,G,me,_e)}if(ee==="[object Object]"&&(!oe(o)&&oe(_)||!$(o)&&$(_)))return!1;if(X(o)){if(!X(_)||Date.prototype.getTime.call(o)!==Date.prototype.getTime.call(_))return!1}else if(ie(o)){if(!ie(_)||!D(o,_))return!1}else if(L(o)||o instanceof Error){if(o.message!==_.message||o.name!==_.name)return!1}else if(H(o)){if(!I&&(m(o)||j(o))){if(!pe(o,_))return!1}else if(!Q(o,_))return!1;var x=he(o),U=he(_);return x.length!==U.length?!1:xe(o,_,I,G,ye,x)}else{if($(o))return!$(_)||o.size!==_.size?!1:xe(o,_,I,G,Z);if(oe(o))return!oe(_)||o.size!==_.size?!1:xe(o,_,I,G,P);if(N(o)){if(!ge(o,_))return!1}else if(R(o)&&!be(o,_))return!1}return xe(o,_,I,G,ye)}function ke(o,_){return _.filter(function(I){return K(o,I)})}function xe(o,_,I,G,ee,de){if(arguments.length===5){de=Object.keys(o);var _e=Object.keys(_);if(de.length!==_e.length)return!1}for(var s=0;s<de.length;s++)if(!k(_,de[s]))return!1;if(I&&arguments.length===5){var x=W(o);if(x.length!==0){var U=0;for(s=0;s<x.length;s++){var le=x[s];if(K(o,le)){if(!K(_,le))return!1;de.push(le),U++}else if(K(_,le))return!1}var w=W(_);if(x.length!==w.length&&ke(_,w).length!==U)return!1}else{var V=W(_);if(V.length!==0&&ke(_,V).length!==0)return!1}}if(de.length===0&&(ee===ye||ee===me&&o.length===0||o.size===0))return!0;if(G===void 0)G={val1:new Map,val2:new Map,position:0};else{var f=G.val1.get(o);if(f!==void 0){var ce=G.val2.get(_);if(ce!==void 0)return f===ce}G.position++}G.val1.set(o,G.position),G.val2.set(_,G.position);var Ee=a(o,_,I,de,G,ee);return G.val1.delete(o),G.val2.delete(_),Ee}function Ie(o,_,I,G){for(var ee=A(o),de=0;de<ee.length;de++){var _e=ee[de];if(Oe(_,_e,I,G))return o.delete(_e),!0}return!1}function Le(o){switch(b(o)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":o=+o;case"number":if(y(o))return!1}return!0}function Pe(o,_,I){var G=Le(I);return G??(_.has(G)&&!o.has(G))}function t(o,_,I,G,ee){var de=Le(I);if(de!=null)return de;var _e=_.get(de);return _e===void 0&&!_.has(de)||!Oe(G,_e,!1,ee)?!1:!o.has(de)&&Oe(G,_e,!1,ee)}function i(o,_,I,G){for(var ee=null,de=A(o),_e=0;_e<de.length;_e++){var s=de[_e];if(b(s)==="object"&&s!==null)ee===null&&(ee=new Set),ee.add(s);else if(!_.has(s)){if(I||!Pe(o,_,s))return!1;ee===null&&(ee=new Set),ee.add(s)}}if(ee!==null){for(var x=A(_),U=0;U<x.length;U++){var le=x[U];if(b(le)==="object"&&le!==null){if(!Ie(ee,le,I,G))return!1}else if(!I&&!o.has(le)&&!Ie(ee,le,I,G))return!1}return ee.size===0}return!0}function e(o,_,I,G,ee,de){for(var _e=A(o),s=0;s<_e.length;s++){var x=_e[s];if(Oe(I,x,ee,de)&&Oe(G,_.get(x),ee,de))return o.delete(x),!0}return!1}function n(o,_,I,G){for(var ee=null,de=z(o),_e=0;_e<de.length;_e++){var s=l(de[_e],2),x=s[0],U=s[1];if(b(x)==="object"&&x!==null)ee===null&&(ee=new Set),ee.add(x);else{var le=_.get(x);if(le===void 0&&!_.has(x)||!Oe(U,le,I,G)){if(I||!t(o,_,x,U,G))return!1;ee===null&&(ee=new Set),ee.add(x)}}}if(ee!==null){for(var w=z(_),V=0;V<w.length;V++){var f=l(w[V],2),ce=f[0],Ee=f[1];if(b(ce)==="object"&&ce!==null){if(!e(ee,o,ce,Ee,I,G))return!1}else if(!I&&(!o.has(ce)||!Oe(o.get(ce),Ee,!1,G))&&!e(ee,o,ce,Ee,!1,G))return!1}return ee.size===0}return!0}function a(o,_,I,G,ee,de){var _e=0;if(de===Z){if(!i(o,_,I,ee))return!1}else if(de===P){if(!n(o,_,I,ee))return!1}else if(de===me)for(;_e<o.length;_e++)if(k(o,_e)){if(!k(_,_e)||!Oe(o[_e],_[_e],I,ee))return!1}else{if(k(_,_e))return!1;for(var s=Object.keys(o);_e<s.length;_e++){var x=s[_e];if(!k(_,x)||!Oe(o[x],_[x],I,ee))return!1}return s.length===Object.keys(_).length}for(_e=0;_e<G.length;_e++){var U=G[_e];if(!Oe(o[U],_[U],I,ee))return!1}return!0}function u(o,_){return Oe(o,_,ve)}function h(o,_){return Oe(o,_,C)}return Rt={isDeepEqual:u,isDeepStrictEqual:h},Rt}var pr;function Xe(){if(pr)return dt.exports;pr=1;function l(Z){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},l(Z)}function q(Z,P,D){return Object.defineProperty(Z,"prototype",{writable:!1}),Z}function ue(Z,P){if(!(Z instanceof P))throw new TypeError("Cannot call a class as a function")}var E=Lr(),J=E.codes,g=J.ERR_AMBIGUOUS_ARGUMENT,b=J.ERR_INVALID_ARG_TYPE,B=J.ERR_INVALID_ARG_VALUE,A=J.ERR_INVALID_RETURN_VALUE,z=J.ERR_MISSING_ARGS,S=tn(),W=Ze(),y=W.inspect,c=Ze().types,k=c.isPromise,K=c.isRegExp,fe=an()(),ae=Mt()(),N=Rr()("RegExp.prototype.test"),H,X;function oe(){var Z=cn();H=Z.isDeepEqual,X=Z.isDeepStrictEqual}var ie=!1,$=dt.exports=v,L={};function R(Z){throw Z.message instanceof Error?Z.message:new S(Z)}function Y(Z,P,D,pe,Q){var ge=arguments.length,be;if(ge===0)be="Failed";else if(ge===1)D=Z,Z=void 0;else{if(ie===!1){ie=!0;var Oe=Re.emitWarning?Re.emitWarning:console.warn.bind(console);Oe("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}ge===2&&(pe="!=")}if(D instanceof Error)throw D;var ke={actual:Z,expected:P,operator:pe===void 0?"fail":pe,stackStartFn:Q||Y};D!==void 0&&(ke.message=D);var xe=new S(ke);throw be&&(xe.message=be,xe.generatedMessage=!0),xe}$.fail=Y,$.AssertionError=S;function te(Z,P,D,pe){if(!D){var Q=!1;if(P===0)Q=!0,pe="No value argument passed to `assert.ok()`";else if(pe instanceof Error)throw pe;var ge=new S({actual:D,expected:!0,message:pe,operator:"==",stackStartFn:Z});throw ge.generatedMessage=Q,ge}}function v(){for(var Z=arguments.length,P=new Array(Z),D=0;D<Z;D++)P[D]=arguments[D];te.apply(void 0,[v,P.length].concat(P))}$.ok=v,$.equal=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");P!=D&&R({actual:P,expected:D,message:pe,operator:"==",stackStartFn:Z})},$.notEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");P==D&&R({actual:P,expected:D,message:pe,operator:"!=",stackStartFn:Z})},$.deepEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");H===void 0&&oe(),H(P,D)||R({actual:P,expected:D,message:pe,operator:"deepEqual",stackStartFn:Z})},$.notDeepEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");H===void 0&&oe(),H(P,D)&&R({actual:P,expected:D,message:pe,operator:"notDeepEqual",stackStartFn:Z})},$.deepStrictEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");H===void 0&&oe(),X(P,D)||R({actual:P,expected:D,message:pe,operator:"deepStrictEqual",stackStartFn:Z})},$.notDeepStrictEqual=O;function O(Z,P,D){if(arguments.length<2)throw new z("actual","expected");H===void 0&&oe(),X(Z,P)&&R({actual:Z,expected:P,message:D,operator:"notDeepStrictEqual",stackStartFn:O})}$.strictEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");ae(P,D)||R({actual:P,expected:D,message:pe,operator:"strictEqual",stackStartFn:Z})},$.notStrictEqual=function Z(P,D,pe){if(arguments.length<2)throw new z("actual","expected");ae(P,D)&&R({actual:P,expected:D,message:pe,operator:"notStrictEqual",stackStartFn:Z})};var p=q(function Z(P,D,pe){var Q=this;ue(this,Z),D.forEach(function(ge){ge in P&&(pe!==void 0&&typeof pe[ge]=="string"&&K(P[ge])&&N(P[ge],pe[ge])?Q[ge]=pe[ge]:Q[ge]=P[ge])})});function m(Z,P,D,pe,Q,ge){if(!(D in Z)||!X(Z[D],P[D])){if(!pe){var be=new p(Z,Q),Oe=new p(P,Q,Z),ke=new S({actual:be,expected:Oe,operator:"deepStrictEqual",stackStartFn:ge});throw ke.actual=Z,ke.expected=P,ke.operator=ge.name,ke}R({actual:Z,expected:P,message:pe,operator:ge.name,stackStartFn:ge})}}function j(Z,P,D,pe){if(typeof P!="function"){if(K(P))return N(P,Z);if(arguments.length===2)throw new b("expected",["Function","RegExp"],P);if(l(Z)!=="object"||Z===null){var Q=new S({actual:Z,expected:P,message:D,operator:"deepStrictEqual",stackStartFn:pe});throw Q.operator=pe.name,Q}var ge=Object.keys(P);if(P instanceof Error)ge.push("name","message");else if(ge.length===0)throw new B("error",P,"may not be an empty object");return H===void 0&&oe(),ge.forEach(function(be){typeof Z[be]=="string"&&K(P[be])&&N(P[be],Z[be])||m(Z,P,be,D,ge,pe)}),!0}return P.prototype!==void 0&&Z instanceof P?!0:Error.isPrototypeOf(P)?!1:P.call({},Z)===!0}function M(Z){if(typeof Z!="function")throw new b("fn","Function",Z);try{Z()}catch(P){return P}return L}function he(Z){return k(Z)||Z!==null&&l(Z)==="object"&&typeof Z.then=="function"&&typeof Z.catch=="function"}function F(Z){return Promise.resolve().then(function(){var P;if(typeof Z=="function"){if(P=Z(),!he(P))throw new A("instance of Promise","promiseFn",P)}else if(he(Z))P=Z;else throw new b("promiseFn",["Function","Promise"],Z);return Promise.resolve().then(function(){return P}).then(function(){return L}).catch(function(D){return D})})}function C(Z,P,D,pe){if(typeof D=="string"){if(arguments.length===4)throw new b("error",["Object","Error","Function","RegExp"],D);if(l(P)==="object"&&P!==null){if(P.message===D)throw new g("error/message",'The error message "'.concat(P.message,'" is identical to the message.'))}else if(P===D)throw new g("error/message",'The error "'.concat(P,'" is identical to the message.'));pe=D,D=void 0}else if(D!=null&&l(D)!=="object"&&typeof D!="function")throw new b("error",["Object","Error","Function","RegExp"],D);if(P===L){var Q="";D&&D.name&&(Q+=" (".concat(D.name,")")),Q+=pe?": ".concat(pe):".";var ge=Z.name==="rejects"?"rejection":"exception";R({actual:void 0,expected:D,operator:Z.name,message:"Missing expected ".concat(ge).concat(Q),stackStartFn:Z})}if(D&&!j(P,D,pe,Z))throw P}function ve(Z,P,D,pe){if(P!==L){if(typeof D=="string"&&(pe=D,D=void 0),!D||j(P,D)){var Q=pe?": ".concat(pe):".",ge=Z.name==="doesNotReject"?"rejection":"exception";R({actual:P,expected:D,operator:Z.name,message:"Got unwanted ".concat(ge).concat(Q,`
`)+'Actual message: "'.concat(P&&P.message,'"'),stackStartFn:Z})}throw P}}$.throws=function Z(P){for(var D=arguments.length,pe=new Array(D>1?D-1:0),Q=1;Q<D;Q++)pe[Q-1]=arguments[Q];C.apply(void 0,[Z,M(P)].concat(pe))},$.rejects=function Z(P){for(var D=arguments.length,pe=new Array(D>1?D-1:0),Q=1;Q<D;Q++)pe[Q-1]=arguments[Q];return F(P).then(function(ge){return C.apply(void 0,[Z,ge].concat(pe))})},$.doesNotThrow=function Z(P){for(var D=arguments.length,pe=new Array(D>1?D-1:0),Q=1;Q<D;Q++)pe[Q-1]=arguments[Q];ve.apply(void 0,[Z,M(P)].concat(pe))},$.doesNotReject=function Z(P){for(var D=arguments.length,pe=new Array(D>1?D-1:0),Q=1;Q<D;Q++)pe[Q-1]=arguments[Q];return F(P).then(function(ge){return ve.apply(void 0,[Z,ge].concat(pe))})},$.ifError=function Z(P){if(P!=null){var D="ifError got unwanted exception: ";l(P)==="object"&&typeof P.message=="string"?P.message.length===0&&P.constructor?D+=P.constructor.name:D+=P.message:D+=y(P);var pe=new S({actual:P,expected:null,operator:"ifError",message:D,stackStartFn:Z}),Q=P.stack;if(typeof Q=="string"){var ge=Q.split(`
`);ge.shift();for(var be=pe.stack.split(`
`),Oe=0;Oe<ge.length;Oe++){var ke=be.indexOf(ge[Oe]);if(ke!==-1){be=be.slice(0,ke);break}}pe.stack="".concat(be.join(`
`),`
`).concat(ge.join(`
`))}throw pe}};function ye(Z,P,D,pe,Q){if(!K(P))throw new b("regexp","RegExp",P);var ge=Q==="match";if(typeof Z!="string"||N(P,Z)!==ge){if(D instanceof Error)throw D;var be=!D;D=D||(typeof Z!="string"?'The "string" argument must be of type string. Received type '+"".concat(l(Z)," (").concat(y(Z),")"):(ge?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(y(P),`. Input:

`).concat(y(Z),`
`));var Oe=new S({actual:Z,expected:P,message:D,operator:Q,stackStartFn:pe});throw Oe.generatedMessage=be,Oe}}$.match=function Z(P,D,pe){ye(P,D,pe,Z,"match")},$.doesNotMatch=function Z(P,D,pe){ye(P,D,pe,Z,"doesNotMatch")};function me(){for(var Z=arguments.length,P=new Array(Z),D=0;D<Z;D++)P[D]=arguments[D];te.apply(void 0,[me,P.length].concat(P))}return $.strict=fe(me,$,{equal:$.strictEqual,deepEqual:$.deepStrictEqual,notEqual:$.notStrictEqual,notDeepEqual:$.notDeepStrictEqual}),$.strict.strict=$.strict,dt.exports}var It,_r;function ln(){if(_r)return It;_r=1;function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return It=l,It}var He={},Lt={},vr;function tt(){return vr||(vr=1,function(l){var q=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function ue(g,b){return Object.prototype.hasOwnProperty.call(g,b)}l.assign=function(g){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var B=b.shift();if(B){if(typeof B!="object")throw new TypeError(B+"must be non-object");for(var A in B)ue(B,A)&&(g[A]=B[A])}}return g},l.shrinkBuf=function(g,b){return g.length===b?g:g.subarray?g.subarray(0,b):(g.length=b,g)};var E={arraySet:function(g,b,B,A,z){if(b.subarray&&g.subarray){g.set(b.subarray(B,B+A),z);return}for(var S=0;S<A;S++)g[z+S]=b[B+S]},flattenChunks:function(g){var b,B,A,z,S,W;for(A=0,b=0,B=g.length;b<B;b++)A+=g[b].length;for(W=new Uint8Array(A),z=0,b=0,B=g.length;b<B;b++)S=g[b],W.set(S,z),z+=S.length;return W}},J={arraySet:function(g,b,B,A,z){for(var S=0;S<A;S++)g[z+S]=b[B+S]},flattenChunks:function(g){return[].concat.apply([],g)}};l.setTyped=function(g){g?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,E)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,J))},l.setTyped(q)}(Lt)),Lt}var Ge={},yr;function hn(){if(yr)return Ge;yr=1;var l=tt(),q=4,ue=0,E=1,J=2;function g(s){for(var x=s.length;--x>=0;)s[x]=0}var b=0,B=1,A=2,z=3,S=258,W=29,y=256,c=y+1+W,k=30,K=19,fe=2*c+1,ae=15,N=16,H=7,X=256,oe=16,ie=17,$=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=512,O=new Array((c+2)*2);g(O);var p=new Array(k*2);g(p);var m=new Array(v);g(m);var j=new Array(S-z+1);g(j);var M=new Array(W);g(M);var he=new Array(k);g(he);function F(s,x,U,le,w){this.static_tree=s,this.extra_bits=x,this.extra_base=U,this.elems=le,this.max_length=w,this.has_stree=s&&s.length}var C,ve,ye;function me(s,x){this.dyn_tree=s,this.max_code=0,this.stat_desc=x}function Z(s){return s<256?m[s]:m[256+(s>>>7)]}function P(s,x){s.pending_buf[s.pending++]=x&255,s.pending_buf[s.pending++]=x>>>8&255}function D(s,x,U){s.bi_valid>N-U?(s.bi_buf|=x<<s.bi_valid&65535,P(s,s.bi_buf),s.bi_buf=x>>N-s.bi_valid,s.bi_valid+=U-N):(s.bi_buf|=x<<s.bi_valid&65535,s.bi_valid+=U)}function pe(s,x,U){D(s,U[x*2],U[x*2+1])}function Q(s,x){var U=0;do U|=s&1,s>>>=1,U<<=1;while(--x>0);return U>>>1}function ge(s){s.bi_valid===16?(P(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)}function be(s,x){var U=x.dyn_tree,le=x.max_code,w=x.stat_desc.static_tree,V=x.stat_desc.has_stree,f=x.stat_desc.extra_bits,ce=x.stat_desc.extra_base,Ee=x.stat_desc.max_length,r,ne,se,d,T,re,Te=0;for(d=0;d<=ae;d++)s.bl_count[d]=0;for(U[s.heap[s.heap_max]*2+1]=0,r=s.heap_max+1;r<fe;r++)ne=s.heap[r],d=U[U[ne*2+1]*2+1]+1,d>Ee&&(d=Ee,Te++),U[ne*2+1]=d,!(ne>le)&&(s.bl_count[d]++,T=0,ne>=ce&&(T=f[ne-ce]),re=U[ne*2],s.opt_len+=re*(d+T),V&&(s.static_len+=re*(w[ne*2+1]+T)));if(Te!==0){do{for(d=Ee-1;s.bl_count[d]===0;)d--;s.bl_count[d]--,s.bl_count[d+1]+=2,s.bl_count[Ee]--,Te-=2}while(Te>0);for(d=Ee;d!==0;d--)for(ne=s.bl_count[d];ne!==0;)se=s.heap[--r],!(se>le)&&(U[se*2+1]!==d&&(s.opt_len+=(d-U[se*2+1])*U[se*2],U[se*2+1]=d),ne--)}}function Oe(s,x,U){var le=new Array(ae+1),w=0,V,f;for(V=1;V<=ae;V++)le[V]=w=w+U[V-1]<<1;for(f=0;f<=x;f++){var ce=s[f*2+1];ce!==0&&(s[f*2]=Q(le[ce]++,ce))}}function ke(){var s,x,U,le,w,V=new Array(ae+1);for(U=0,le=0;le<W-1;le++)for(M[le]=U,s=0;s<1<<L[le];s++)j[U++]=le;for(j[U-1]=le,w=0,le=0;le<16;le++)for(he[le]=w,s=0;s<1<<R[le];s++)m[w++]=le;for(w>>=7;le<k;le++)for(he[le]=w<<7,s=0;s<1<<R[le]-7;s++)m[256+w++]=le;for(x=0;x<=ae;x++)V[x]=0;for(s=0;s<=143;)O[s*2+1]=8,s++,V[8]++;for(;s<=255;)O[s*2+1]=9,s++,V[9]++;for(;s<=279;)O[s*2+1]=7,s++,V[7]++;for(;s<=287;)O[s*2+1]=8,s++,V[8]++;for(Oe(O,c+1,V),s=0;s<k;s++)p[s*2+1]=5,p[s*2]=Q(s,5);C=new F(O,L,y+1,c,ae),ve=new F(p,R,0,k,ae),ye=new F(new Array(0),Y,0,K,H)}function xe(s){var x;for(x=0;x<c;x++)s.dyn_ltree[x*2]=0;for(x=0;x<k;x++)s.dyn_dtree[x*2]=0;for(x=0;x<K;x++)s.bl_tree[x*2]=0;s.dyn_ltree[X*2]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function Ie(s){s.bi_valid>8?P(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function Le(s,x,U,le){Ie(s),P(s,U),P(s,~U),l.arraySet(s.pending_buf,s.window,x,U,s.pending),s.pending+=U}function Pe(s,x,U,le){var w=x*2,V=U*2;return s[w]<s[V]||s[w]===s[V]&&le[x]<=le[U]}function t(s,x,U){for(var le=s.heap[U],w=U<<1;w<=s.heap_len&&(w<s.heap_len&&Pe(x,s.heap[w+1],s.heap[w],s.depth)&&w++,!Pe(x,le,s.heap[w],s.depth));)s.heap[U]=s.heap[w],U=w,w<<=1;s.heap[U]=le}function i(s,x,U){var le,w,V=0,f,ce;if(s.last_lit!==0)do le=s.pending_buf[s.d_buf+V*2]<<8|s.pending_buf[s.d_buf+V*2+1],w=s.pending_buf[s.l_buf+V],V++,le===0?pe(s,w,x):(f=j[w],pe(s,f+y+1,x),ce=L[f],ce!==0&&(w-=M[f],D(s,w,ce)),le--,f=Z(le),pe(s,f,U),ce=R[f],ce!==0&&(le-=he[f],D(s,le,ce)));while(V<s.last_lit);pe(s,X,x)}function e(s,x){var U=x.dyn_tree,le=x.stat_desc.static_tree,w=x.stat_desc.has_stree,V=x.stat_desc.elems,f,ce,Ee=-1,r;for(s.heap_len=0,s.heap_max=fe,f=0;f<V;f++)U[f*2]!==0?(s.heap[++s.heap_len]=Ee=f,s.depth[f]=0):U[f*2+1]=0;for(;s.heap_len<2;)r=s.heap[++s.heap_len]=Ee<2?++Ee:0,U[r*2]=1,s.depth[r]=0,s.opt_len--,w&&(s.static_len-=le[r*2+1]);for(x.max_code=Ee,f=s.heap_len>>1;f>=1;f--)t(s,U,f);r=V;do f=s.heap[1],s.heap[1]=s.heap[s.heap_len--],t(s,U,1),ce=s.heap[1],s.heap[--s.heap_max]=f,s.heap[--s.heap_max]=ce,U[r*2]=U[f*2]+U[ce*2],s.depth[r]=(s.depth[f]>=s.depth[ce]?s.depth[f]:s.depth[ce])+1,U[f*2+1]=U[ce*2+1]=r,s.heap[1]=r++,t(s,U,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],be(s,x),Oe(U,Ee,s.bl_count)}function n(s,x,U){var le,w=-1,V,f=x[0*2+1],ce=0,Ee=7,r=4;for(f===0&&(Ee=138,r=3),x[(U+1)*2+1]=65535,le=0;le<=U;le++)V=f,f=x[(le+1)*2+1],!(++ce<Ee&&V===f)&&(ce<r?s.bl_tree[V*2]+=ce:V!==0?(V!==w&&s.bl_tree[V*2]++,s.bl_tree[oe*2]++):ce<=10?s.bl_tree[ie*2]++:s.bl_tree[$*2]++,ce=0,w=V,f===0?(Ee=138,r=3):V===f?(Ee=6,r=3):(Ee=7,r=4))}function a(s,x,U){var le,w=-1,V,f=x[0*2+1],ce=0,Ee=7,r=4;for(f===0&&(Ee=138,r=3),le=0;le<=U;le++)if(V=f,f=x[(le+1)*2+1],!(++ce<Ee&&V===f)){if(ce<r)do pe(s,V,s.bl_tree);while(--ce!==0);else V!==0?(V!==w&&(pe(s,V,s.bl_tree),ce--),pe(s,oe,s.bl_tree),D(s,ce-3,2)):ce<=10?(pe(s,ie,s.bl_tree),D(s,ce-3,3)):(pe(s,$,s.bl_tree),D(s,ce-11,7));ce=0,w=V,f===0?(Ee=138,r=3):V===f?(Ee=6,r=3):(Ee=7,r=4)}}function u(s){var x;for(n(s,s.dyn_ltree,s.l_desc.max_code),n(s,s.dyn_dtree,s.d_desc.max_code),e(s,s.bl_desc),x=K-1;x>=3&&s.bl_tree[te[x]*2+1]===0;x--);return s.opt_len+=3*(x+1)+5+5+4,x}function h(s,x,U,le){var w;for(D(s,x-257,5),D(s,U-1,5),D(s,le-4,4),w=0;w<le;w++)D(s,s.bl_tree[te[w]*2+1],3);a(s,s.dyn_ltree,x-1),a(s,s.dyn_dtree,U-1)}function o(s){var x=4093624447,U;for(U=0;U<=31;U++,x>>>=1)if(x&1&&s.dyn_ltree[U*2]!==0)return ue;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return E;for(U=32;U<y;U++)if(s.dyn_ltree[U*2]!==0)return E;return ue}var _=!1;function I(s){_||(ke(),_=!0),s.l_desc=new me(s.dyn_ltree,C),s.d_desc=new me(s.dyn_dtree,ve),s.bl_desc=new me(s.bl_tree,ye),s.bi_buf=0,s.bi_valid=0,xe(s)}function G(s,x,U,le){D(s,(b<<1)+(le?1:0),3),Le(s,x,U)}function ee(s){D(s,B<<1,3),pe(s,X,O),ge(s)}function de(s,x,U,le){var w,V,f=0;s.level>0?(s.strm.data_type===J&&(s.strm.data_type=o(s)),e(s,s.l_desc),e(s,s.d_desc),f=u(s),w=s.opt_len+3+7>>>3,V=s.static_len+3+7>>>3,V<=w&&(w=V)):w=V=U+5,U+4<=w&&x!==-1?G(s,x,U,le):s.strategy===q||V===w?(D(s,(B<<1)+(le?1:0),3),i(s,O,p)):(D(s,(A<<1)+(le?1:0),3),h(s,s.l_desc.max_code+1,s.d_desc.max_code+1,f+1),i(s,s.dyn_ltree,s.dyn_dtree)),xe(s),le&&Ie(s)}function _e(s,x,U){return s.pending_buf[s.d_buf+s.last_lit*2]=x>>>8&255,s.pending_buf[s.d_buf+s.last_lit*2+1]=x&255,s.pending_buf[s.l_buf+s.last_lit]=U&255,s.last_lit++,x===0?s.dyn_ltree[U*2]++:(s.matches++,x--,s.dyn_ltree[(j[U]+y+1)*2]++,s.dyn_dtree[Z(x)*2]++),s.last_lit===s.lit_bufsize-1}return Ge._tr_init=I,Ge._tr_stored_block=G,Ge._tr_flush_block=de,Ge._tr_tally=_e,Ge._tr_align=ee,Ge}var Pt,gr;function Cr(){if(gr)return Pt;gr=1;function l(q,ue,E,J){for(var g=q&65535|0,b=q>>>16&65535|0,B=0;E!==0;){B=E>2e3?2e3:E,E-=B;do g=g+ue[J++]|0,b=b+g|0;while(--B);g%=65521,b%=65521}return g|b<<16|0}return Pt=l,Pt}var Bt,mr;function qr(){if(mr)return Bt;mr=1;function l(){for(var E,J=[],g=0;g<256;g++){E=g;for(var b=0;b<8;b++)E=E&1?3988292384^E>>>1:E>>>1;J[g]=E}return J}var q=l();function ue(E,J,g,b){var B=q,A=b+g;E^=-1;for(var z=b;z<A;z++)E=E>>>8^B[(E^J[z])&255];return E^-1}return Bt=ue,Bt}var Dt,br;function dn(){return br||(br=1,Dt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Dt}var wr;function pn(){if(wr)return He;wr=1;var l=tt(),q=hn(),ue=Cr(),E=qr(),J=dn(),g=0,b=1,B=3,A=4,z=5,S=0,W=1,y=-2,c=-3,k=-5,K=-1,fe=1,ae=2,N=3,H=4,X=0,oe=2,ie=8,$=9,L=15,R=8,Y=29,te=256,v=te+1+Y,O=30,p=19,m=2*v+1,j=15,M=3,he=258,F=he+M+1,C=32,ve=42,ye=69,me=73,Z=91,P=103,D=113,pe=666,Q=1,ge=2,be=3,Oe=4,ke=3;function xe(r,ne){return r.msg=J[ne],ne}function Ie(r){return(r<<1)-(r>4?9:0)}function Le(r){for(var ne=r.length;--ne>=0;)r[ne]=0}function Pe(r){var ne=r.state,se=ne.pending;se>r.avail_out&&(se=r.avail_out),se!==0&&(l.arraySet(r.output,ne.pending_buf,ne.pending_out,se,r.next_out),r.next_out+=se,ne.pending_out+=se,r.total_out+=se,r.avail_out-=se,ne.pending-=se,ne.pending===0&&(ne.pending_out=0))}function t(r,ne){q._tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,ne),r.block_start=r.strstart,Pe(r.strm)}function i(r,ne){r.pending_buf[r.pending++]=ne}function e(r,ne){r.pending_buf[r.pending++]=ne>>>8&255,r.pending_buf[r.pending++]=ne&255}function n(r,ne,se,d){var T=r.avail_in;return T>d&&(T=d),T===0?0:(r.avail_in-=T,l.arraySet(ne,r.input,r.next_in,T,se),r.state.wrap===1?r.adler=ue(r.adler,ne,T,se):r.state.wrap===2&&(r.adler=E(r.adler,ne,T,se)),r.next_in+=T,r.total_in+=T,T)}function a(r,ne){var se=r.max_chain_length,d=r.strstart,T,re,Te=r.prev_length,we=r.nice_match,Se=r.strstart>r.w_size-F?r.strstart-(r.w_size-F):0,Ae=r.window,Ve=r.w_mask,Be=r.prev,Ne=r.strstart+he,Fe=Ae[d+Te-1],Ce=Ae[d+Te];r.prev_length>=r.good_match&&(se>>=2),we>r.lookahead&&(we=r.lookahead);do if(T=ne,!(Ae[T+Te]!==Ce||Ae[T+Te-1]!==Fe||Ae[T]!==Ae[d]||Ae[++T]!==Ae[d+1])){d+=2,T++;do;while(Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&Ae[++d]===Ae[++T]&&d<Ne);if(re=he-(Ne-d),d=Ne-he,re>Te){if(r.match_start=ne,Te=re,re>=we)break;Fe=Ae[d+Te-1],Ce=Ae[d+Te]}}while((ne=Be[ne&Ve])>Se&&--se!==0);return Te<=r.lookahead?Te:r.lookahead}function u(r){var ne=r.w_size,se,d,T,re,Te;do{if(re=r.window_size-r.lookahead-r.strstart,r.strstart>=ne+(ne-F)){l.arraySet(r.window,r.window,ne,ne,0),r.match_start-=ne,r.strstart-=ne,r.block_start-=ne,d=r.hash_size,se=d;do T=r.head[--se],r.head[se]=T>=ne?T-ne:0;while(--d);d=ne,se=d;do T=r.prev[--se],r.prev[se]=T>=ne?T-ne:0;while(--d);re+=ne}if(r.strm.avail_in===0)break;if(d=n(r.strm,r.window,r.strstart+r.lookahead,re),r.lookahead+=d,r.lookahead+r.insert>=M)for(Te=r.strstart-r.insert,r.ins_h=r.window[Te],r.ins_h=(r.ins_h<<r.hash_shift^r.window[Te+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[Te+M-1])&r.hash_mask,r.prev[Te&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=Te,Te++,r.insert--,!(r.lookahead+r.insert<M)););}while(r.lookahead<F&&r.strm.avail_in!==0)}function h(r,ne){var se=65535;for(se>r.pending_buf_size-5&&(se=r.pending_buf_size-5);;){if(r.lookahead<=1){if(u(r),r.lookahead===0&&ne===g)return Q;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var d=r.block_start+se;if((r.strstart===0||r.strstart>=d)&&(r.lookahead=r.strstart-d,r.strstart=d,t(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-F&&(t(r,!1),r.strm.avail_out===0))return Q}return r.insert=0,ne===A?(t(r,!0),r.strm.avail_out===0?be:Oe):(r.strstart>r.block_start&&(t(r,!1),r.strm.avail_out===0),Q)}function o(r,ne){for(var se,d;;){if(r.lookahead<F){if(u(r),r.lookahead<F&&ne===g)return Q;if(r.lookahead===0)break}if(se=0,r.lookahead>=M&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,se=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),se!==0&&r.strstart-se<=r.w_size-F&&(r.match_length=a(r,se)),r.match_length>=M)if(d=q._tr_tally(r,r.strstart-r.match_start,r.match_length-M),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=M){r.match_length--;do r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,se=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else d=q._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(d&&(t(r,!1),r.strm.avail_out===0))return Q}return r.insert=r.strstart<M-1?r.strstart:M-1,ne===A?(t(r,!0),r.strm.avail_out===0?be:Oe):r.last_lit&&(t(r,!1),r.strm.avail_out===0)?Q:ge}function _(r,ne){for(var se,d,T;;){if(r.lookahead<F){if(u(r),r.lookahead<F&&ne===g)return Q;if(r.lookahead===0)break}if(se=0,r.lookahead>=M&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,se=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=M-1,se!==0&&r.prev_length<r.max_lazy_match&&r.strstart-se<=r.w_size-F&&(r.match_length=a(r,se),r.match_length<=5&&(r.strategy===fe||r.match_length===M&&r.strstart-r.match_start>4096)&&(r.match_length=M-1)),r.prev_length>=M&&r.match_length<=r.prev_length){T=r.strstart+r.lookahead-M,d=q._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-M),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=T&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,se=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=M-1,r.strstart++,d&&(t(r,!1),r.strm.avail_out===0))return Q}else if(r.match_available){if(d=q._tr_tally(r,0,r.window[r.strstart-1]),d&&t(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return Q}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(d=q._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<M-1?r.strstart:M-1,ne===A?(t(r,!0),r.strm.avail_out===0?be:Oe):r.last_lit&&(t(r,!1),r.strm.avail_out===0)?Q:ge}function I(r,ne){for(var se,d,T,re,Te=r.window;;){if(r.lookahead<=he){if(u(r),r.lookahead<=he&&ne===g)return Q;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=M&&r.strstart>0&&(T=r.strstart-1,d=Te[T],d===Te[++T]&&d===Te[++T]&&d===Te[++T])){re=r.strstart+he;do;while(d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&d===Te[++T]&&T<re);r.match_length=he-(re-T),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=M?(se=q._tr_tally(r,1,r.match_length-M),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(se=q._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),se&&(t(r,!1),r.strm.avail_out===0))return Q}return r.insert=0,ne===A?(t(r,!0),r.strm.avail_out===0?be:Oe):r.last_lit&&(t(r,!1),r.strm.avail_out===0)?Q:ge}function G(r,ne){for(var se;;){if(r.lookahead===0&&(u(r),r.lookahead===0)){if(ne===g)return Q;break}if(r.match_length=0,se=q._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,se&&(t(r,!1),r.strm.avail_out===0))return Q}return r.insert=0,ne===A?(t(r,!0),r.strm.avail_out===0?be:Oe):r.last_lit&&(t(r,!1),r.strm.avail_out===0)?Q:ge}function ee(r,ne,se,d,T){this.good_length=r,this.max_lazy=ne,this.nice_length=se,this.max_chain=d,this.func=T}var de;de=[new ee(0,0,0,0,h),new ee(4,4,8,4,o),new ee(4,5,16,8,o),new ee(4,6,32,32,o),new ee(4,4,16,16,_),new ee(8,16,32,32,_),new ee(8,16,128,128,_),new ee(8,32,128,256,_),new ee(32,128,258,1024,_),new ee(32,258,258,4096,_)];function _e(r){r.window_size=2*r.w_size,Le(r.head),r.max_lazy_match=de[r.level].max_lazy,r.good_match=de[r.level].good_length,r.nice_match=de[r.level].nice_length,r.max_chain_length=de[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=M-1,r.match_available=0,r.ins_h=0}function s(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ie,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(m*2),this.dyn_dtree=new l.Buf16((2*O+1)*2),this.bl_tree=new l.Buf16((2*p+1)*2),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(j+1),this.heap=new l.Buf16(2*v+1),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*v+1),Le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(r){var ne;return!r||!r.state?xe(r,y):(r.total_in=r.total_out=0,r.data_type=oe,ne=r.state,ne.pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?ve:D,r.adler=ne.wrap===2?0:1,ne.last_flush=g,q._tr_init(ne),S)}function U(r){var ne=x(r);return ne===S&&_e(r.state),ne}function le(r,ne){return!r||!r.state||r.state.wrap!==2?y:(r.state.gzhead=ne,S)}function w(r,ne,se,d,T,re){if(!r)return y;var Te=1;if(ne===K&&(ne=6),d<0?(Te=0,d=-d):d>15&&(Te=2,d-=16),T<1||T>$||se!==ie||d<8||d>15||ne<0||ne>9||re<0||re>H)return xe(r,y);d===8&&(d=9);var we=new s;return r.state=we,we.strm=r,we.wrap=Te,we.gzhead=null,we.w_bits=d,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=T+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+M-1)/M),we.window=new l.Buf8(we.w_size*2),we.head=new l.Buf16(we.hash_size),we.prev=new l.Buf16(we.w_size),we.lit_bufsize=1<<T+6,we.pending_buf_size=we.lit_bufsize*4,we.pending_buf=new l.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=ne,we.strategy=re,we.method=se,U(r)}function V(r,ne){return w(r,ne,ie,L,R,X)}function f(r,ne){var se,d,T,re;if(!r||!r.state||ne>z||ne<0)return r?xe(r,y):y;if(d=r.state,!r.output||!r.input&&r.avail_in!==0||d.status===pe&&ne!==A)return xe(r,r.avail_out===0?k:y);if(d.strm=r,se=d.last_flush,d.last_flush=ne,d.status===ve)if(d.wrap===2)r.adler=0,i(d,31),i(d,139),i(d,8),d.gzhead?(i(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),i(d,d.gzhead.time&255),i(d,d.gzhead.time>>8&255),i(d,d.gzhead.time>>16&255),i(d,d.gzhead.time>>24&255),i(d,d.level===9?2:d.strategy>=ae||d.level<2?4:0),i(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(i(d,d.gzhead.extra.length&255),i(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(r.adler=E(r.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=ye):(i(d,0),i(d,0),i(d,0),i(d,0),i(d,0),i(d,d.level===9?2:d.strategy>=ae||d.level<2?4:0),i(d,ke),d.status=D);else{var Te=ie+(d.w_bits-8<<4)<<8,we=-1;d.strategy>=ae||d.level<2?we=0:d.level<6?we=1:d.level===6?we=2:we=3,Te|=we<<6,d.strstart!==0&&(Te|=C),Te+=31-Te%31,d.status=D,e(d,Te),d.strstart!==0&&(e(d,r.adler>>>16),e(d,r.adler&65535)),r.adler=1}if(d.status===ye)if(d.gzhead.extra){for(T=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),Pe(r),T=d.pending,d.pending===d.pending_buf_size));)i(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=me)}else d.status=me;if(d.status===me)if(d.gzhead.name){T=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),Pe(r),T=d.pending,d.pending===d.pending_buf_size)){re=1;break}d.gzindex<d.gzhead.name.length?re=d.gzhead.name.charCodeAt(d.gzindex++)&255:re=0,i(d,re)}while(re!==0);d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),re===0&&(d.gzindex=0,d.status=Z)}else d.status=Z;if(d.status===Z)if(d.gzhead.comment){T=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),Pe(r),T=d.pending,d.pending===d.pending_buf_size)){re=1;break}d.gzindex<d.gzhead.comment.length?re=d.gzhead.comment.charCodeAt(d.gzindex++)&255:re=0,i(d,re)}while(re!==0);d.gzhead.hcrc&&d.pending>T&&(r.adler=E(r.adler,d.pending_buf,d.pending-T,T)),re===0&&(d.status=P)}else d.status=P;if(d.status===P&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Pe(r),d.pending+2<=d.pending_buf_size&&(i(d,r.adler&255),i(d,r.adler>>8&255),r.adler=0,d.status=D)):d.status=D),d.pending!==0){if(Pe(r),r.avail_out===0)return d.last_flush=-1,S}else if(r.avail_in===0&&Ie(ne)<=Ie(se)&&ne!==A)return xe(r,k);if(d.status===pe&&r.avail_in!==0)return xe(r,k);if(r.avail_in!==0||d.lookahead!==0||ne!==g&&d.status!==pe){var Se=d.strategy===ae?G(d,ne):d.strategy===N?I(d,ne):de[d.level].func(d,ne);if((Se===be||Se===Oe)&&(d.status=pe),Se===Q||Se===be)return r.avail_out===0&&(d.last_flush=-1),S;if(Se===ge&&(ne===b?q._tr_align(d):ne!==z&&(q._tr_stored_block(d,0,0,!1),ne===B&&(Le(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),Pe(r),r.avail_out===0))return d.last_flush=-1,S}return ne!==A?S:d.wrap<=0?W:(d.wrap===2?(i(d,r.adler&255),i(d,r.adler>>8&255),i(d,r.adler>>16&255),i(d,r.adler>>24&255),i(d,r.total_in&255),i(d,r.total_in>>8&255),i(d,r.total_in>>16&255),i(d,r.total_in>>24&255)):(e(d,r.adler>>>16),e(d,r.adler&65535)),Pe(r),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?S:W)}function ce(r){var ne;return!r||!r.state?y:(ne=r.state.status,ne!==ve&&ne!==ye&&ne!==me&&ne!==Z&&ne!==P&&ne!==D&&ne!==pe?xe(r,y):(r.state=null,ne===D?xe(r,c):S))}function Ee(r,ne){var se=ne.length,d,T,re,Te,we,Se,Ae,Ve;if(!r||!r.state||(d=r.state,Te=d.wrap,Te===2||Te===1&&d.status!==ve||d.lookahead))return y;for(Te===1&&(r.adler=ue(r.adler,ne,se,0)),d.wrap=0,se>=d.w_size&&(Te===0&&(Le(d.head),d.strstart=0,d.block_start=0,d.insert=0),Ve=new l.Buf8(d.w_size),l.arraySet(Ve,ne,se-d.w_size,d.w_size,0),ne=Ve,se=d.w_size),we=r.avail_in,Se=r.next_in,Ae=r.input,r.avail_in=se,r.next_in=0,r.input=ne,u(d);d.lookahead>=M;){T=d.strstart,re=d.lookahead-(M-1);do d.ins_h=(d.ins_h<<d.hash_shift^d.window[T+M-1])&d.hash_mask,d.prev[T&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=T,T++;while(--re);d.strstart=T,d.lookahead=M-1,u(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=M-1,d.match_available=0,r.next_in=Se,r.input=Ae,r.avail_in=we,d.wrap=Te,S}return He.deflateInit=V,He.deflateInit2=w,He.deflateReset=U,He.deflateResetKeep=x,He.deflateSetHeader=le,He.deflate=f,He.deflateEnd=ce,He.deflateSetDictionary=Ee,He.deflateInfo="pako deflate (from Nodeca project)",He}var Me={},Ft,Er;function _n(){if(Er)return Ft;Er=1;var l=30,q=12;return Ft=function(E,J){var g,b,B,A,z,S,W,y,c,k,K,fe,ae,N,H,X,oe,ie,$,L,R,Y,te,v,O;g=E.state,b=E.next_in,v=E.input,B=b+(E.avail_in-5),A=E.next_out,O=E.output,z=A-(J-E.avail_out),S=A+(E.avail_out-257),W=g.dmax,y=g.wsize,c=g.whave,k=g.wnext,K=g.window,fe=g.hold,ae=g.bits,N=g.lencode,H=g.distcode,X=(1<<g.lenbits)-1,oe=(1<<g.distbits)-1;e:do{ae<15&&(fe+=v[b++]<<ae,ae+=8,fe+=v[b++]<<ae,ae+=8),ie=N[fe&X];t:for(;;){if($=ie>>>24,fe>>>=$,ae-=$,$=ie>>>16&255,$===0)O[A++]=ie&65535;else if($&16){L=ie&65535,$&=15,$&&(ae<$&&(fe+=v[b++]<<ae,ae+=8),L+=fe&(1<<$)-1,fe>>>=$,ae-=$),ae<15&&(fe+=v[b++]<<ae,ae+=8,fe+=v[b++]<<ae,ae+=8),ie=H[fe&oe];r:for(;;){if($=ie>>>24,fe>>>=$,ae-=$,$=ie>>>16&255,$&16){if(R=ie&65535,$&=15,ae<$&&(fe+=v[b++]<<ae,ae+=8,ae<$&&(fe+=v[b++]<<ae,ae+=8)),R+=fe&(1<<$)-1,R>W){E.msg="invalid distance too far back",g.mode=l;break e}if(fe>>>=$,ae-=$,$=A-z,R>$){if($=R-$,$>c&&g.sane){E.msg="invalid distance too far back",g.mode=l;break e}if(Y=0,te=K,k===0){if(Y+=y-$,$<L){L-=$;do O[A++]=K[Y++];while(--$);Y=A-R,te=O}}else if(k<$){if(Y+=y+k-$,$-=k,$<L){L-=$;do O[A++]=K[Y++];while(--$);if(Y=0,k<L){$=k,L-=$;do O[A++]=K[Y++];while(--$);Y=A-R,te=O}}}else if(Y+=k-$,$<L){L-=$;do O[A++]=K[Y++];while(--$);Y=A-R,te=O}for(;L>2;)O[A++]=te[Y++],O[A++]=te[Y++],O[A++]=te[Y++],L-=3;L&&(O[A++]=te[Y++],L>1&&(O[A++]=te[Y++]))}else{Y=A-R;do O[A++]=O[Y++],O[A++]=O[Y++],O[A++]=O[Y++],L-=3;while(L>2);L&&(O[A++]=O[Y++],L>1&&(O[A++]=O[Y++]))}}else if(($&64)===0){ie=H[(ie&65535)+(fe&(1<<$)-1)];continue r}else{E.msg="invalid distance code",g.mode=l;break e}break}}else if(($&64)===0){ie=N[(ie&65535)+(fe&(1<<$)-1)];continue t}else if($&32){g.mode=q;break e}else{E.msg="invalid literal/length code",g.mode=l;break e}break}}while(b<B&&A<S);L=ae>>3,b-=L,ae-=L<<3,fe&=(1<<ae)-1,E.next_in=b,E.next_out=A,E.avail_in=b<B?5+(B-b):5-(b-B),E.avail_out=A<S?257+(S-A):257-(A-S),g.hold=fe,g.bits=ae},Ft}var jt,Sr;function vn(){if(Sr)return jt;Sr=1;var l=tt(),q=15,ue=852,E=592,J=0,g=1,b=2,B=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],A=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return jt=function(y,c,k,K,fe,ae,N,H){var X=H.bits,oe=0,ie=0,$=0,L=0,R=0,Y=0,te=0,v=0,O=0,p=0,m,j,M,he,F,C=null,ve=0,ye,me=new l.Buf16(q+1),Z=new l.Buf16(q+1),P=null,D=0,pe,Q,ge;for(oe=0;oe<=q;oe++)me[oe]=0;for(ie=0;ie<K;ie++)me[c[k+ie]]++;for(R=X,L=q;L>=1&&me[L]===0;L--);if(R>L&&(R=L),L===0)return fe[ae++]=1<<24|64<<16|0,fe[ae++]=1<<24|64<<16|0,H.bits=1,0;for($=1;$<L&&me[$]===0;$++);for(R<$&&(R=$),v=1,oe=1;oe<=q;oe++)if(v<<=1,v-=me[oe],v<0)return-1;if(v>0&&(y===J||L!==1))return-1;for(Z[1]=0,oe=1;oe<q;oe++)Z[oe+1]=Z[oe]+me[oe];for(ie=0;ie<K;ie++)c[k+ie]!==0&&(N[Z[c[k+ie]]++]=ie);if(y===J?(C=P=N,ye=19):y===g?(C=B,ve-=257,P=A,D-=257,ye=256):(C=z,P=S,ye=-1),p=0,ie=0,oe=$,F=ae,Y=R,te=0,M=-1,O=1<<R,he=O-1,y===g&&O>ue||y===b&&O>E)return 1;for(;;){pe=oe-te,N[ie]<ye?(Q=0,ge=N[ie]):N[ie]>ye?(Q=P[D+N[ie]],ge=C[ve+N[ie]]):(Q=96,ge=0),m=1<<oe-te,j=1<<Y,$=j;do j-=m,fe[F+(p>>te)+j]=pe<<24|Q<<16|ge|0;while(j!==0);for(m=1<<oe-1;p&m;)m>>=1;if(m!==0?(p&=m-1,p+=m):p=0,ie++,--me[oe]===0){if(oe===L)break;oe=c[k+N[ie]]}if(oe>R&&(p&he)!==M){for(te===0&&(te=R),F+=$,Y=oe-te,v=1<<Y;Y+te<L&&(v-=me[Y+te],!(v<=0));)Y++,v<<=1;if(O+=1<<Y,y===g&&O>ue||y===b&&O>E)return 1;M=p&he,fe[M]=R<<24|Y<<16|F-ae|0}}return p!==0&&(fe[F+p]=oe-te<<24|64<<16|0),H.bits=R,0},jt}var kr;function yn(){if(kr)return Me;kr=1;var l=tt(),q=Cr(),ue=qr(),E=_n(),J=vn(),g=0,b=1,B=2,A=4,z=5,S=6,W=0,y=1,c=2,k=-2,K=-3,fe=-4,ae=-5,N=8,H=1,X=2,oe=3,ie=4,$=5,L=6,R=7,Y=8,te=9,v=10,O=11,p=12,m=13,j=14,M=15,he=16,F=17,C=18,ve=19,ye=20,me=21,Z=22,P=23,D=24,pe=25,Q=26,ge=27,be=28,Oe=29,ke=30,xe=31,Ie=32,Le=852,Pe=592,t=15,i=t;function e(w){return(w>>>24&255)+(w>>>8&65280)+((w&65280)<<8)+((w&255)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(w){var V;return!w||!w.state?k:(V=w.state,w.total_in=w.total_out=V.total=0,w.msg="",V.wrap&&(w.adler=V.wrap&1),V.mode=H,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new l.Buf32(Le),V.distcode=V.distdyn=new l.Buf32(Pe),V.sane=1,V.back=-1,W)}function u(w){var V;return!w||!w.state?k:(V=w.state,V.wsize=0,V.whave=0,V.wnext=0,a(w))}function h(w,V){var f,ce;return!w||!w.state||(ce=w.state,V<0?(f=0,V=-V):(f=(V>>4)+1,V<48&&(V&=15)),V&&(V<8||V>15))?k:(ce.window!==null&&ce.wbits!==V&&(ce.window=null),ce.wrap=f,ce.wbits=V,u(w))}function o(w,V){var f,ce;return w?(ce=new n,w.state=ce,ce.window=null,f=h(w,V),f!==W&&(w.state=null),f):k}function _(w){return o(w,i)}var I=!0,G,ee;function de(w){if(I){var V;for(G=new l.Buf32(512),ee=new l.Buf32(32),V=0;V<144;)w.lens[V++]=8;for(;V<256;)w.lens[V++]=9;for(;V<280;)w.lens[V++]=7;for(;V<288;)w.lens[V++]=8;for(J(b,w.lens,0,288,G,0,w.work,{bits:9}),V=0;V<32;)w.lens[V++]=5;J(B,w.lens,0,32,ee,0,w.work,{bits:5}),I=!1}w.lencode=G,w.lenbits=9,w.distcode=ee,w.distbits=5}function _e(w,V,f,ce){var Ee,r=w.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new l.Buf8(r.wsize)),ce>=r.wsize?(l.arraySet(r.window,V,f-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(Ee=r.wsize-r.wnext,Ee>ce&&(Ee=ce),l.arraySet(r.window,V,f-ce,Ee,r.wnext),ce-=Ee,ce?(l.arraySet(r.window,V,f-ce,ce,0),r.wnext=ce,r.whave=r.wsize):(r.wnext+=Ee,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=Ee))),0}function s(w,V){var f,ce,Ee,r,ne,se,d,T,re,Te,we,Se,Ae,Ve,Be=0,Ne,Fe,Ce,qe,Je,Ke,De,ze,je=new l.Buf8(4),$e,Ue,Zt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return k;f=w.state,f.mode===p&&(f.mode=m),ne=w.next_out,Ee=w.output,d=w.avail_out,r=w.next_in,ce=w.input,se=w.avail_in,T=f.hold,re=f.bits,Te=se,we=d,ze=W;e:for(;;)switch(f.mode){case H:if(f.wrap===0){f.mode=m;break}for(;re<16;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(f.wrap&2&&T===35615){f.check=0,je[0]=T&255,je[1]=T>>>8&255,f.check=ue(f.check,je,2,0),T=0,re=0,f.mode=X;break}if(f.flags=0,f.head&&(f.head.done=!1),!(f.wrap&1)||(((T&255)<<8)+(T>>8))%31){w.msg="incorrect header check",f.mode=ke;break}if((T&15)!==N){w.msg="unknown compression method",f.mode=ke;break}if(T>>>=4,re-=4,De=(T&15)+8,f.wbits===0)f.wbits=De;else if(De>f.wbits){w.msg="invalid window size",f.mode=ke;break}f.dmax=1<<De,w.adler=f.check=1,f.mode=T&512?v:p,T=0,re=0;break;case X:for(;re<16;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(f.flags=T,(f.flags&255)!==N){w.msg="unknown compression method",f.mode=ke;break}if(f.flags&57344){w.msg="unknown header flags set",f.mode=ke;break}f.head&&(f.head.text=T>>8&1),f.flags&512&&(je[0]=T&255,je[1]=T>>>8&255,f.check=ue(f.check,je,2,0)),T=0,re=0,f.mode=oe;case oe:for(;re<32;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.head&&(f.head.time=T),f.flags&512&&(je[0]=T&255,je[1]=T>>>8&255,je[2]=T>>>16&255,je[3]=T>>>24&255,f.check=ue(f.check,je,4,0)),T=0,re=0,f.mode=ie;case ie:for(;re<16;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.head&&(f.head.xflags=T&255,f.head.os=T>>8),f.flags&512&&(je[0]=T&255,je[1]=T>>>8&255,f.check=ue(f.check,je,2,0)),T=0,re=0,f.mode=$;case $:if(f.flags&1024){for(;re<16;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.length=T,f.head&&(f.head.extra_len=T),f.flags&512&&(je[0]=T&255,je[1]=T>>>8&255,f.check=ue(f.check,je,2,0)),T=0,re=0}else f.head&&(f.head.extra=null);f.mode=L;case L:if(f.flags&1024&&(Se=f.length,Se>se&&(Se=se),Se&&(f.head&&(De=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),l.arraySet(f.head.extra,ce,r,Se,De)),f.flags&512&&(f.check=ue(f.check,ce,Se,r)),se-=Se,r+=Se,f.length-=Se),f.length))break e;f.length=0,f.mode=R;case R:if(f.flags&2048){if(se===0)break e;Se=0;do De=ce[r+Se++],f.head&&De&&f.length<65536&&(f.head.name+=String.fromCharCode(De));while(De&&Se<se);if(f.flags&512&&(f.check=ue(f.check,ce,Se,r)),se-=Se,r+=Se,De)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=Y;case Y:if(f.flags&4096){if(se===0)break e;Se=0;do De=ce[r+Se++],f.head&&De&&f.length<65536&&(f.head.comment+=String.fromCharCode(De));while(De&&Se<se);if(f.flags&512&&(f.check=ue(f.check,ce,Se,r)),se-=Se,r+=Se,De)break e}else f.head&&(f.head.comment=null);f.mode=te;case te:if(f.flags&512){for(;re<16;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(T!==(f.check&65535)){w.msg="header crc mismatch",f.mode=ke;break}T=0,re=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),w.adler=f.check=0,f.mode=p;break;case v:for(;re<32;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}w.adler=f.check=e(T),T=0,re=0,f.mode=O;case O:if(f.havedict===0)return w.next_out=ne,w.avail_out=d,w.next_in=r,w.avail_in=se,f.hold=T,f.bits=re,c;w.adler=f.check=1,f.mode=p;case p:if(V===z||V===S)break e;case m:if(f.last){T>>>=re&7,re-=re&7,f.mode=ge;break}for(;re<3;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}switch(f.last=T&1,T>>>=1,re-=1,T&3){case 0:f.mode=j;break;case 1:if(de(f),f.mode=ye,V===S){T>>>=2,re-=2;break e}break;case 2:f.mode=F;break;case 3:w.msg="invalid block type",f.mode=ke}T>>>=2,re-=2;break;case j:for(T>>>=re&7,re-=re&7;re<32;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if((T&65535)!==(T>>>16^65535)){w.msg="invalid stored block lengths",f.mode=ke;break}if(f.length=T&65535,T=0,re=0,f.mode=M,V===S)break e;case M:f.mode=he;case he:if(Se=f.length,Se){if(Se>se&&(Se=se),Se>d&&(Se=d),Se===0)break e;l.arraySet(Ee,ce,r,Se,ne),se-=Se,r+=Se,d-=Se,ne+=Se,f.length-=Se;break}f.mode=p;break;case F:for(;re<14;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(f.nlen=(T&31)+257,T>>>=5,re-=5,f.ndist=(T&31)+1,T>>>=5,re-=5,f.ncode=(T&15)+4,T>>>=4,re-=4,f.nlen>286||f.ndist>30){w.msg="too many length or distance symbols",f.mode=ke;break}f.have=0,f.mode=C;case C:for(;f.have<f.ncode;){for(;re<3;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.lens[Zt[f.have++]]=T&7,T>>>=3,re-=3}for(;f.have<19;)f.lens[Zt[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,$e={bits:f.lenbits},ze=J(g,f.lens,0,19,f.lencode,0,f.work,$e),f.lenbits=$e.bits,ze){w.msg="invalid code lengths set",f.mode=ke;break}f.have=0,f.mode=ve;case ve:for(;f.have<f.nlen+f.ndist;){for(;Be=f.lencode[T&(1<<f.lenbits)-1],Ne=Be>>>24,Fe=Be>>>16&255,Ce=Be&65535,!(Ne<=re);){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(Ce<16)T>>>=Ne,re-=Ne,f.lens[f.have++]=Ce;else{if(Ce===16){for(Ue=Ne+2;re<Ue;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(T>>>=Ne,re-=Ne,f.have===0){w.msg="invalid bit length repeat",f.mode=ke;break}De=f.lens[f.have-1],Se=3+(T&3),T>>>=2,re-=2}else if(Ce===17){for(Ue=Ne+3;re<Ue;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}T>>>=Ne,re-=Ne,De=0,Se=3+(T&7),T>>>=3,re-=3}else{for(Ue=Ne+7;re<Ue;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}T>>>=Ne,re-=Ne,De=0,Se=11+(T&127),T>>>=7,re-=7}if(f.have+Se>f.nlen+f.ndist){w.msg="invalid bit length repeat",f.mode=ke;break}for(;Se--;)f.lens[f.have++]=De}}if(f.mode===ke)break;if(f.lens[256]===0){w.msg="invalid code -- missing end-of-block",f.mode=ke;break}if(f.lenbits=9,$e={bits:f.lenbits},ze=J(b,f.lens,0,f.nlen,f.lencode,0,f.work,$e),f.lenbits=$e.bits,ze){w.msg="invalid literal/lengths set",f.mode=ke;break}if(f.distbits=6,f.distcode=f.distdyn,$e={bits:f.distbits},ze=J(B,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,$e),f.distbits=$e.bits,ze){w.msg="invalid distances set",f.mode=ke;break}if(f.mode=ye,V===S)break e;case ye:f.mode=me;case me:if(se>=6&&d>=258){w.next_out=ne,w.avail_out=d,w.next_in=r,w.avail_in=se,f.hold=T,f.bits=re,E(w,we),ne=w.next_out,Ee=w.output,d=w.avail_out,r=w.next_in,ce=w.input,se=w.avail_in,T=f.hold,re=f.bits,f.mode===p&&(f.back=-1);break}for(f.back=0;Be=f.lencode[T&(1<<f.lenbits)-1],Ne=Be>>>24,Fe=Be>>>16&255,Ce=Be&65535,!(Ne<=re);){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(Fe&&(Fe&240)===0){for(qe=Ne,Je=Fe,Ke=Ce;Be=f.lencode[Ke+((T&(1<<qe+Je)-1)>>qe)],Ne=Be>>>24,Fe=Be>>>16&255,Ce=Be&65535,!(qe+Ne<=re);){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}T>>>=qe,re-=qe,f.back+=qe}if(T>>>=Ne,re-=Ne,f.back+=Ne,f.length=Ce,Fe===0){f.mode=Q;break}if(Fe&32){f.back=-1,f.mode=p;break}if(Fe&64){w.msg="invalid literal/length code",f.mode=ke;break}f.extra=Fe&15,f.mode=Z;case Z:if(f.extra){for(Ue=f.extra;re<Ue;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.length+=T&(1<<f.extra)-1,T>>>=f.extra,re-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=P;case P:for(;Be=f.distcode[T&(1<<f.distbits)-1],Ne=Be>>>24,Fe=Be>>>16&255,Ce=Be&65535,!(Ne<=re);){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if((Fe&240)===0){for(qe=Ne,Je=Fe,Ke=Ce;Be=f.distcode[Ke+((T&(1<<qe+Je)-1)>>qe)],Ne=Be>>>24,Fe=Be>>>16&255,Ce=Be&65535,!(qe+Ne<=re);){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}T>>>=qe,re-=qe,f.back+=qe}if(T>>>=Ne,re-=Ne,f.back+=Ne,Fe&64){w.msg="invalid distance code",f.mode=ke;break}f.offset=Ce,f.extra=Fe&15,f.mode=D;case D:if(f.extra){for(Ue=f.extra;re<Ue;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}f.offset+=T&(1<<f.extra)-1,T>>>=f.extra,re-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){w.msg="invalid distance too far back",f.mode=ke;break}f.mode=pe;case pe:if(d===0)break e;if(Se=we-d,f.offset>Se){if(Se=f.offset-Se,Se>f.whave&&f.sane){w.msg="invalid distance too far back",f.mode=ke;break}Se>f.wnext?(Se-=f.wnext,Ae=f.wsize-Se):Ae=f.wnext-Se,Se>f.length&&(Se=f.length),Ve=f.window}else Ve=Ee,Ae=ne-f.offset,Se=f.length;Se>d&&(Se=d),d-=Se,f.length-=Se;do Ee[ne++]=Ve[Ae++];while(--Se);f.length===0&&(f.mode=me);break;case Q:if(d===0)break e;Ee[ne++]=f.length,d--,f.mode=me;break;case ge:if(f.wrap){for(;re<32;){if(se===0)break e;se--,T|=ce[r++]<<re,re+=8}if(we-=d,w.total_out+=we,f.total+=we,we&&(w.adler=f.check=f.flags?ue(f.check,Ee,we,ne-we):q(f.check,Ee,we,ne-we)),we=d,(f.flags?T:e(T))!==f.check){w.msg="incorrect data check",f.mode=ke;break}T=0,re=0}f.mode=be;case be:if(f.wrap&&f.flags){for(;re<32;){if(se===0)break e;se--,T+=ce[r++]<<re,re+=8}if(T!==(f.total&4294967295)){w.msg="incorrect length check",f.mode=ke;break}T=0,re=0}f.mode=Oe;case Oe:ze=y;break e;case ke:ze=K;break e;case xe:return fe;case Ie:default:return k}return w.next_out=ne,w.avail_out=d,w.next_in=r,w.avail_in=se,f.hold=T,f.bits=re,(f.wsize||we!==w.avail_out&&f.mode<ke&&(f.mode<ge||V!==A))&&_e(w,w.output,w.next_out,we-w.avail_out),Te-=w.avail_in,we-=w.avail_out,w.total_in+=Te,w.total_out+=we,f.total+=we,f.wrap&&we&&(w.adler=f.check=f.flags?ue(f.check,Ee,we,w.next_out-we):q(f.check,Ee,we,w.next_out-we)),w.data_type=f.bits+(f.last?64:0)+(f.mode===p?128:0)+(f.mode===ye||f.mode===M?256:0),(Te===0&&we===0||V===A)&&ze===W&&(ze=ae),ze}function x(w){if(!w||!w.state)return k;var V=w.state;return V.window&&(V.window=null),w.state=null,W}function U(w,V){var f;return!w||!w.state||(f=w.state,(f.wrap&2)===0)?k:(f.head=V,V.done=!1,W)}function le(w,V){var f=V.length,ce,Ee,r;return!w||!w.state||(ce=w.state,ce.wrap!==0&&ce.mode!==O)?k:ce.mode===O&&(Ee=1,Ee=q(Ee,V,f,0),Ee!==ce.check)?K:(r=_e(w,V,f,f),r?(ce.mode=xe,fe):(ce.havedict=1,W))}return Me.inflateReset=u,Me.inflateReset2=h,Me.inflateResetKeep=a,Me.inflateInit=_,Me.inflateInit2=o,Me.inflate=s,Me.inflateEnd=x,Me.inflateGetHeader=U,Me.inflateSetDictionary=le,Me.inflateInfo="pako inflate (from Nodeca project)",Me}var Ct,Tr;function gn(){return Tr||(Tr=1,Ct={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Ct}var Or;function mn(){return Or||(Or=1,function(l){var q=Xe(),ue=ln(),E=pn(),J=yn(),g=gn();for(var b in g)l[b]=g[b];l.NONE=0,l.DEFLATE=1,l.INFLATE=2,l.GZIP=3,l.GUNZIP=4,l.DEFLATERAW=5,l.INFLATERAW=6,l.UNZIP=7;var B=31,A=139;function z(S){if(typeof S!="number"||S<l.DEFLATE||S>l.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=S,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}z.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,q(this.init_done,"close before init"),q(this.mode<=l.UNZIP),this.mode===l.DEFLATE||this.mode===l.GZIP||this.mode===l.DEFLATERAW?E.deflateEnd(this.strm):(this.mode===l.INFLATE||this.mode===l.GUNZIP||this.mode===l.INFLATERAW||this.mode===l.UNZIP)&&J.inflateEnd(this.strm),this.mode=l.NONE,this.dictionary=null},z.prototype.write=function(S,W,y,c,k,K,fe){return this._write(!0,S,W,y,c,k,K,fe)},z.prototype.writeSync=function(S,W,y,c,k,K,fe){return this._write(!1,S,W,y,c,k,K,fe)},z.prototype._write=function(S,W,y,c,k,K,fe,ae){if(q.equal(arguments.length,8),q(this.init_done,"write before init"),q(this.mode!==l.NONE,"already finalized"),q.equal(!1,this.write_in_progress,"write already in progress"),q.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,q.equal(!1,W===void 0,"must provide flush value"),this.write_in_progress=!0,W!==l.Z_NO_FLUSH&&W!==l.Z_PARTIAL_FLUSH&&W!==l.Z_SYNC_FLUSH&&W!==l.Z_FULL_FLUSH&&W!==l.Z_FINISH&&W!==l.Z_BLOCK)throw new Error("Invalid flush value");if(y==null&&(y=$r.alloc(0),k=0,c=0),this.strm.avail_in=k,this.strm.input=y,this.strm.next_in=c,this.strm.avail_out=ae,this.strm.output=K,this.strm.next_out=fe,this.flush=W,!S)return this._process(),this._checkError()?this._afterSync():void 0;var N=this;return Re.nextTick(function(){N._process(),N._after()}),this},z.prototype._afterSync=function(){var S=this.strm.avail_out,W=this.strm.avail_in;return this.write_in_progress=!1,[W,S]},z.prototype._process=function(){var S=null;switch(this.mode){case l.DEFLATE:case l.GZIP:case l.DEFLATERAW:this.err=E.deflate(this.strm,this.flush);break;case l.UNZIP:switch(this.strm.avail_in>0&&(S=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(S===null)break;if(this.strm.input[S]===B){if(this.gzip_id_bytes_read=1,S++,this.strm.avail_in===1)break}else{this.mode=l.INFLATE;break}case 1:if(S===null)break;this.strm.input[S]===A?(this.gzip_id_bytes_read=2,this.mode=l.GUNZIP):this.mode=l.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case l.INFLATE:case l.GUNZIP:case l.INFLATERAW:for(this.err=J.inflate(this.strm,this.flush),this.err===l.Z_NEED_DICT&&this.dictionary&&(this.err=J.inflateSetDictionary(this.strm,this.dictionary),this.err===l.Z_OK?this.err=J.inflate(this.strm,this.flush):this.err===l.Z_DATA_ERROR&&(this.err=l.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===l.GUNZIP&&this.err===l.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=J.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},z.prototype._checkError=function(){switch(this.err){case l.Z_OK:case l.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===l.Z_FINISH)return this._error("unexpected end of file"),!1;break;case l.Z_STREAM_END:break;case l.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},z.prototype._after=function(){if(this._checkError()){var S=this.strm.avail_out,W=this.strm.avail_in;this.write_in_progress=!1,this.callback(W,S),this.pending_close&&this.close()}},z.prototype._error=function(S){this.strm.msg&&(S=this.strm.msg),this.onerror(S,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},z.prototype.init=function(S,W,y,c,k){q(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),q(S>=8&&S<=15,"invalid windowBits"),q(W>=-1&&W<=9,"invalid compression level"),q(y>=1&&y<=9,"invalid memlevel"),q(c===l.Z_FILTERED||c===l.Z_HUFFMAN_ONLY||c===l.Z_RLE||c===l.Z_FIXED||c===l.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(W,S,y,c,k),this._setDictionary()},z.prototype.params=function(){throw new Error("deflateParams Not supported")},z.prototype.reset=function(){this._reset(),this._setDictionary()},z.prototype._init=function(S,W,y,c,k){switch(this.level=S,this.windowBits=W,this.memLevel=y,this.strategy=c,this.flush=l.Z_NO_FLUSH,this.err=l.Z_OK,(this.mode===l.GZIP||this.mode===l.GUNZIP)&&(this.windowBits+=16),this.mode===l.UNZIP&&(this.windowBits+=32),(this.mode===l.DEFLATERAW||this.mode===l.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new ue,this.mode){case l.DEFLATE:case l.GZIP:case l.DEFLATERAW:this.err=E.deflateInit2(this.strm,this.level,l.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case l.INFLATE:case l.GUNZIP:case l.INFLATERAW:case l.UNZIP:this.err=J.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==l.Z_OK&&this._error("Init error"),this.dictionary=k,this.write_in_progress=!1,this.init_done=!0},z.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=l.Z_OK,this.mode){case l.DEFLATE:case l.DEFLATERAW:this.err=E.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==l.Z_OK&&this._error("Failed to set dictionary")}},z.prototype._reset=function(){switch(this.err=l.Z_OK,this.mode){case l.DEFLATE:case l.DEFLATERAW:case l.GZIP:this.err=E.deflateReset(this.strm);break;case l.INFLATE:case l.INFLATERAW:case l.GUNZIP:this.err=J.inflateReset(this.strm);break}this.err!==l.Z_OK&&this._error("Failed to reset stream")},l.Zlib=z}(ht)),ht}var xr;function bn(){return xr||(xr=1,function(l){var q=We().Buffer,ue=Qe().Transform,E=mn(),J=Ze(),g=Xe().ok,b=We().kMaxLength,B="Cannot create final Buffer. It would be larger than 0x"+b.toString(16)+" bytes";E.Z_MIN_WINDOWBITS=8,E.Z_MAX_WINDOWBITS=15,E.Z_DEFAULT_WINDOWBITS=15,E.Z_MIN_CHUNK=64,E.Z_MAX_CHUNK=1/0,E.Z_DEFAULT_CHUNK=16*1024,E.Z_MIN_MEMLEVEL=1,E.Z_MAX_MEMLEVEL=9,E.Z_DEFAULT_MEMLEVEL=8,E.Z_MIN_LEVEL=-1,E.Z_MAX_LEVEL=9,E.Z_DEFAULT_LEVEL=E.Z_DEFAULT_COMPRESSION;for(var A=Object.keys(E),z=0;z<A.length;z++){var S=A[z];S.match(/^Z/)&&Object.defineProperty(l,S,{enumerable:!0,value:E[S],writable:!1})}for(var W={Z_OK:E.Z_OK,Z_STREAM_END:E.Z_STREAM_END,Z_NEED_DICT:E.Z_NEED_DICT,Z_ERRNO:E.Z_ERRNO,Z_STREAM_ERROR:E.Z_STREAM_ERROR,Z_DATA_ERROR:E.Z_DATA_ERROR,Z_MEM_ERROR:E.Z_MEM_ERROR,Z_BUF_ERROR:E.Z_BUF_ERROR,Z_VERSION_ERROR:E.Z_VERSION_ERROR},y=Object.keys(W),c=0;c<y.length;c++){var k=y[c];W[W[k]]=k}Object.defineProperty(l,"codes",{enumerable:!0,value:Object.freeze(W),writable:!1}),l.Deflate=ae,l.Inflate=N,l.Gzip=H,l.Gunzip=X,l.DeflateRaw=oe,l.InflateRaw=ie,l.Unzip=$,l.createDeflate=function(v){return new ae(v)},l.createInflate=function(v){return new N(v)},l.createDeflateRaw=function(v){return new oe(v)},l.createInflateRaw=function(v){return new ie(v)},l.createGzip=function(v){return new H(v)},l.createGunzip=function(v){return new X(v)},l.createUnzip=function(v){return new $(v)},l.deflate=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new ae(O),v,p)},l.deflateSync=function(v,O){return fe(new ae(O),v)},l.gzip=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new H(O),v,p)},l.gzipSync=function(v,O){return fe(new H(O),v)},l.deflateRaw=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new oe(O),v,p)},l.deflateRawSync=function(v,O){return fe(new oe(O),v)},l.unzip=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new $(O),v,p)},l.unzipSync=function(v,O){return fe(new $(O),v)},l.inflate=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new N(O),v,p)},l.inflateSync=function(v,O){return fe(new N(O),v)},l.gunzip=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new X(O),v,p)},l.gunzipSync=function(v,O){return fe(new X(O),v)},l.inflateRaw=function(v,O,p){return typeof O=="function"&&(p=O,O={}),K(new ie(O),v,p)},l.inflateRawSync=function(v,O){return fe(new ie(O),v)};function K(v,O,p){var m=[],j=0;v.on("error",he),v.on("end",F),v.end(O),M();function M(){for(var C;(C=v.read())!==null;)m.push(C),j+=C.length;v.once("readable",M)}function he(C){v.removeListener("end",F),v.removeListener("readable",M),p(C)}function F(){var C,ve=null;j>=b?ve=new RangeError(B):C=q.concat(m,j),m=[],v.close(),p(ve,C)}}function fe(v,O){if(typeof O=="string"&&(O=q.from(O)),!q.isBuffer(O))throw new TypeError("Not a string or buffer");var p=v._finishFlushFlag;return v._processChunk(O,p)}function ae(v){if(!(this instanceof ae))return new ae(v);R.call(this,v,E.DEFLATE)}function N(v){if(!(this instanceof N))return new N(v);R.call(this,v,E.INFLATE)}function H(v){if(!(this instanceof H))return new H(v);R.call(this,v,E.GZIP)}function X(v){if(!(this instanceof X))return new X(v);R.call(this,v,E.GUNZIP)}function oe(v){if(!(this instanceof oe))return new oe(v);R.call(this,v,E.DEFLATERAW)}function ie(v){if(!(this instanceof ie))return new ie(v);R.call(this,v,E.INFLATERAW)}function $(v){if(!(this instanceof $))return new $(v);R.call(this,v,E.UNZIP)}function L(v){return v===E.Z_NO_FLUSH||v===E.Z_PARTIAL_FLUSH||v===E.Z_SYNC_FLUSH||v===E.Z_FULL_FLUSH||v===E.Z_FINISH||v===E.Z_BLOCK}function R(v,O){var p=this;if(this._opts=v=v||{},this._chunkSize=v.chunkSize||l.Z_DEFAULT_CHUNK,ue.call(this,v),v.flush&&!L(v.flush))throw new Error("Invalid flush flag: "+v.flush);if(v.finishFlush&&!L(v.finishFlush))throw new Error("Invalid flush flag: "+v.finishFlush);if(this._flushFlag=v.flush||E.Z_NO_FLUSH,this._finishFlushFlag=typeof v.finishFlush<"u"?v.finishFlush:E.Z_FINISH,v.chunkSize&&(v.chunkSize<l.Z_MIN_CHUNK||v.chunkSize>l.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+v.chunkSize);if(v.windowBits&&(v.windowBits<l.Z_MIN_WINDOWBITS||v.windowBits>l.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+v.windowBits);if(v.level&&(v.level<l.Z_MIN_LEVEL||v.level>l.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+v.level);if(v.memLevel&&(v.memLevel<l.Z_MIN_MEMLEVEL||v.memLevel>l.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+v.memLevel);if(v.strategy&&v.strategy!=l.Z_FILTERED&&v.strategy!=l.Z_HUFFMAN_ONLY&&v.strategy!=l.Z_RLE&&v.strategy!=l.Z_FIXED&&v.strategy!=l.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+v.strategy);if(v.dictionary&&!q.isBuffer(v.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new E.Zlib(O);var m=this;this._hadError=!1,this._handle.onerror=function(he,F){Y(m),m._hadError=!0;var C=new Error(he);C.errno=F,C.code=l.codes[F],m.emit("error",C)};var j=l.Z_DEFAULT_COMPRESSION;typeof v.level=="number"&&(j=v.level);var M=l.Z_DEFAULT_STRATEGY;typeof v.strategy=="number"&&(M=v.strategy),this._handle.init(v.windowBits||l.Z_DEFAULT_WINDOWBITS,j,v.memLevel||l.Z_DEFAULT_MEMLEVEL,M,v.dictionary),this._buffer=q.allocUnsafe(this._chunkSize),this._offset=0,this._level=j,this._strategy=M,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!p._handle},configurable:!0,enumerable:!0})}J.inherits(R,ue),R.prototype.params=function(v,O,p){if(v<l.Z_MIN_LEVEL||v>l.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+v);if(O!=l.Z_FILTERED&&O!=l.Z_HUFFMAN_ONLY&&O!=l.Z_RLE&&O!=l.Z_FIXED&&O!=l.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+O);if(this._level!==v||this._strategy!==O){var m=this;this.flush(E.Z_SYNC_FLUSH,function(){g(m._handle,"zlib binding closed"),m._handle.params(v,O),m._hadError||(m._level=v,m._strategy=O,p&&p())})}else Re.nextTick(p)},R.prototype.reset=function(){return g(this._handle,"zlib binding closed"),this._handle.reset()},R.prototype._flush=function(v){this._transform(q.alloc(0),"",v)},R.prototype.flush=function(v,O){var p=this,m=this._writableState;(typeof v=="function"||v===void 0&&!O)&&(O=v,v=E.Z_FULL_FLUSH),m.ended?O&&Re.nextTick(O):m.ending?O&&this.once("end",O):m.needDrain?O&&this.once("drain",function(){return p.flush(v,O)}):(this._flushFlag=v,this.write(q.alloc(0),"",O))},R.prototype.close=function(v){Y(this,v),Re.nextTick(te,this)};function Y(v,O){O&&Re.nextTick(O),v._handle&&(v._handle.close(),v._handle=null)}function te(v){v.emit("close")}R.prototype._transform=function(v,O,p){var m,j=this._writableState,M=j.ending||j.ended,he=M&&(!v||j.length===v.length);if(v!==null&&!q.isBuffer(v))return p(new Error("invalid input"));if(!this._handle)return p(new Error("zlib binding closed"));he?m=this._finishFlushFlag:(m=this._flushFlag,v.length>=j.length&&(this._flushFlag=this._opts.flush||E.Z_NO_FLUSH)),this._processChunk(v,m,p)},R.prototype._processChunk=function(v,O,p){var m=v&&v.length,j=this._chunkSize-this._offset,M=0,he=this,F=typeof p=="function";if(!F){var C=[],ve=0,ye;this.on("error",function(pe){ye=pe}),g(this._handle,"zlib binding closed");do var me=this._handle.writeSync(O,v,M,m,this._buffer,this._offset,j);while(!this._hadError&&D(me[0],me[1]));if(this._hadError)throw ye;if(ve>=b)throw Y(this),new RangeError(B);var Z=q.concat(C,ve);return Y(this),Z}g(this._handle,"zlib binding closed");var P=this._handle.write(O,v,M,m,this._buffer,this._offset,j);P.buffer=v,P.callback=D;function D(pe,Q){if(this&&(this.buffer=null,this.callback=null),!he._hadError){var ge=j-Q;if(g(ge>=0,"have should not go down"),ge>0){var be=he._buffer.slice(he._offset,he._offset+ge);he._offset+=ge,F?he.push(be):(C.push(be),ve+=be.length)}if((Q===0||he._offset>=he._chunkSize)&&(j=he._chunkSize,he._offset=0,he._buffer=q.allocUnsafe(he._chunkSize)),Q===0){if(M+=m-pe,m=pe,!F)return!0;var Oe=he._handle.write(O,v,M,m,he._buffer,he._offset,he._chunkSize);Oe.callback=D,Oe.buffer=v;return}if(!F)return!1;p()}}},J.inherits(ae,R),J.inherits(N,R),J.inherits(H,R),J.inherits(X,R),J.inherits(oe,R),J.inherits(ie,R),J.inherits($,R)}(lt)),lt}var qt,Ar;function wn(){if(Ar)return qt;Ar=1;var l=zt(),q=Ye(),ue=We(),E=Qe(),J=Ze(),g=bn(),b=ue.Buffer,B={namespace:"org.apache.avro.file"},A=l.Type.forSchema("long",B),z=l.Type.forSchema({type:"map",values:"bytes"},B),S=l.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:z},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},B),W=l.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},B),y=q.bufferFrom("Obj"),c=J.format,k=q.Tap;function K(L,R){R=R||{};var Y=!!R.noDecode;E.Duplex.call(this,{readableObjectMode:!Y,allowHalfOpen:!1}),this._type=l.Type.forSchema(L),this._tap=new k(q.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=ie(Y,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}J.inherits(K,E.Duplex),K.prototype._write=function(L,R,Y){this._writeCb=Y;var te=this._tap;te.buf=b.concat([te.buf.slice(te.pos),L]),te.pos=0,this._needPush&&(this._needPush=!1,this._read())},K.prototype._read=function(){this._needPush=!1;var L=this._tap,R=L.pos,Y=this._readValue(L);L.isValid()?this.push(Y):this._finished?this.push(null):(L.pos=R,this._needPush=!0,this._writeCb&&this._writeCb())};function fe(L){L=L||{};var R=!!L.noDecode;E.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!R}),this._rType=L.readerSchema!==void 0?l.Type.forSchema(L.readerSchema):void 0,this._wType=null,this._codecs=L.codecs,this._codec=void 0,this._parseHook=L.parseHook,this._tap=new k(q.newBuffer(0)),this._blockTap=new k(q.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=R,this._queue=new q.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}J.inherits(fe,E.Duplex),fe.defaultCodecs=function(){return{null:function(L,R){R(null,L)},deflate:g.inflateRaw}},fe.getDefaultCodecs=fe.defaultCodecs,fe.prototype._decodeHeader=function(){var L=this._tap;if(L.buf.length<y.length)return!1;if(!y.equals(L.buf.slice(0,y.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var R=S._read(L);if(!L.isValid())return!1;this._codec=(R.meta["avro.codec"]||"null").toString();var Y=this._codecs||fe.getDefaultCodecs();if(this._decompress=Y[this._codec],!this._decompress){this.emit("error",new Error(c("unknown codec: %s",this._codec)));return}try{var te=JSON.parse(R.meta["avro.schema"].toString());this._parseHook&&(te=this._parseHook(te)),this._wType=l.Type.forSchema(te)}catch(v){this.emit("error",v);return}try{this._readValue=ie(this._noDecode,this._wType,this._rType)}catch(v){this.emit("error",v);return}return this._syncMarker=R.sync,this.emit("metadata",this._wType,this._codec,R),!0},fe.prototype._write=function(L,R,Y){var te=this._tap;if(te.buf=b.concat([te.buf,L]),te.pos=0,!this._decodeHeader()){Re.nextTick(Y);return}this._write=this._writeChunk,this._write(q.newBuffer(0),R,Y)},fe.prototype._writeChunk=function(L,R,Y){var te=this._tap;te.buf=b.concat([te.buf.slice(te.pos),L]),te.pos=0;for(var v=1,O;O=oe(te);){if(!this._syncMarker.equals(O.sync)){this.emit("error",new Error("invalid sync marker"));return}v++,this._decompress(O.data,this._createBlockCallback(O.data.length,O.count,p))}p();function p(){--v||Y()}},fe.prototype._createBlockCallback=function(L,R,Y){var te=this,v=this._index++;return function(O,p){if(O){var m=new Error(c("%s codec decompression error",te._codec));m.cause=O,te.emit("error",m),Y()}else te.emit("block",new H(R,p.length,L)),te._queue.push(new X(v,p,Y,R)),te._needPush&&te._read()}},fe.prototype._read=function(){this._needPush=!1;var L=this._blockTap;if(!this._remaining){var R=this._queue.pop();if(!R||!R.count){this._finished?this.push(null):this._needPush=!0,R&&R.cb();return}R.cb(),this._remaining=R.count,L.buf=R.buf,L.pos=0}this._remaining--;var Y;try{if(Y=this._readValue(L),!L.isValid())throw new Error("truncated block")}catch(te){this._remaining=0,this.emit("error",te);return}this.push(Y)};function ae(L,R){R=R||{},E.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=l.Type.forSchema(L),this._writeValue=function(Y,te){try{this._type._write(Y,te)}catch(v){this.emit("typeError",v,te,this._type)}},this._tap=new k(q.newBuffer(R.batchSize||65536)),this.on("typeError",function(Y){this.emit("error",Y)})}J.inherits(ae,E.Transform),ae.prototype._transform=function(L,R,Y){var te=this._tap,v=te.buf,O=te.pos;if(this._writeValue(te,L),!te.isValid()){O&&this.push($(te.buf,0,O));var p=te.pos-O;p>v.length&&(te.buf=q.newBuffer(2*p)),te.pos=0,this._writeValue(te,L)}Y()},ae.prototype._flush=function(L){var R=this._tap,Y=R.pos;Y&&this.push(R.buf.slice(0,Y)),L()};function N(L,R){R=R||{},E.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var Y;if(l.Type.isType(L)?(Y=L,L=void 0):Y=l.Type.forSchema(L),this._schema=L,this._type=Y,this._writeValue=function(v,O){try{this._type._write(v,O)}catch(p){return this.emit("typeError",p,O,this._type),!1}return!0},this._blockSize=R.blockSize||65536,this._tap=new k(q.newBuffer(this._blockSize)),this._codecs=R.codecs,this._codec=R.codec||"null",this._blockCount=0,this._syncMarker=R.syncMarker||new q.Lcg().nextBuffer(16),this._queue=new q.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=R.metadata||{},!z.isValid(this._metadata))throw new Error("invalid metadata");var te=this._codec;if(this._compress=(this._codecs||N.getDefaultCodecs())[te],!this._compress)throw new Error(c("unsupported codec: %s",te));switch(R.omitHeader!==void 0&&(R.writeHeader=R.omitHeader?"never":"auto"),R.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)}),this.on("typeError",function(v){this.emit("error",v)})}J.inherits(N,E.Duplex),N.defaultCodecs=function(){return{null:function(L,R){R(null,L)},deflate:g.deflateRaw}},N.getDefaultCodecs=N.defaultCodecs,N.prototype._writeHeader=function(){var L=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),R=q.copyOwnProperties(this._metadata,{"avro.schema":q.bufferFrom(L),"avro.codec":q.bufferFrom(this._codec)},!0),Y=S.getRecordConstructor(),te=new Y(y,R,this._syncMarker);this.push(te.toBuffer())},N.prototype._write=function(L,R,Y){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var te=this._tap,v=te.pos,O=!1;if(this._writeValue(te,L)){if(!te.isValid()){v&&(this._flushChunk(v,Y),O=!0);var p=te.pos-v;p>this._blockSize&&(this._blockSize=p*2),te.buf=q.newBuffer(this._blockSize),te.pos=0,this._writeValue(te,L)}this._blockCount++}else te.pos=v;O||Y()},N.prototype._flushChunk=function(L,R){var Y=this._tap;L=L||Y.pos,this._compress(Y.buf.slice(0,L),this._createBlockCallback(L,R)),this._blockCount=0},N.prototype._read=function(){var L=this,R=this._queue.pop();if(!R){this._finished&&!this._pending?Re.nextTick(function(){L.push(null)}):this._needPush=!0;return}this.push(A.toBuffer(R.count,!0)),this.push(A.toBuffer(R.buf.length,!0)),this.push(R.buf),this.push(this._syncMarker),this._finished||R.cb()},N.prototype._createBlockCallback=function(L,R){var Y=this,te=this._index++,v=this._blockCount;return this._pending++,function(O,p){if(O){var m=new Error(c("%s codec compression error",Y._codec));m.cause=O,Y.emit("error",m);return}Y._pending--,Y.emit("block",new H(v,L,p.length)),Y._queue.push(new X(te,p,R,v)),Y._needPush&&(Y._needPush=!1,Y._read())}};function H(L,R,Y){this.valueCount=L,this.rawDataLength=R,this.compressedDataLength=Y}function X(L,R,Y,te){this.index=L,this.buf=R,this.cb=Y,this.count=te|0}function oe(L){var R=L.pos,Y=W._read(L);return L.isValid()?Y:(L.pos=R,null)}function ie(L,R,Y){if(L)return function(v){return function(O){var p=O.pos;return v(O),O.buf.slice(p,O.pos)}}(R._skip);if(Y){var te=Y.createResolver(R);return function(v){return te._read(v)}}else return function(v){return R._read(v)}}function $(L,R,Y){var te=q.newBuffer(Y);return L.copy(te,0,R,R+Y),te}return qt={BLOCK_TYPE:W,HEADER_TYPE:S,MAGIC_BYTES:y,streams:{BlockDecoder:fe,BlockEncoder:N,RawDecoder:K,RawEncoder:ae}},qt}var Nr;function En(){return Nr||(Nr=1,function(l){var q=en(),ue=wn(),E=Ye(),J=Qe(),g=Ze();function b(S,W){J.Readable.call(this),W=W||{},this._batchSize=W.batchSize||65536,this._blob=S,this._pos=0}g.inherits(b,J.Readable),b.prototype._read=function(){var S=this._pos;if(S>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var W=this._blob.slice(S,this._pos,this._blob.type),y=new FileReader,c=this;y.addEventListener("loadend",function k(K){y.removeEventListener("loadend",k,!1),K.error?c.emit("error",K.error):c.push(E.bufferFrom(y.result))},!1),y.readAsArrayBuffer(W)};function B(){J.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}g.inherits(B,J.Transform),B.prototype._transform=function(S,W,y){this._bufs.push(S),y()},B.prototype._flush=function(S){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),S()};function A(S,W){return new b(S).pipe(new ue.streams.BlockDecoder(W))}function z(S,W){var y=new ue.streams.BlockEncoder(S,W),c=new B;return y.pipe(c),new J.Duplex({objectMode:!0,read:function(){var k=c.read();k?fe(k):c.once("readable",fe);var K=this;function fe(ae){K.push(ae||c.read()),K.push(null)}},write:function(k,K,fe){return y.write(k,K,fe)}}).on("finish",function(){y.end()})}l.exports={createBlobDecoder:A,createBlobEncoder:z,streams:ue.streams},E.copyOwnProperties(q,l.exports)}(rt)),rt.exports}var zr=En();const Sn=Gr(zr),Tn=Wr({__proto__:null,default:Sn},[zr]);export{Tn as a};
